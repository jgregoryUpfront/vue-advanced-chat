{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/github.svg","webpack:///../src/utils/constants.js","webpack:///../src/utils/media-file.js","webpack:///./src/App.vue?5ee0","webpack:///./src/database/index.js","webpack:///./src/database/firestore.js","webpack:///./src/database/storage.js","webpack:///./src/ChatContainer.vue?7474","webpack:///./src/database/firebase.js","webpack:///./src/utils/dates.js","webpack:///../src/lib/ChatWindow.vue?0ddd","webpack:///../src/lib/RoomsList/RoomsList.vue?9c93","webpack:///../src/components/Loader/Loader.vue?8a81","webpack:///../src/components/Loader/Loader.vue","webpack:///../src/components/Loader/Loader.vue?80cf","webpack:///../src/components/Loader/Loader.vue?8dc0","webpack:///../src/lib/RoomsList/RoomsSearch/RoomsSearch.vue?2fa8","webpack:///../src/components/SvgIcon/SvgIcon.vue?9a7c","webpack:///../src/components/SvgIcon/SvgIcon.vue","webpack:///../src/components/SvgIcon/SvgIcon.vue?5b2b","webpack:///../src/components/SvgIcon/SvgIcon.vue?3f21","webpack:///../src/lib/RoomsList/RoomsSearch/RoomsSearch.vue","webpack:///../src/lib/RoomsList/RoomsSearch/RoomsSearch.vue?8f04","webpack:///../src/lib/RoomsList/RoomsSearch/RoomsSearch.vue?c8da","webpack:///../src/lib/RoomsList/RoomContent/RoomContent.vue?66d5","webpack:///../src/components/FormatMessage/FormatMessage.vue?116b","webpack:///../src/utils/format-string.js","webpack:///../src/components/FormatMessage/FormatMessage.vue","webpack:///../src/components/FormatMessage/FormatMessage.vue?f517","webpack:///../src/components/FormatMessage/FormatMessage.vue?d065","webpack:///../src/utils/typing-text.js","webpack:///../src/lib/RoomsList/RoomContent/RoomContent.vue","webpack:///../src/lib/RoomsList/RoomContent/RoomContent.vue?6c02","webpack:///../src/lib/RoomsList/RoomContent/RoomContent.vue?2270","webpack:///../src/utils/filter-items.js","webpack:///../src/lib/RoomsList/RoomsList.vue","webpack:///../src/utils/mp3-encoder.js","webpack:///../src/lib/RoomsList/RoomsList.vue?54fa","webpack:///../src/lib/RoomsList/RoomsList.vue?91f3","webpack:///../src/lib/Room/Room.vue?1bfd","webpack:///../src/components/EmojiPickerContainer/EmojiPickerContainer.vue?0a0b","webpack:///../src/components/EmojiPickerContainer/EmojiPickerContainer.vue","webpack:///../src/components/EmojiPickerContainer/EmojiPickerContainer.vue?769b","webpack:///../src/components/EmojiPickerContainer/EmojiPickerContainer.vue?b6d2","webpack:///../src/lib/Room/RoomHeader/RoomHeader.vue?ce5d","webpack:///../src/lib/Room/RoomHeader/RoomHeader.vue","webpack:///../src/lib/Room/RoomHeader/RoomHeader.vue?4a2e","webpack:///../src/lib/Room/RoomHeader/RoomHeader.vue?9a9c","webpack:///../src/lib/Room/RoomFiles/RoomFiles.vue?32ac","webpack:///../src/lib/Room/RoomFiles/RoomFile/RoomFile.vue?5c2a","webpack:///../src/lib/Room/RoomFiles/RoomFile/RoomFile.vue","webpack:///../src/lib/Room/RoomFiles/RoomFile/RoomFile.vue?632a","webpack:///../src/lib/Room/RoomFiles/RoomFile/RoomFile.vue?3fed","webpack:///../src/lib/Room/RoomFiles/RoomFiles.vue","webpack:///../src/lib/Room/RoomFiles/RoomFiles.vue?aeef","webpack:///../src/lib/Room/RoomFiles/RoomFiles.vue?c980","webpack:///../src/lib/Room/RoomMessageReply/RoomMessageReply.vue?b3b0","webpack:///../src/lib/Message/AudioPlayer/AudioPlayer.vue?6bd0","webpack:///../src/lib/Message/AudioPlayer/AudioControl/AudioControl.vue?61aa","webpack:///../src/lib/Message/AudioPlayer/AudioControl/AudioControl.vue","webpack:///../src/lib/Message/AudioPlayer/AudioControl/AudioControl.vue?3d05","webpack:///../src/lib/Message/AudioPlayer/AudioControl/AudioControl.vue?485f","webpack:///../src/lib/Message/AudioPlayer/AudioPlayer.vue","webpack:///../src/lib/Message/AudioPlayer/AudioPlayer.vue?7e93","webpack:///../src/lib/Message/AudioPlayer/AudioPlayer.vue?d3ea","webpack:///../src/lib/Room/RoomMessageReply/RoomMessageReply.vue","webpack:///../src/lib/Room/RoomMessageReply/RoomMessageReply.vue?cba0","webpack:///../src/lib/Room/RoomMessageReply/RoomMessageReply.vue?de83","webpack:///../src/lib/Room/RoomUsersTag/RoomUsersTag.vue?eb4e","webpack:///../src/lib/Room/RoomUsersTag/RoomUsersTag.vue","webpack:///../src/lib/Room/RoomUsersTag/RoomUsersTag.vue?00c8","webpack:///../src/lib/Room/RoomUsersTag/RoomUsersTag.vue?04df","webpack:///../src/lib/Room/RoomEmojis/RoomEmojis.vue?e9bd","webpack:///../src/lib/Room/RoomEmojis/RoomEmojis.vue","webpack:///../src/lib/Room/RoomEmojis/RoomEmojis.vue?68e9","webpack:///../src/lib/Room/RoomEmojis/RoomEmojis.vue?5cb8","webpack:///../src/lib/Room/RoomTemplatesText/RoomTemplatesText.vue?9ca9","webpack:///../src/lib/Room/RoomTemplatesText/RoomTemplatesText.vue","webpack:///../src/lib/Room/RoomTemplatesText/RoomTemplatesText.vue?9d95","webpack:///../src/lib/Room/RoomTemplatesText/RoomTemplatesText.vue?0196","webpack:///../src/lib/Message/Message.vue?83ce","webpack:///../src/lib/Message/MessageReply/MessageReply.vue?1353","webpack:///../src/lib/Message/MessageReply/MessageReply.vue","webpack:///../src/lib/Message/MessageReply/MessageReply.vue?2b4e","webpack:///../src/lib/Message/MessageReply/MessageReply.vue?b2f2","webpack:///../src/lib/Message/MessageFiles/MessageFiles.vue?d60e","webpack:///../src/components/ProgressBar/ProgressBar.vue?1e60","webpack:///../src/components/ProgressBar/ProgressBar.vue","webpack:///../src/components/ProgressBar/ProgressBar.vue?8927","webpack:///../src/components/ProgressBar/ProgressBar.vue?f7ce","webpack:///../src/lib/Message/MessageFiles/MessageFile/MessageFile.vue?c685","webpack:///../src/lib/Message/MessageFiles/MessageFile/MessageFile.vue","webpack:///../src/lib/Message/MessageFiles/MessageFile/MessageFile.vue?8064","webpack:///../src/lib/Message/MessageFiles/MessageFile/MessageFile.vue?e6a4","webpack:///../src/lib/Message/MessageFiles/MessageFiles.vue","webpack:///../src/lib/Message/MessageFiles/MessageFiles.vue?e9a1","webpack:///../src/lib/Message/MessageFiles/MessageFiles.vue?833e","webpack:///../src/lib/Message/MessageActions/MessageActions.vue?ea72","webpack:///../src/lib/Message/MessageActions/MessageActions.vue","webpack:///../src/lib/Message/MessageActions/MessageActions.vue?ad49","webpack:///../src/lib/Message/MessageActions/MessageActions.vue?50c0","webpack:///../src/lib/Message/MessageReactions/MessageReactions.vue?b5c6","webpack:///../src/lib/Message/MessageReactions/MessageReactions.vue","webpack:///../src/lib/Message/MessageReactions/MessageReactions.vue?54f7","webpack:///../src/lib/Message/MessageReactions/MessageReactions.vue?81e7","webpack:///../src/lib/Message/Message.vue","webpack:///../src/lib/Message/Message.vue?1686","webpack:///../src/lib/Message/Message.vue?aa5f","webpack:///../src/utils/recorder.js","webpack:///../src/lib/Room/Room.vue","webpack:///../src/lib/Room/Room.vue?fec6","webpack:///../src/lib/Room/Room.vue?a7fa","webpack:///../src/lib/MediaPreview/MediaPreview.vue?8073","webpack:///../src/lib/MediaPreview/MediaPreview.vue","webpack:///../src/lib/MediaPreview/MediaPreview.vue?8f7c","webpack:///../src/lib/MediaPreview/MediaPreview.vue?c7d5","webpack:///../src/locales/index.js","webpack:///../src/themes/index.js","webpack:///../src/lib/ChatWindow.vue","webpack:///../src/lib/ChatWindow.vue?5b21","webpack:///../src/lib/ChatWindow.vue?f3f4","webpack:///src/ChatContainer.vue","webpack:///./src/ChatContainer.vue?8289","webpack:///./src/ChatContainer.vue","webpack:///src/App.vue","webpack:///./src/App.vue?4c4f","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?6656","webpack:///../src/utils/mobile-detection.js","webpack:///../src/utils/data-validation.js","webpack:///../src/lib/ChatWindow.vue?167a","webpack:///./src/ChatContainer.vue?4463","webpack:///./src/assets/logo.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","IMAGE_TYPES","VIDEO_TYPES","AUDIO_TYPES","checkMediaType","types","file","type","some","toLowerCase","includes","isImageFile","isVideoFile","isImageVideoFile","isAudioFile","_vm","this","_h","$createElement","_c","_self","staticClass","class","isDevice","theme","_v","_e","directives","rawName","expression","on","$event","$$selectedVal","Array","filter","target","options","selected","map","val","_value","currentUserId","multiple","_l","user","_id","domProps","_s","username","_m","attrs","showDemoOptions","staticRenderFns","config","JSON","parse","process","initializeApp","firestoreDb","getFirestore","realtimeDb","getDatabase","storage","getStorage","USERS_PATH","ROOMS_PATH","MESSAGES_PATH","MESSAGE_PATH","roomId","TIMESTAMP_FIELD","LAST_UPDATED_FIELD","TYPING_USERS_FIELD","MESSAGE_REACTIONS_FIELD","ROOM_USERS_FIELD","firestoreListener","onSnapshot","deleteDbField","deleteField","getDocuments","query","getDocs","getDocument","ref","getDoc","addDocument","addDoc","setDocument","path","docId","setDoc","doc","updateDocument","updateDoc","deleteDocument","deleteDoc","usersRef","collection","userRef","userId","getAllUsers","getUser","addUser","addIdentifiedUser","updateUser","deleteUser","roomsRef","roomRef","roomsQuery","roomsPerPage","lastRoom","where","orderBy","limit","startAfter","getAllRooms","getRooms","addRoom","updateRoom","deleteRoom","getUserRooms","addRoomUser","arrayUnion","removeRoomUser","arrayRemove","updateRoomTypingUsers","action","arrayUpdate","messagesRef","messageRef","messageId","getMessages","messagesPerPage","lastLoadedMessage","getMessage","addMessage","updateMessage","deleteMessage","paginatedMessagesQuery","previousLastLoadedMessage","startAt","endAt","lastMessageQuery","updateMessageReactions","reactionUnicode","FILES_PATH","fileRef","fileName","deleteFile","deleteObject","extension","getFileDownloadUrl","getDownloadURL","uploadFileTask","uploadFileRef","uploadBytesResumable","blob","contentType","preventDefault","createRoom","arguments","composing","addRoomUsername","disableForm","addNewRoom","invitedUsername","inviteRoomId","deleteRoomUser","removeUserId","removeRoomId","screenHeight","styles","loadedRooms","loadingRooms","messages","messagesLoaded","roomsLoaded","roomActions","menuActions","roomMessage","templatesText","fetchMoreRooms","fetchMessages","sendMessage","editMessage","openFile","openUserTag","menuActionHandler","sendMessageReaction","typingMessage","$emit","opened","firebaseListener","onValue","userStatusRef","updateUserOnlineStatus","isOfflineData","state","lastChanged","serverTimestamp","isOnlineData","connectedRef","snap","onDisconnect","set","then","zeroPad","num","pad","String","padStart","isSameDay","d1","d2","getFullYear","getMonth","getDate","parseTimestamp","timestamp","format","date","seconds","Date","getHours","getMinutes","month","year","day","Intl","DateTimeFormat","formatTimestamp","timestampFormat","style","height","cssVars","singleRoom","orderedRooms","room","showSearch","showAddRoom","showRoomsList","textFormatting","linkOptions","isMobile","scrollDistance","fetchRoom","loadingMoreRooms","roomActionHandler","scopedSlots","_u","fn","_t","rooms","loadFirstRoom","messageActions","showSendIcon","showFiles","showAudio","audioBitRate","audioSampleRate","showEmojis","showReactionEmojis","showNewMessagesDivider","showFooter","roomInfoEnabled","textareaActionEnabled","userTagsEnabled","emojisSuggestionEnabled","acceptedFiles","toggleRoomsList","roomInfo","openFailedMessage","messageActionHandler","textareaActionHandler","previewFile","showMediaPreview","textMessages","searchRoom","idx","ROOMS_EMPTY","fRoom","selectedRoomId","openRoom","showLoader","infinite","show","component","showSearchBar","SEARCH","size","svgId","svgItem","path2","userStatus","roomName","lastMessage","new","typingUsers","distributed","seen","message","deleted","isAudio","formattedDuration","getLastMessage","users","unreadCount","stopPropagation","roomMenuOpened","title","singleLine","disabled","formattedContent","url","tag","bold","italic","strike","underline","inline","multiline","reply","href","rel","openTag","image","linkify","require","text","doLinkify","typeMarkdown","multilineCode","inlineCode","pseudoMarkdown","end","allowed_chars","json","compileToJSON","html","compileToHTML","concat","linkifyResult","str","minIndexOf","minIndexOfKey","links","find","minIndexFromLink","indexOf","keys","forEach","startingValue","io","strLeft","substr","strLink","strRight","char","replace","match","RegExp","start","content","item","parseContent","iterateContent","it","removeDuplicates","items","Set","array","arr","spaces","status","IS_TYPING","join","prop","startsWith","v","formatString","string","normalize","lamejs","touchStart","ROOM_EMPTY","onContainerScroll","loadingMessages","MESSAGES_EMPTY","CONVERSATION_STARTED","indexId","editedMessage","$refs","roomFooter","newMessages","hideOptions","onMessageAdded","scrollToBottom","scrollMessagesCount","shadowFooter","filteredEmojis","selectEmojiItem","activeUpOrDownEmojis","selectEmoji","filteredUsersTag","selectUsersTagItem","activeUpOrDownUsersTag","selectUserTag","filteredTemplatesText","selectTemplatesTextItem","activeUpOrDownTemplatesText","selectTemplateText","messageReply","resetMessage","files","removeFile","stopRecorder","recordedTime","toggleRecorder","TYPE_MESSAGE","onChangeInput","_k","keyCode","escapeTextarea","ctrlKey","shiftKey","altKey","metaKey","selectItem","updateActiveUpOrDown","onPasteImage","emojiOpened","addEmoji","launchFilePicker","staticStyle","onFileChange","isMessageEmpty","isFileLoading","emojiReaction","openEmoji","emojiPickerHeight","top","positionTop","emojiPickerTop","right","emojiPickerRight","display","menuOpened","bottom","$parent","loading","index","localUrl","firstFile","playback","progress","onUpdateProgress","playerUniqId","audioSource","onMouseDown","width","percentage","isMouseDown","left","activeItem","emoji","template","newMessage","NEW_MESSAGES","roomUsers","senderId","avatar","messageOffset","isMessageHover","onHoverMessage","onLeaveMessage","replyMessage","MESSAGE_DELETED","progressTime","hoverAudioProgress","edited","roomFooterRef","messageHover","hoverMessageId","optionsOpened","failure","replyUsername","radius","strokeDashoffset","strokeLinecap","circumference","stroke","normalizedRadius","imageHover","imageResponsive","isImageLoading","preview","filteredMessageActions","isMessageActions","isMessageReactions","openOptions","proxy","menuOptionsTop","reaction","float","unicode","_","missing","Mp3Encoder","Error","bitRate","sampleRate","dataBuffer","encoder","arrayBuffer","maxSamples","samples","_convertBuffer","remaining","subarray","buffer","encodeBuffer","Int8Array","flush","Blob","id","now","URL","createObjectURL","input","output","Math","max","min","Float32Array","out","Int16Array","_floatTo16BitPCM","beforeRecording","pauseRecording","afterRecording","micFailed","encoderOptions","bufferSize","records","isPause","isRecording","duration","volume","_duration","constraints","video","audio","channelCount","echoCancellation","navigator","mediaDevices","getUserMedia","_micCaptured","_micError","lameEncoder","stream","getTracks","track","stop","disconnect","processor","context","close","record","finish","AudioContext","webkitAudioContext","createMediaStreamSource","createScriptProcessor","onaudioprocess","ev","sample","inputBuffer","getChannelData","sum","encode","parseFloat","currentTime","toFixed","sqrt","connect","destination","error","closeModal","IS_ONLINE","LAST_SEEN","defaultThemeStyles","light","general","color","backgroundInput","colorPlaceholder","colorCaret","colorSpinner","borderStyle","backgroundScrollIcon","container","border","borderRadius","boxShadow","header","background","colorRoomName","colorRoomInfo","footer","borderStyleInput","borderInputSelected","backgroundReply","backgroundTagActive","backgroundTag","sidemenu","backgroundHover","backgroundActive","colorActive","borderColorSearch","dropdown","backgroundMe","colorStarted","backgroundDeleted","colorDeleted","colorUsername","colorTimestamp","backgroundDate","colorDate","backgroundSystem","colorSystem","backgroundMedia","colorReplyUsername","colorReply","colorTag","backgroundImage","colorNewMessages","backgroundScrollCounter","colorScrollCounter","backgroundReaction","borderStyleReaction","backgroundReactionHover","borderStyleReactionHover","colorReactionCounter","backgroundReactionMe","borderStyleReactionMe","backgroundReactionHoverMe","borderStyleReactionHoverMe","colorReactionCounterMe","backgroundAudioRecord","backgroundAudioLine","backgroundAudioProgress","backgroundAudioProgressSelector","colorFileExtension","markdown","colorMulti","colorMessage","colorStateOnline","colorStateOffline","backgroundCounterBadge","colorCounterBadge","icons","search","add","toggle","menu","closeImage","paperclip","closeOutline","closePreview","send","sendDisabled","document","pencil","checkmark","checkmarkSeen","eye","dropdownMessage","dropdownMessageBackground","dropdownRoom","dropdownScroll","microphone","audioPlay","audioPause","audioCancel","audioConfirm","dark","cssThemeVars","Vue","productionTip","render","h","App","$mount","detectMobile","userAgent","getUserAgent","userAgentPart","test","vendor","opera","roomsValidation","obj","roomsValidate","validate","props","every","validType","isArray","checkObjectValid","partcipantsValidation","participantsValidate","messagesValidation","messagesValidate","undefined"],"mappings":"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,6BAGA,OACA,iDACA,+BACA,yCACA,sCACA,uCACA,sCAGA,8BAEA,KAtBA,WAuBA,OACA,sBAIA,UACA,eADA,WACA,WACA,mBACA,cAEA,oCACA,kCACA,8BAEA,6BACA,SAGA,4BACA,0DAGA,sCACA,0DACA,8BAIA,sCAHA,GAKA,WAzBA,WAyBA,WACA,gDAEA,0EACA,kCAEA,OAEA,YAjCA,WAkCA,2DAEA,0BApCA,WAqCA,OACA,kBACA,wBACA,+BACA,sDACA,6BACA,mCACA,6BAGA,kBA/CA,WAgDA,qCAEA,eACA,gDAGA,6BACA,uCAEA,QAzDA,WA0DA,qCACA,qCAKA,SACA,kBADA,SACA,GACA,qBACA,sEAEA,cALA,WAMA,4BC/N4Y,MCOxY,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBA,I,UAAA,SAACN,EAAOQ,EAAMhV,GAA4B,IAAvBiV,EAAuB,wDACxD,OAAKjV,GAAe,KAARA,EAELwU,EAAM7U,QAAO,SAAAuV,GACnB,OAAID,EAAmBE,GAAaD,EAAEF,IAAOC,WAAWE,GAAanV,IAC9DmV,GAAaD,EAAEF,IAAO7W,SAASgX,GAAanV,OAJrBwU,IAQhC,SAASW,GAAaC,GACrB,OAAOA,EACLlX,cACAmX,UAAU,OACVvB,QAAQ,mBAAoB,ICmE/B,IC9EIwB,GD8EJ,IACA,iBACA,YACA,UACA,eACA,gBAGA,OACA,iDACA,uCACA,yCACA,sCACA,uCACA,yCACA,sCACA,oCACA,+BACA,wCACA,uCACA,+BACA,qCACA,0CAGA,OACA,WACA,sBACA,qBACA,aACA,oBAGA,KAjCA,WAkCA,OACA,6BACA,cACA,cACA,oBACA,oBAIA,OACA,OACA,QACA,QAFA,SAEA,KACA,sBACA,yCACA,4BAIA,aAVA,SAUA,cACA,GACA,+DAGA,iBAfA,SAeA,GACA,oCAEA,aACA,aACA,QAFA,SAEA,GACA,IACA,yBACA,oBACA,uBAKA,MACA,aACA,QAFA,SAEA,GACA,qDAKA,SACA,yBADA,WACA,WACA,gBACA,mBACA,4BAGA,uDAEA,MACA,OACA,2CACA,+CACA,a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nB,EAAOrnB,GAG3B,EAAKulB,SACJmC,WAAW,EAAKjC,WAChBiC,WAAW,EAAKf,QAAQgB,YAAYC,QAAQ,IAC7C,EAAKpC,OAASjB,KAAKsD,KAAKL,EAAMH,EAAOnnB,QAAQ0nB,QAAQ,IAGtDtjB,KAAK+f,MAAMyD,QAAQxjB,KAAKoiB,WACxBpiB,KAAKoiB,UAAUoB,QAAQxjB,KAAKqiB,QAAQoB,e,uBAGrC,SAAUC,GACT1jB,KAAK2gB,WAAa3gB,KAAK2gB,UAAU+C,O,KCkNnC,gCAEA,iBACA,MACA,kBACA,WACA,YACA,gBACA,oDAIA,IACA,YACA,YACA,UACA,WACA,wBACA,cACA,aACA,oBACA,gBACA,cACA,qBACA,YAGA,YACA,6BAGA,OACA,iDACA,uCACA,sCACA,yCACA,oCACA,+BACA,0CACA,yCACA,kCACA,uCACA,0CACA,qCACA,wCACA,wCACA,qCACA,qCACA,uCACA,0CACA,sCACA,8CACA,kDACA,sCACA,wCACA,yCACA,sCACA,wCACA,2CACA,iDACA,2CACA,mDACA,yCACA,yCAGA,OACA,oBACA,YACA,sBACA,eACA,eACA,iBACA,yBACA,iBACA,wBACA,iBACA,YACA,gBACA,sBACA,2BAGA,KAvEA,WAwEA,OACA,WACA,iBACA,kBACA,mBACA,mBACA,cACA,cACA,uBACA,SACA,cACA,eACA,eACA,cACA,sBACA,eACA,oBACA,kBACA,oBACA,oBACA,yBACA,qBACA,wBACA,6BACA,0BACA,4BACA,iCACA,4BACA,yBACA,qBACA,6BACA,eACA,eAIA,UACA,KADA,WACA,WACA,uEAEA,eAJA,WAKA,OACA,mBACA,uBACA,uBACA,mBAGA,WAZA,WAaA,OACA,wCACA,sCAKA,OAHA,IACA,yBAEA,GAEA,oBAtBA,WAuBA,kDAEA,eAzBA,WA0BA,gDAEA,cA5BA,WA6BA,yDAEA,aA/BA,WAgCA,wEAEA,aAlCA,WAmCA,QACA,8BACA,gCACA,qCACA,qBACA,oBAKA,OACA,QADA,SACA,GACA,+BAEA,gBAJA,SAIA,cACA,EACA,yBAEA,gDACA,uBACA,gEAGA,M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AClC,yBAA0BH,EAAMI,KAChC,0BAA2BJ,EAAM9F,MACjC,gCAAiC8F,EAAMK,WACvC,yBAA0BL,EAAM9oB,KAChC,8BAA+B8oB,EAAMM,UACrC,kCAAmCN,EAAMO,aACzC,kCAAmCP,EAAMQ,aACzC,yBAA0BR,EAAMS,KAChC,kCAAmCT,EAAMU,aACzC,0BAA2BV,EAAMrM,MACjC,mCAAoCqM,EAAMhO,cAC1C,6BAA8BgO,EAAMW,SACpC,2BAA4BX,EAAMY,OAClC,8BAA+BZ,EAAMa,UACrC,mCAAoCb,EAAMc,cAC1C,wBAAyBd,EAAMe,IAC/B,qCAAsCf,EAAMgB,gBAC5C,kCAAmChB,EAAMiB,0BACzC,kCAAmCjB,EAAMkB,aACzC,oCAAqClB,EAAMmB,eAC3C,+BAAgCnB,EAAMoB,WACtC,+BAAgCpB,EAAMqB,UACtC,gCAAiCrB,EAAMsB,WACvC,iCAAkCtB,EAAMuB,YACxC,kCAAmCvB,EAAMwB,eCzU3C,GAGA,UAFA,GADA,GACA,gBACA,GAFA,GAEA,sBAGA,IACA,qBACA,YACA,aACA,QACA,iBAGA,OACA,qCACA,oCACA,kDACA,+CACA,qCACA,0CACA,wCACA,gDACA,gDACA,wCACA,uCACA,sCACA,2CACA,wCACA,mDACA,yCACA,sDACA,sDACA,gBACA,WACA,0BACA,oCACA,oDACA,2DAGA,qCACA,sCACA,uCACA,oCACA,oCACA,uCACA,4CACA,qCACA,6CACA,iDACA,qCACA,gBACA,YACA,0BACA,YACA,WACA,SACA,WACA,cACA,oBACA,kBAGA,aACA,YACA,kEAEA,0CACA,gDACA,0CACA,kDACA,qCACA,wCACA,wCACA,wCACA,+CAGA,OACA,oBACA,YACA,iBACA,eACA,eACA,iBACA,YACA,gBACA,sBACA,sBACA,yBACA,wBACA,iBACA,0BACA,mBACA,WACA,uBAGA,KA7FA,WA8FA,OACA,QACA,oBACA,iBACA,YACA,oBACA,iBAIA,UACA,EADA,WAEA,0CACA,IACA,oBAGA,QAPA,WAOA,WACA,iBACA,KASA,OAPA,gCACA,wCACA,MACA,oBAIA,OAEA,aApBA,WAoBA,WACA,8CACA,iBACA,aAEA,2BACA,eAGA,oBAKA,OACA,OACA,aACA,QACA,QAHA,SAGA,gBAQA,GANA,MACA,yDAEA,wBAIA,uBACA,oBACA,QACA,wBAEA,gBACA,4DACA,8BACA,+BACA,4CAEA,wBAMA,aA9BA,SA8BA,GACA,mBAGA,QACA,aACA,QAFA,SAEA,KACA,6CACA,0DACA,8BACA,QACA,gBAKA,KA9CA,SA8CA,GACA,kCAEA,MAEA,6BACA,WAIA,gBAxDA,SAwDA,GACA,uBAIA,QAvMA,WAuMA,WACA,wBACA,8CACA,sCAIA,SACA,iBADA,WAEA,2DAEA,gBAJA,WAKA,uCACA,8BACA,6DAEA,UATA,YASA,aACA,YACA,+BACA,wCAEA,eAdA,WAeA,gCAEA,SAjBA,WAkBA,mCAEA,QApBA,WAqBA,wBAEA,cAvBA,SAuBA,GACA,yDAEA,YA1BA,SA0BA,GACA,gGAEA,YA7BA,SA6BA,GACA,gGAEA,cAhCA,SAgCA,GACA,kEAEA,SAnCA,YAmCA,yBACA,gDACA,wBACA,0BAEA,4CAGA,YA3CA,YA2CA,aACA,sCAEA,kBA9CA,YA8CA,gBACA,kCACA,UACA,2BAGA,kBApDA,SAoDA,GACA,kCACA,SACA,2BAGA,kBA1DA,YA0DA,0BACA,kCACA,SACA,YAGA,qBAhEA,SAgEA,GACA,uEACA,GADA,IAEA,4BAGA,oBAtEA,SAsEA,GACA,sEACA,GADA,IAEA,4BAGA,cA5EA,SA4EA,GACA,6BACA,UACA,2BAGA,sBAlFA,SAkFA,GACA,sCACA,UACA,6BC5Y6W,MCQzW,I,UAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCoEf,IACA,YACA,eAGA,OACA,wCACA,gCACA,qCAGA,4BAEA,KAbA,WAcA,OACA,gBACA,SACA,UACA,gBACA,cACA,eACA,gBACA,YACA,2BACA,oBACA,kBACA,mBACA,YACA,kBACA,eACA,uBACA,+BACA,kBACA,aACA,sBACA,eACA,gBACA,mBACA,kBACA,mBACA,kBACA,gBACA,eACA,aACA,wCACA,wCACA,yCAEA,aACA,wCACA,wCACA,yCAEA,wCACA,eACA,CACA,WACA,yBAEA,CACA,aACA,2BAEA,CACA,eACA,qCAOA,UACA,YADA,WAEA,kDAEA,aAJA,WAKA,oEAIA,QAjFA,WAkFA,kBACA,wBAGA,SACA,WADA,WAEA,qBACA,gCACA,wBACA,cACA,oBACA,qBACA,mBACA,uDACA,uBACA,sBAGA,cAdA,WAeA,iBACA,uBACA,4BACA,oCACA,kDACA,mBAGA,WAvBA,WAwBA,kBACA,uBAGA,eA5BA,WA4BA,4KACA,yBADA,uBAEA,iBAFA,iCAMA,IACA,gBACA,eACA,cATA,SAYA,KAZA,cAYA,EAZA,OAeA,6CAEA,wCACA,qCAEA,KACA,uBACA,oCACA,oFACA,sBACA,gBAMA,KACA,uBACA,QACA,GACA,qCACA,aApCA,6BAuCA,YAvCA,uBAuCA,eAvCA,wCAuCA,WAvCA,iCAyCA,KACA,uBACA,oEAEA,oCACA,oFACA,+BAIA,KAEA,oCACA,WAEA,kBACA,8CAGA,WACA,6DAEA,MACA,0BACA,YACA,UAEA,0CACA,GADA,IAEA,SACA,SACA,4BACA,aACA,uBACA,aACA,gCACA,sBAMA,0BACA,wDAEA,iBACA,kBACA,sBAGA,6BACA,iBA5FA,+CAgGA,kBA5HA,SA4HA,cACA,IACA,cACA,YAEA,uBACA,sCACA,qBACA,0CAEA,yBACA,oCAEA,4CACA,6BAEA,8CACA,kBACA,uCAMA,6BAGA,kBAvJA,SAuJA,aACA,gBAEA,gBACA,6CACA,iBACA,oDAGA,MACA,2CACA,+DADA,aACA,WACA,GAEA,0CACA,GACA,CACA,UACA,aACA,kCACA,aAEA,WACA,eACA,kDACA,IACA,oCACA,yCAKA,cAvLA,YAuLA,kDACA,mCAEA,UACA,qBACA,uBAGA,wDAKA,2BAEA,GACA,sDACA,kBAEA,+BAEA,2CACA,uDAGA,yBAEA,uBACA,2BACA,yBAGA,sBACA,iDAEA,4CAEA,QACA,GACA,SACA,oBACA,8BAEA,YAEA,yBAGA,yBAvCA,wBA2CA,eA3OA,SA2OA,gBACA,uBACA,2BACA,4DAEA,MACA,mCAEA,gBACA,wCAGA,4BAIA,iBA3PA,SA2PA,KAEA,yCACA,kDAEA,kDACA,gCAKA,cAtQA,SAsQA,WACA,yBAEA,qCACA,UACA,CACA,4BACA,SACA,kBACA,wBACA,0BACA,iCACA,wDADA,eAEA,SAEA,iBAaA,OATA,wBACA,kDACA,uBACA,CACA,4CAKA,GAGA,YArSA,YAqSA,qOACA,GACA,0BACA,UACA,oBAGA,IACA,6BAGA,IACA,gBACA,UACA,kBACA,sBAGA,UACA,+BAnBA,SAuBA,QAvBA,mBAuBA,EAvBA,EAuBA,IAEA,EAzBA,iBA0BA,IA1BA,aA0BA,YA1BA,kCA2BA,+CA3BA,QA0BA,IA1BA,wBA+BA,4BA/BA,+CAkCA,YAvUA,YAuUA,mOACA,oBACA,YAGA,QADA,EACA,oBAEA,EAPA,SAUA,UAVA,WAYA,EAZA,iBAaA,IAbA,YAaA,YAbA,8BAcA,YAdA,QAcA,OAdA,kCAeA,+CAfA,QAaA,IAbA,8DAqBA,cA5VA,YA4VA,yMACA,YACA,mBAFA,OAKA,UAEA,GACA,uBACA,+BATA,8CAcA,WA1WA,YA0WA,6NACA,yBACA,0BACA,uBACA,UAGA,SACA,gBACA,EACA,EACA,GAGA,KACA,iBACA,YACA,iBACA,qCAEA,wCAEA,YACA,QATA,wCAWA,wHACA,GACA,gBAFA,cACA,EADA,gBAKA,GACA,EACA,GAPA,cAKA,EALA,OAUA,iBAEA,uBACA,qBACA,YAdA,UAkBA,kBAlBA,QAmBA,MAnBA,iDAzBA,8CAkDA,mBA5ZA,SA4ZA,OACA,0DAEA,aAEA,yDACA,+CAGA,eAraA,SAqaA,GACA,SAmBA,OAjBA,uBACA,OACA,YACA,YACA,YACA,8BACA,uBAGA,UACA,WACA,uBAGA,aAGA,GAGA,SA5bA,YA4bA,aACA,kCAGA,YAhcA,YAgcA,kLAGA,6BACA,uBACA,qBACA,iBAEA,gCACA,iCAEA,iBAKA,EAhBA,uBAiBA,WAjBA,0CAqBA,EACA,gBACA,OAvBA,UAqBA,EArBA,OA0BA,QA1BA,0CA2BA,eA3BA,yBA8BA,EACA,MACA,iBAhCA,WA8BA,EA9BA,OAmCA,QAnCA,0CAoCA,eApCA,yBAuCA,GACA,8BACA,uBAzCA,QAuCA,EAvCA,OA4CA,cACA,eA7CA,+CAgDA,SAhfA,SAgfA,2JACA,sKACA,eADA,iEAEA,+BAFA,OAGA,cACA,eAJA,kGADA,8CASA,kBAzfA,YAyfA,0BACA,eACA,iBACA,0BACA,iBACA,0BACA,iBACA,4BAIA,oBApgBA,YAogBA,qNACA,GACA,EACA,EACA,gBACA,UACA,kBANA,8CAUA,cA9gBA,YA8gBA,2BACA,MACA,4CAEA,YADA,2BAIA,uEAEA,YADA,2BAIA,0BAEA,EACA,EACA,mBACA,oBAKA,YApiBA,SAoiBA,iKACA,mBAEA,uBACA,0DACA,IACA,mCACA,4CAIA,yBAXA,8CAcA,wBAljBA,SAkjBA,cACA,uBACA,6BACA,SACA,WACA,YACA,eAEA,SACA,8BACA,+BAGA,yEAEA,yBACA,0CAGA,aACA,qCAGA,gCAKA,QA9kBA,WA+kBA,kBACA,oBAGA,WAnlBA,WAmlBA,uKACA,iBADA,SAGA,GACA,6BAJA,uBAGA,EAHA,EAGA,GAHA,SAMA,aANA,uBAQA,GACA,0BACA,uBAVA,OAaA,gBACA,qBACA,eAfA,+CAkBA,WArmBA,SAqmBA,GACA,kBACA,qBAGA,YA1mBA,WA0mBA,uKACA,iBADA,SAGA,GACA,6BAJA,uBAGA,EAHA,EAGA,GAHA,SAMA,aANA,uBAQA,oBARA,OAUA,oBACA,qBACA,eAZA,+CAeA,WAznBA,SAynBA,GACA,kBACA,oBACA,4EAGA,eA/nBA,WA+nBA,+JACA,iBADA,SAGA,EACA,eACA,gBALA,OAQA,oBACA,kBACA,eAVA,8CAaA,WA5oBA,SA4oBA,oKACA,oDAEA,oEACA,kEAJA,yCAMA,8DANA,cASA,wBACA,uBACA,WACA,gBACA,oCACA,oCAdA,SAoBA,KApBA,OAsBA,eAtBA,8CAyBA,WArqBA,WAsqBA,oBACA,qBACA,wBACA,uBACA,wBACA,uBACA,wBCz1BwU,MCQpU,I,UAAY,gBACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QC2Cf,IACA,YACA,kBAGA,KALA,WAMA,OACA,cACA,YACA,OACA,CACA,2BACA,gBAC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","file":"js/app.712d95e2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vue-advanced-chat/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/github.07883e93.svg\";","export const IMAGE_TYPES = ['png', 'jpg', 'jpeg', 'webp', 'svg', 'gif']\nexport const VIDEO_TYPES = ['mp4', 'video/ogg', 'webm', 'quicktime']\nexport const AUDIO_TYPES = ['mp3', 'audio/ogg', 'wav', 'mpeg']\n","import { IMAGE_TYPES, VIDEO_TYPES, AUDIO_TYPES } from './constants'\n\nfunction checkMediaType(types, file) {\n\tif (!file || !file.type) return\n\treturn types.some(t => file.type.toLowerCase().includes(t))\n}\n\nexport function isImageFile(file) {\n\treturn checkMediaType(IMAGE_TYPES, file)\n}\n\nexport function isVideoFile(file) {\n\treturn checkMediaType(VIDEO_TYPES, file)\n}\n\nexport function isImageVideoFile(file) {\n\treturn checkMediaType(IMAGE_TYPES, file) || checkMediaType(VIDEO_TYPES, file)\n}\n\nexport function isAudioFile(file) {\n\treturn checkMediaType(AUDIO_TYPES, file)\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"app-container\",class:{ 'app-mobile': _vm.isDevice, 'app-mobile-dark': _vm.theme === 'dark' }},[(_vm.showOptions)?_c('span',{staticClass:\"user-logged\",class:{ 'user-logged-dark': _vm.theme === 'dark' }},[_vm._v(\" Logged as \")]):_vm._e(),(_vm.showOptions)?_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentUserId),expression:\"currentUserId\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.currentUserId=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.users),function(user){return _c('option',{key:user._id,domProps:{\"value\":user._id}},[_vm._v(\" \"+_vm._s(user.username)+\" \")])}),0):_vm._e(),(_vm.showOptions)?_c('div',{staticClass:\"button-theme\"},[_c('button',{staticClass:\"button-light\",on:{\"click\":function($event){_vm.theme = 'light'}}},[_vm._v(\" Light \")]),_c('button',{staticClass:\"button-dark\",on:{\"click\":function($event){_vm.theme = 'dark'}}},[_vm._v(\" Dark \")]),_vm._m(0)]):_vm._e(),(_vm.showChat)?_c('chat-container',{attrs:{\"current-user-id\":_vm.currentUserId,\"theme\":_vm.theme,\"is-device\":_vm.isDevice},on:{\"show-demo-options\":function($event){_vm.showDemoOptions = $event}}}):_vm._e()],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"button-github\"},[_c('a',{attrs:{\"href\":\"https://github.com/antoine92190/vue-advanced-chat\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/github.svg\")}})])])}]\n\nexport { render, staticRenderFns }","import { initializeApp } from 'firebase/app'\nimport { getDatabase } from 'firebase/database'\nimport { getFirestore } from 'firebase/firestore'\nimport { getStorage } from 'firebase/storage'\n\nconst config =\n\tprocess.env.NODE_ENV === 'development'\n\t\t? JSON.parse(process.env.VUE_APP_FIREBASE_CONFIG)\n\t\t: JSON.parse(process.env.VUE_APP_FIREBASE_CONFIG_PUBLIC)\n\ninitializeApp(config)\n\nexport const firestoreDb = getFirestore()\nexport const realtimeDb = getDatabase()\nexport const storage = getStorage()\n","import { firestoreDb } from '@/database'\n\nimport {\n\taddDoc,\n\tarrayRemove,\n\tarrayUnion,\n\tcollection,\n\tdeleteDoc,\n\tdeleteField,\n\tdoc,\n\tendAt,\n\tgetDoc,\n\tgetDocs,\n\tlimit,\n\tonSnapshot,\n\torderBy,\n\tquery,\n\tsetDoc,\n\tstartAfter,\n\tstartAt,\n\tupdateDoc,\n\twhere\n} from 'firebase/firestore'\n\nconst USERS_PATH = 'users'\nconst ROOMS_PATH = 'chatRooms'\nconst MESSAGES_PATH = 'messages'\nconst MESSAGE_PATH = roomId => {\n\treturn `${ROOMS_PATH}/${roomId}/${MESSAGES_PATH}`\n}\n\nconst TIMESTAMP_FIELD = 'timestamp'\nconst LAST_UPDATED_FIELD = 'lastUpdated'\nconst TYPING_USERS_FIELD = 'typingUsers'\nconst MESSAGE_REACTIONS_FIELD = 'reactions'\nconst ROOM_USERS_FIELD = 'users'\n\nexport const firestoreListener = onSnapshot\nexport const deleteDbField = deleteField()\n\nconst getDocuments = query => {\n\treturn getDocs(query)\n}\n\nconst getDocument = ref => {\n\treturn getDoc(ref)\n}\n\nconst addDocument = (ref, data) => {\n\treturn addDoc(ref, data)\n}\n\nconst setDocument = (path, docId, data) => {\n\treturn setDoc(doc(firestoreDb, path, docId), data)\n}\n\nconst updateDocument = (ref, data) => {\n\treturn updateDoc(ref, data)\n}\n\nconst deleteDocument = (ref, docId) => {\n\treturn deleteDoc(doc(firestoreDb, ref, docId))\n}\n\n// USERS\nconst usersRef = collection(firestoreDb, USERS_PATH)\n\nconst userRef = userId => {\n\treturn doc(firestoreDb, USERS_PATH, userId)\n}\n\nexport const getAllUsers = () => {\n\treturn getDocuments(query(usersRef))\n}\n\nexport const getUser = userId => {\n\treturn getDocument(userRef(userId))\n}\n\nexport const addUser = data => {\n\treturn addDocument(usersRef, data)\n}\n\nexport const addIdentifiedUser = (userId, data) => {\n\treturn setDocument(USERS_PATH, userId, data)\n}\n\nexport const updateUser = (userId, data) => {\n\treturn updateDocument(userRef(userId), data)\n}\n\nexport const deleteUser = userId => {\n\treturn deleteDocument(USERS_PATH, userId)\n}\n\n// ROOMS\nconst roomsRef = collection(firestoreDb, ROOMS_PATH)\n\nconst roomRef = roomId => {\n\treturn doc(firestoreDb, ROOMS_PATH, roomId)\n}\n\nexport const roomsQuery = (currentUserId, roomsPerPage, lastRoom) => {\n\tif (lastRoom) {\n\t\treturn query(\n\t\t\troomsRef,\n\t\t\twhere(USERS_PATH, 'array-contains', currentUserId),\n\t\t\torderBy(LAST_UPDATED_FIELD, 'desc'),\n\t\t\tlimit(roomsPerPage),\n\t\t\tstartAfter(lastRoom)\n\t\t)\n\t} else {\n\t\treturn query(\n\t\t\troomsRef,\n\t\t\twhere(USERS_PATH, 'array-contains', currentUserId),\n\t\t\torderBy(LAST_UPDATED_FIELD, 'desc'),\n\t\t\tlimit(roomsPerPage)\n\t\t)\n\t}\n}\n\nexport const getAllRooms = () => {\n\treturn getDocuments(query(roomsRef))\n}\n\nexport const getRooms = query => {\n\treturn getDocuments(query)\n}\n\nexport const addRoom = data => {\n\treturn addDocument(roomsRef, data)\n}\n\nexport const updateRoom = (roomId, data) => {\n\treturn updateDocument(roomRef(roomId), data)\n}\n\nexport const deleteRoom = roomId => {\n\treturn deleteDocument(ROOMS_PATH, roomId)\n}\n\nexport const getUserRooms = (currentUserId, userId) => {\n\treturn getDocuments(\n\t\tquery(roomsRef, where(USERS_PATH, '==', [currentUserId, userId]))\n\t)\n}\n\nexport const addRoomUser = (roomId, userId) => {\n\treturn updateRoom(roomId, {\n\t\t[ROOM_USERS_FIELD]: arrayUnion(userId)\n\t})\n}\n\nexport const removeRoomUser = (roomId, userId) => {\n\treturn updateRoom(roomId, {\n\t\t[ROOM_USERS_FIELD]: arrayRemove(userId)\n\t})\n}\n\nexport const updateRoomTypingUsers = (roomId, currentUserId, action) => {\n\tconst arrayUpdate =\n\t\taction === 'add' ? arrayUnion(currentUserId) : arrayRemove(currentUserId)\n\n\treturn updateRoom(roomId, { [TYPING_USERS_FIELD]: arrayUpdate })\n}\n\n// MESSAGES\nconst messagesRef = roomId => {\n\treturn collection(firestoreDb, MESSAGE_PATH(roomId))\n}\n\nconst messageRef = (roomId, messageId) => {\n\treturn doc(firestoreDb, MESSAGE_PATH(roomId), messageId)\n}\n\nexport const getMessages = (roomId, messagesPerPage, lastLoadedMessage) => {\n\tif (lastLoadedMessage) {\n\t\treturn getDocuments(\n\t\t\tquery(\n\t\t\t\tmessagesRef(roomId),\n\t\t\t\torderBy(TIMESTAMP_FIELD, 'desc'),\n\t\t\t\tlimit(messagesPerPage),\n\t\t\t\tstartAfter(lastLoadedMessage)\n\t\t\t)\n\t\t)\n\t} else if (messagesPerPage) {\n\t\treturn getDocuments(\n\t\t\tquery(\n\t\t\t\tmessagesRef(roomId),\n\t\t\t\torderBy(TIMESTAMP_FIELD, 'desc'),\n\t\t\t\tlimit(messagesPerPage)\n\t\t\t)\n\t\t)\n\t} else {\n\t\treturn getDocuments(messagesRef(roomId))\n\t}\n}\n\nexport const getMessage = (roomId, messageId) => {\n\treturn getDocument(messageRef(roomId, messageId))\n}\n\nexport const addMessage = (roomId, data) => {\n\treturn addDocument(messagesRef(roomId), data)\n}\n\nexport const updateMessage = (roomId, messageId, data) => {\n\treturn updateDocument(messageRef(roomId, messageId), data)\n}\n\nexport const deleteMessage = (roomId, messageId) => {\n\treturn deleteDocument(MESSAGE_PATH(roomId), messageId)\n}\n\nexport const paginatedMessagesQuery = (\n\troomId,\n\tlastLoadedMessage,\n\tpreviousLastLoadedMessage\n) => {\n\tif (lastLoadedMessage && previousLastLoadedMessage) {\n\t\treturn query(\n\t\t\tmessagesRef(roomId),\n\t\t\torderBy(TIMESTAMP_FIELD),\n\t\t\tstartAt(lastLoadedMessage),\n\t\t\tendAt(previousLastLoadedMessage)\n\t\t)\n\t} else if (lastLoadedMessage) {\n\t\treturn query(\n\t\t\tmessagesRef(roomId),\n\t\t\torderBy(TIMESTAMP_FIELD),\n\t\t\tstartAt(lastLoadedMessage)\n\t\t)\n\t} else if (previousLastLoadedMessage) {\n\t\treturn query(\n\t\t\tmessagesRef(roomId),\n\t\t\torderBy(TIMESTAMP_FIELD),\n\t\t\tendAt(previousLastLoadedMessage)\n\t\t)\n\t} else {\n\t\treturn query(messagesRef(roomId), orderBy(TIMESTAMP_FIELD))\n\t}\n}\n\nexport const lastMessageQuery = roomId => {\n\treturn query(messagesRef(roomId), orderBy(TIMESTAMP_FIELD, 'desc'), limit(1))\n}\n\nexport const updateMessageReactions = (\n\troomId,\n\tmessageId,\n\tcurrentUserId,\n\treactionUnicode,\n\taction\n) => {\n\tconst arrayUpdate =\n\t\taction === 'add' ? arrayUnion(currentUserId) : arrayRemove(currentUserId)\n\n\treturn updateMessage(roomId, messageId, {\n\t\t[`${MESSAGE_REACTIONS_FIELD}.${reactionUnicode}`]: arrayUpdate\n\t})\n}\n","import { storage } from '@/database'\n\nimport {\n\tdeleteObject,\n\tgetDownloadURL,\n\tref,\n\tuploadBytesResumable\n} from 'firebase/storage'\n\nconst FILES_PATH = 'files'\n\nconst fileRef = (currentUserId, messageId, fileName) => {\n\treturn ref(storage, `${FILES_PATH}/${currentUserId}/${messageId}/${fileName}`)\n}\n\nexport const deleteFile = (currentUserId, messageId, file) => {\n\treturn deleteObject(\n\t\tfileRef(\n\t\t\tcurrentUserId,\n\t\t\tmessageId,\n\t\t\t`${file.name}.${file.extension || file.type}`\n\t\t)\n\t)\n}\n\nexport const getFileDownloadUrl = ref => {\n\treturn getDownloadURL(ref)\n}\n\nexport const uploadFileTask = (currentUserId, messageId, file, type) => {\n\tconst uploadFileRef = fileRef(\n\t\tcurrentUserId,\n\t\tmessageId,\n\t\t`${file.name}.${type}`\n\t)\n\n\treturn uploadBytesResumable(uploadFileRef, file.blob, {\n\t\tcontentType: type\n\t})\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"window-container\",class:{ 'window-mobile': _vm.isDevice }},[(_vm.addNewRoom)?_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom.apply(null, arguments)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addRoomUsername),expression:\"addRoomUsername\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Add username\"},domProps:{\"value\":(_vm.addRoomUsername)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.addRoomUsername=$event.target.value}}}),_c('button',{attrs:{\"type\":\"submit\",\"disabled\":_vm.disableForm || !_vm.addRoomUsername}},[_vm._v(\" Create Room \")]),_c('button',{staticClass:\"button-cancel\",on:{\"click\":function($event){_vm.addNewRoom = false}}},[_vm._v(\" Cancel \")])]):_vm._e(),(_vm.inviteRoomId)?_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.addRoomUser.apply(null, arguments)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.invitedUsername),expression:\"invitedUsername\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Add username\"},domProps:{\"value\":(_vm.invitedUsername)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.invitedUsername=$event.target.value}}}),_c('button',{attrs:{\"type\":\"submit\",\"disabled\":_vm.disableForm || !_vm.invitedUsername}},[_vm._v(\" Add User \")]),_c('button',{staticClass:\"button-cancel\",on:{\"click\":function($event){_vm.inviteRoomId = null}}},[_vm._v(\" Cancel \")])]):_vm._e(),(_vm.removeRoomId)?_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.deleteRoomUser.apply(null, arguments)}}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.removeUserId),expression:\"removeUserId\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.removeUserId=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"default\":\"\",\"value\":\"\"}},[_vm._v(\" Select User \")]),_vm._l((_vm.removeUsers),function(user){return _c('option',{key:user._id,domProps:{\"value\":user._id}},[_vm._v(\" \"+_vm._s(user.username)+\" \")])})],2),_c('button',{attrs:{\"type\":\"submit\",\"disabled\":_vm.disableForm || !_vm.removeUserId}},[_vm._v(\" Remove User \")]),_c('button',{staticClass:\"button-cancel\",on:{\"click\":function($event){_vm.removeRoomId = null}}},[_vm._v(\" Cancel \")])]):_vm._e(),_c('chat-window',{attrs:{\"height\":_vm.screenHeight,\"theme\":_vm.theme,\"styles\":_vm.styles,\"current-user-id\":_vm.currentUserId,\"room-id\":_vm.roomId,\"rooms\":_vm.loadedRooms,\"loading-rooms\":_vm.loadingRooms,\"messages\":_vm.messages,\"messages-loaded\":_vm.messagesLoaded,\"rooms-loaded\":_vm.roomsLoaded,\"room-actions\":_vm.roomActions,\"menu-actions\":_vm.menuActions,\"room-message\":_vm.roomMessage,\"templates-text\":_vm.templatesText},on:{\"fetch-more-rooms\":_vm.fetchMoreRooms,\"fetch-messages\":_vm.fetchMessages,\"send-message\":_vm.sendMessage,\"edit-message\":_vm.editMessage,\"delete-message\":_vm.deleteMessage,\"open-file\":_vm.openFile,\"open-user-tag\":_vm.openUserTag,\"add-room\":_vm.addRoom,\"room-action-handler\":_vm.menuActionHandler,\"menu-action-handler\":_vm.menuActionHandler,\"send-message-reaction\":_vm.sendMessageReaction,\"typing-message\":_vm.typingMessage,\"toggle-rooms-list\":function($event){return _vm.$emit('show-demo-options', $event.opened)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { realtimeDb } from '@/database'\n\nimport {\n\tonDisconnect,\n\tonValue,\n\tref,\n\tserverTimestamp,\n\tset\n} from 'firebase/database'\n\nexport const firebaseListener = onValue\n\nexport const userStatusRef = userId => {\n\treturn ref(realtimeDb, '/status/' + userId)\n}\n\nexport const updateUserOnlineStatus = currentUserId => {\n\tconst isOfflineData = {\n\t\tstate: 'offline',\n\t\tlastChanged: serverTimestamp()\n\t}\n\n\tconst isOnlineData = {\n\t\tstate: 'online',\n\t\tlastChanged: serverTimestamp()\n\t}\n\n\tconst connectedRef = ref(realtimeDb, '.info/connected')\n\n\tonValue(connectedRef, snap => {\n\t\tif (snap.val() === true) {\n\t\t\tonDisconnect(userStatusRef(currentUserId))\n\t\t\t\t.set(isOfflineData)\n\t\t\t\t.then(() => {\n\t\t\t\t\tset(userStatusRef(currentUserId), isOnlineData)\n\t\t\t\t})\n\t\t}\n\t})\n}\n","const zeroPad = (num, pad) => {\n\treturn String(num).padStart(pad, '0')\n}\n\nconst isSameDay = (d1, d2) => {\n\treturn (\n\t\td1.getFullYear() === d2.getFullYear() &&\n\t\td1.getMonth() === d2.getMonth() &&\n\t\td1.getDate() === d2.getDate()\n\t)\n}\n\nexport const parseTimestamp = (timestamp, format = '') => {\n\tif (!timestamp) return\n\n\tconst date = timestamp.seconds\n\t\t? new Date(timestamp.seconds * 1000)\n\t\t: timestamp\n\n\tif (format === 'HH:mm') {\n\t\treturn `${zeroPad(date.getHours(), 2)}:${zeroPad(date.getMinutes(), 2)}`\n\t} else if (format === 'DD MMMM YYYY') {\n\t\tconst options = { month: 'long', year: 'numeric', day: 'numeric' }\n\t\treturn `${new Intl.DateTimeFormat('en-GB', options).format(date)}`\n\t} else if (format === 'DD/MM/YY') {\n\t\tconst options = { month: 'numeric', year: 'numeric', day: 'numeric' }\n\t\treturn `${new Intl.DateTimeFormat('en-GB', options).format(date)}`\n\t} else if (format === 'DD MMMM, HH:mm') {\n\t\tconst options = { month: 'long', day: 'numeric' }\n\t\treturn `${new Intl.DateTimeFormat('en-GB', options).format(\n\t\t\tdate\n\t\t)}, ${zeroPad(date.getHours(), 2)}:${zeroPad(date.getMinutes(), 2)}`\n\t}\n\n\treturn date\n}\n\nexport const formatTimestamp = (date, timestamp) => {\n\tconst timestampFormat = isSameDay(date, new Date()) ? 'HH:mm' : 'DD/MM/YY'\n\tconst result = parseTimestamp(timestamp, timestampFormat)\n\treturn timestampFormat === 'HH:mm' ? `Today, ${result}` : result\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-card-window\",style:([{ height: _vm.height }, _vm.cssVars])},[_c('div',{staticClass:\"vac-chat-container\"},[(!_vm.singleRoom)?_c('rooms-list',{attrs:{\"current-user-id\":_vm.currentUserId,\"rooms\":_vm.orderedRooms,\"loading-rooms\":_vm.loadingRooms,\"rooms-loaded\":_vm.roomsLoaded,\"room\":_vm.room,\"room-actions\":_vm.roomActions,\"text-messages\":_vm.t,\"show-search\":_vm.showSearch,\"show-add-room\":_vm.showAddRoom,\"show-rooms-list\":_vm.showRoomsList,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions,\"is-mobile\":_vm.isMobile,\"scroll-distance\":_vm.scrollDistance},on:{\"fetch-room\":_vm.fetchRoom,\"fetch-more-rooms\":_vm.fetchMoreRooms,\"loading-more-rooms\":function($event){_vm.loadingMoreRooms = $event},\"add-room\":_vm.addRoom,\"room-action-handler\":_vm.roomActionHandler},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}):_vm._e(),_c('room',{attrs:{\"current-user-id\":_vm.currentUserId,\"rooms\":_vm.rooms,\"room-id\":_vm.room.roomId || '',\"load-first-room\":_vm.loadFirstRoom,\"messages\":_vm.messages,\"room-message\":_vm.roomMessage,\"messages-loaded\":_vm.messagesLoaded,\"menu-actions\":_vm.menuActions,\"message-actions\":_vm.messageActions,\"show-send-icon\":_vm.showSendIcon,\"show-files\":_vm.showFiles,\"show-audio\":_vm.showAudio,\"audio-bit-rate\":_vm.audioBitRate,\"audio-sample-rate\":_vm.audioSampleRate,\"show-emojis\":_vm.showEmojis,\"show-reaction-emojis\":_vm.showReactionEmojis,\"show-new-messages-divider\":_vm.showNewMessagesDivider,\"show-footer\":_vm.showFooter,\"text-messages\":_vm.t,\"single-room\":_vm.singleRoom,\"show-rooms-list\":_vm.showRoomsList,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions,\"is-mobile\":_vm.isMobile,\"loading-rooms\":_vm.loadingRooms,\"room-info-enabled\":_vm.roomInfoEnabled,\"textarea-action-enabled\":_vm.textareaActionEnabled,\"user-tags-enabled\":_vm.userTagsEnabled,\"emojis-suggestion-enabled\":_vm.emojisSuggestionEnabled,\"scroll-distance\":_vm.scrollDistance,\"accepted-files\":_vm.acceptedFiles,\"templates-text\":_vm.templatesText},on:{\"toggle-rooms-list\":_vm.toggleRoomsList,\"room-info\":_vm.roomInfo,\"fetch-messages\":_vm.fetchMessages,\"send-message\":_vm.sendMessage,\"edit-message\":_vm.editMessage,\"delete-message\":_vm.deleteMessage,\"open-file\":_vm.openFile,\"open-user-tag\":_vm.openUserTag,\"open-failed-message\":_vm.openFailedMessage,\"menu-action-handler\":_vm.menuActionHandler,\"message-action-handler\":_vm.messageActionHandler,\"send-message-reaction\":_vm.sendMessageReaction,\"typing-message\":_vm.typingMessage,\"textarea-action-handler\":_vm.textareaActionHandler},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1),_c('transition',{attrs:{\"name\":\"vac-fade-preview\",\"appear\":\"\"}},[(_vm.showMediaPreview)?_c('media-preview',{attrs:{\"file\":_vm.previewFile},on:{\"close-media-preview\":function($event){_vm.showMediaPreview = false}}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showRoomsList),expression:\"showRoomsList\"}],staticClass:\"vac-rooms-container vac-app-border-r\",class:{ 'vac-rooms-container-full': _vm.isMobile }},[_vm._t(\"rooms-header\"),_vm._t(\"rooms-list-search\",function(){return [_c('rooms-search',{attrs:{\"rooms\":_vm.rooms,\"loading-rooms\":_vm.loadingRooms,\"text-messages\":_vm.textMessages,\"show-search\":_vm.showSearch,\"show-add-room\":_vm.showAddRoom},on:{\"search-room\":_vm.searchRoom,\"add-room\":function($event){return _vm.$emit('add-room')}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})]}),_c('loader',{attrs:{\"show\":_vm.loadingRooms},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(idx,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}),(!_vm.loadingRooms && !_vm.rooms.length)?_c('div',{staticClass:\"vac-rooms-empty\"},[_vm._t(\"rooms-empty\",function(){return [_vm._v(\" \"+_vm._s(_vm.textMessages.ROOMS_EMPTY)+\" \")]})],2):_vm._e(),(!_vm.loadingRooms)?_c('div',{staticClass:\"vac-room-list\",attrs:{\"id\":\"rooms-list\"}},[_vm._l((_vm.filteredRooms),function(fRoom){return _c('div',{key:fRoom.roomId,staticClass:\"vac-room-item\",class:{ 'vac-room-selected': _vm.selectedRoomId === fRoom.roomId },attrs:{\"id\":fRoom.roomId},on:{\"click\":function($event){return _vm.openRoom(fRoom)}}},[_c('room-content',{attrs:{\"current-user-id\":_vm.currentUserId,\"room\":fRoom,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions,\"text-messages\":_vm.textMessages,\"room-actions\":_vm.roomActions},on:{\"room-action-handler\":function($event){return _vm.$emit('room-action-handler', $event)}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1)}),_c('transition',{attrs:{\"name\":\"vac-fade-message\"}},[(_vm.rooms.length && !_vm.loadingRooms)?_c('div',{attrs:{\"id\":\"infinite-loader-rooms\"}},[_c('loader',{attrs:{\"show\":_vm.showLoader,\"infinite\":true},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(idx,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1):_vm._e()])],2):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vac-fade-spinner\",\"appear\":\"\"}},[(_vm.show)?_c('div',{staticClass:\"vac-loader-wrapper\",class:{\n\t\t\t'vac-container-center': !_vm.infinite,\n\t\t\t'vac-container-top': _vm.infinite\n\t\t}},[_vm._t(\"spinner-icon\",function(){return [_c('div',{attrs:{\"id\":\"vac-circle\"}})]},null,{ show: _vm.show, infinite: _vm.infinite })],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<transition name=\"vac-fade-spinner\" appear>\n\t\t<div\n\t\t\tv-if=\"show\"\n\t\t\tclass=\"vac-loader-wrapper\"\n\t\t\t:class=\"{\n\t\t\t\t'vac-container-center': !infinite,\n\t\t\t\t'vac-container-top': infinite\n\t\t\t}\"\n\t\t>\n\t\t\t<slot name=\"spinner-icon\" v-bind=\"{ show, infinite }\">\n\t\t\t\t<div id=\"vac-circle\" />\n\t\t\t</slot>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nexport default {\n\tname: 'Loader',\n\n\tprops: {\n\t\tshow: { type: Boolean, default: false },\n\t\tinfinite: { type: Boolean, default: false }\n\t}\n}\n</script>\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loader.vue?vue&type=template&id=2c0ab9be&\"\nimport script from \"./Loader.vue?vue&type=script&lang=js&\"\nexport * from \"./Loader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\n\t\t'vac-box-search': _vm.showSearchBar,\n\t\t'vac-box-empty': !_vm.showSearchBar\n\t}},[(_vm.showSearch)?[(!_vm.loadingRooms && _vm.rooms.length)?_c('div',{staticClass:\"vac-icon-search\"},[_vm._t(\"search-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"search\"}})]})],2):_vm._e(),(!_vm.loadingRooms && _vm.rooms.length)?_c('input',{staticClass:\"vac-input\",attrs:{\"type\":\"search\",\"placeholder\":_vm.textMessages.SEARCH,\"autocomplete\":\"off\"},on:{\"input\":function($event){return _vm.$emit('search-room', $event)}}}):_vm._e()]:_vm._e(),(_vm.showAddRoom)?_c('div',{staticClass:\"vac-svg-button vac-add-icon\",on:{\"click\":function($event){return _vm.$emit('add-room')}}},[_vm._t(\"add-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"add\"}})]})],2):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"version\":\"1.1\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":(\"0 0 \" + _vm.size + \" \" + _vm.size)}},[_c('path',{attrs:{\"id\":_vm.svgId,\"d\":_vm.svgItem[_vm.name].path}}),(_vm.svgItem[_vm.name].path2)?_c('path',{attrs:{\"id\":_vm.svgId,\"d\":_vm.svgItem[_vm.name].path2}}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\tversion=\"1.1\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t\t:viewBox=\"`0 0 ${size} ${size}`\"\n\t>\n\t\t<path :id=\"svgId\" :d=\"svgItem[name].path\" />\n\t\t<path v-if=\"svgItem[name].path2\" :id=\"svgId\" :d=\"svgItem[name].path2\" />\n\t</svg>\n</template>\n\n<script>\nexport default {\n\tname: 'SvgIcon',\n\n\tprops: {\n\t\tname: { type: String, default: null },\n\t\tparam: { type: String, default: null }\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsvgItem: {\n\t\t\t\tsearch: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z'\n\t\t\t\t},\n\t\t\t\tadd: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\n\t\t\t\t},\n\t\t\t\ttoggle: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z'\n\t\t\t\t},\n\n\t\t\t\tmenu: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z'\n\t\t\t\t},\n\t\t\t\tclose: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z'\n\t\t\t\t},\n\t\t\t\tfile: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z'\n\t\t\t\t},\n\t\t\t\tpaperclip: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z'\n\t\t\t\t},\n\t\t\t\t'close-outline': {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'\n\t\t\t\t},\n\t\t\t\tsend: {\n\t\t\t\t\tpath: 'M2,21L23,12L2,3V10L17,12L2,14V21Z'\n\t\t\t\t},\n\t\t\t\temoji: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z'\n\t\t\t\t},\n\t\t\t\tdocument: {\n\t\t\t\t\tpath: 'M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z'\n\t\t\t\t},\n\t\t\t\tpencil: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'\n\t\t\t\t},\n\t\t\t\tcheckmark: {\n\t\t\t\t\tpath: 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z'\n\t\t\t\t},\n\t\t\t\t'double-checkmark': {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z'\n\t\t\t\t},\n\t\t\t\teye: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z'\n\t\t\t\t},\n\t\t\t\tdropdown: {\n\t\t\t\t\tpath: 'M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z'\n\t\t\t\t},\n\t\t\t\tdeleted: {\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z'\n\t\t\t\t},\n\t\t\t\tmicrophone: {\n\t\t\t\t\tsize: 'large',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z'\n\t\t\t\t},\n\t\t\t\t'audio-play': {\n\t\t\t\t\tsize: 'medium',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z'\n\t\t\t\t},\n\t\t\t\t'audio-pause': {\n\t\t\t\t\tsize: 'medium',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z',\n\t\t\t\t\tpath2:\n\t\t\t\t\t\t'M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tsvgId() {\n\t\t\tconst param = this.param ? '-' + this.param : ''\n\t\t\treturn `vac-icon-${this.name}${param}`\n\t\t},\n\t\tsize() {\n\t\t\tconst item = this.svgItem[this.name]\n\n\t\t\tif (item.size === 'large') return 512\n\t\t\telse if (item.size === 'medium') return 48\n\t\t\telse return 24\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./SvgIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./SvgIcon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SvgIcon.vue?vue&type=template&id=e01c0bf4&\"\nimport script from \"./SvgIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./SvgIcon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div\n\t\t:class=\"{\n\t\t\t'vac-box-search': showSearchBar,\n\t\t\t'vac-box-empty': !showSearchBar\n\t\t}\"\n\t>\n\t\t<template v-if=\"showSearch\">\n\t\t\t<div v-if=\"!loadingRooms && rooms.length\" class=\"vac-icon-search\">\n\t\t\t\t<slot name=\"search-icon\">\n\t\t\t\t\t<svg-icon name=\"search\" />\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\tv-if=\"!loadingRooms && rooms.length\"\n\t\t\t\ttype=\"search\"\n\t\t\t\t:placeholder=\"textMessages.SEARCH\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\tclass=\"vac-input\"\n\t\t\t\t@input=\"$emit('search-room', $event)\"\n\t\t\t/>\n\t\t</template>\n\t\t<div\n\t\t\tv-if=\"showAddRoom\"\n\t\t\tclass=\"vac-svg-button vac-add-icon\"\n\t\t\t@click=\"$emit('add-room')\"\n\t\t>\n\t\t\t<slot name=\"add-icon\">\n\t\t\t\t<svg-icon name=\"add\" />\n\t\t\t</slot>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\n\nexport default {\n\tname: 'RoomsSearch',\n\tcomponents: { SvgIcon },\n\n\tprops: {\n\t\ttextMessages: { type: Object, required: true },\n\t\tshowSearch: { type: Boolean, required: true },\n\t\tshowAddRoom: { type: Boolean, required: true },\n\t\trooms: { type: Array, required: true },\n\t\tloadingRooms: { type: Boolean, required: true }\n\t},\n\n\temits: ['search-room', 'add-room'],\n\n\tcomputed: {\n\t\tshowSearchBar() {\n\t\t\treturn this.showSearch || this.showAddRoom\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomsSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomsSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomsSearch.vue?vue&type=template&id=1fc42a9b&\"\nimport script from \"./RoomsSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomsSearch.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-room-container\"},[_vm._t(\"room-list-item\",function(){return [_vm._t(\"room-list-avatar\",function(){return [(_vm.room.avatar)?_c('div',{staticClass:\"vac-avatar\",style:({ 'background-image': (\"url('\" + (_vm.room.avatar) + \"')\") })}):_vm._e()]},null,{ room: _vm.room }),_c('div',{staticClass:\"vac-name-container vac-text-ellipsis\"},[_c('div',{staticClass:\"vac-title-container\"},[(_vm.userStatus)?_c('div',{staticClass:\"vac-state-circle\",class:{ 'vac-state-online': _vm.userStatus === 'online' }}):_vm._e(),_c('div',{staticClass:\"vac-room-name vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.room.roomName)+\" \")]),(_vm.room.lastMessage)?_c('div',{staticClass:\"vac-text-date\"},[_vm._v(\" \"+_vm._s(_vm.room.lastMessage.timestamp)+\" \")]):_vm._e()]),_c('div',{staticClass:\"vac-text-last\",class:{\n\t\t\t\t\t'vac-message-new':\n\t\t\t\t\t\t_vm.room.lastMessage && _vm.room.lastMessage.new && !_vm.typingUsers\n\t\t\t\t}},[(_vm.isMessageCheckmarkVisible)?_c('span',[_vm._t(\"checkmark-icon\",function(){return [_c('svg-icon',{staticClass:\"vac-icon-check\",attrs:{\"name\":_vm.room.lastMessage.distributed\n\t\t\t\t\t\t\t\t\t? 'double-checkmark'\n\t\t\t\t\t\t\t\t\t: 'checkmark',\"param\":_vm.room.lastMessage.seen ? 'seen' : ''}})]},null,{ message: _vm.room.lastMessage })],2):_vm._e(),(_vm.room.lastMessage && !_vm.room.lastMessage.deleted && _vm.isAudio)?_c('div',{staticClass:\"vac-text-ellipsis\"},[_vm._t(\"microphone-icon\",function(){return [_c('svg-icon',{staticClass:\"vac-icon-microphone\",attrs:{\"name\":\"microphone\"}})]}),_vm._v(\" \"+_vm._s(_vm.formattedDuration)+\" \")],2):(_vm.room.lastMessage)?_c('format-message',{attrs:{\"content\":_vm.getLastMessage,\"deleted\":!!_vm.room.lastMessage.deleted && !_vm.typingUsers,\"users\":_vm.room.users,\"linkify\":false,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions,\"single-line\":true},scopedSlots:_vm._u([{key:\"deleted-icon\",fn:function(data){return [_vm._t(\"deleted-icon\",null,null,data)]}}],null,true)}):_vm._e(),(!_vm.room.lastMessage && _vm.typingUsers)?_c('div',{staticClass:\"vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.typingUsers)+\" \")]):_vm._e(),_c('div',{staticClass:\"vac-room-options-container\"},[(_vm.room.unreadCount)?_c('div',{staticClass:\"vac-badge-counter vac-room-badge\"},[_vm._v(\" \"+_vm._s(_vm.room.unreadCount)+\" \")]):_vm._e(),_vm._t(\"room-list-options\",function(){return [(_vm.roomActions.length)?_c('div',{staticClass:\"vac-svg-button vac-list-room-options\",on:{\"click\":function($event){$event.stopPropagation();_vm.roomMenuOpened = _vm.room.roomId}}},[_vm._t(\"room-list-options-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"dropdown\",\"param\":\"room\"}})]})],2):_vm._e(),(_vm.roomActions.length)?_c('transition',{attrs:{\"name\":\"vac-slide-left\"}},[(_vm.roomMenuOpened === _vm.room.roomId)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeRoomMenu),expression:\"closeRoomMenu\"}],staticClass:\"vac-menu-options\"},[_c('div',{staticClass:\"vac-menu-list\"},_vm._l((_vm.roomActions),function(action){return _c('div',{key:action.name},[_c('div',{staticClass:\"vac-menu-item\",on:{\"click\":function($event){$event.stopPropagation();return _vm.roomActionHandler(action)}}},[_vm._v(\" \"+_vm._s(action.title)+\" \")])])}),0)]):_vm._e()]):_vm._e()]},null,{ room: _vm.room })],2)],1)])]},null,{ room: _vm.room })],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-format-message-wrapper\",class:{ 'vac-text-ellipsis': _vm.singleLine }},[(!_vm.textFormatting.disabled)?_c('div',{class:{ 'vac-text-ellipsis': _vm.singleLine }},_vm._l((_vm.linkifiedMessage),function(message,i){return _c('div',{key:i,staticClass:\"vac-format-container\"},[_c(message.url ? 'a' : 'span',{tag:\"component\",class:{\n\t\t\t\t\t'vac-text-ellipsis': _vm.singleLine,\n\t\t\t\t\t'vac-text-bold': message.bold,\n\t\t\t\t\t'vac-text-italic': _vm.deleted || message.italic,\n\t\t\t\t\t'vac-text-strike': message.strike,\n\t\t\t\t\t'vac-text-underline': message.underline,\n\t\t\t\t\t'vac-text-inline-code': !_vm.singleLine && message.inline,\n\t\t\t\t\t'vac-text-multiline-code': !_vm.singleLine && message.multiline,\n\t\t\t\t\t'vac-text-tag': !_vm.singleLine && !_vm.reply && message.tag\n\t\t\t\t},attrs:{\"href\":message.href,\"target\":message.href ? _vm.linkOptions.target : null,\"rel\":message.href ? _vm.linkOptions.rel : null},on:{\"click\":function($event){return _vm.openTag(message)}}},[_vm._t(\"deleted-icon\",function(){return [(_vm.deleted)?_c('svg-icon',{staticClass:\"vac-icon-deleted\",attrs:{\"name\":\"deleted\"}}):_vm._e()]},null,{ deleted: _vm.deleted }),(message.url && message.image)?[_c('div',{staticClass:\"vac-image-link-container\"},[_c('div',{staticClass:\"vac-image-link\",style:({\n\t\t\t\t\t\t\t\t'background-image': (\"url('\" + (message.value) + \"')\"),\n\t\t\t\t\t\t\t\theight: message.height\n\t\t\t\t\t\t\t})})]),_c('div',{staticClass:\"vac-image-link-message\"},[_c('span',[_vm._v(_vm._s(message.value))])])]:[_c('span',[_vm._v(_vm._s(message.value))])]],2)],1)}),0):_c('div',[_vm._v(\" \"+_vm._s(_vm.formattedContent)+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const linkify = require('linkifyjs')\n// require('linkifyjs/plugins/hashtag')(linkify)\n\nexport default (text, doLinkify, textFormatting) => {\n\tconst typeMarkdown = {\n\t\tbold: textFormatting.bold,\n\t\titalic: textFormatting.italic,\n\t\tstrike: textFormatting.strike,\n\t\tunderline: textFormatting.underline,\n\t\tmultilineCode: textFormatting.multilineCode,\n\t\tinlineCode: textFormatting.inlineCode\n\t}\n\n\tconst pseudoMarkdown = {\n\t\t[typeMarkdown.bold]: {\n\t\t\tend: '\\\\' + typeMarkdown.bold,\n\t\t\tallowed_chars: '.',\n\t\t\ttype: 'bold'\n\t\t},\n\t\t[typeMarkdown.italic]: {\n\t\t\tend: typeMarkdown.italic,\n\t\t\tallowed_chars: '.',\n\t\t\ttype: 'italic'\n\t\t},\n\t\t[typeMarkdown.strike]: {\n\t\t\tend: typeMarkdown.strike,\n\t\t\tallowed_chars: '.',\n\t\t\ttype: 'strike'\n\t\t},\n\t\t[typeMarkdown.underline]: {\n\t\t\tend: typeMarkdown.underline,\n\t\t\tallowed_chars: '.',\n\t\t\ttype: 'underline'\n\t\t},\n\t\t[typeMarkdown.multilineCode]: {\n\t\t\tend: typeMarkdown.multilineCode,\n\t\t\tallowed_chars: '(.|\\n)',\n\t\t\ttype: 'multiline-code'\n\t\t},\n\t\t[typeMarkdown.inlineCode]: {\n\t\t\tend: typeMarkdown.inlineCode,\n\t\t\tallowed_chars: '.',\n\t\t\ttype: 'inline-code'\n\t\t},\n\t\t'<usertag>': {\n\t\t\tallowed_chars: '.',\n\t\t\tend: '</usertag>',\n\t\t\ttype: 'tag'\n\t\t}\n\t}\n\n\tconst json = compileToJSON(text, pseudoMarkdown)\n\n\tconst html = compileToHTML(json, pseudoMarkdown)\n\n\tconst result = [].concat.apply([], html)\n\n\tif (doLinkify) linkifyResult(result)\n\n\treturn result\n}\n\nfunction compileToJSON(str, pseudoMarkdown) {\n\tlet result = []\n\tlet minIndexOf = -1\n\tlet minIndexOfKey = null\n\n\tlet links = linkify.find(str)\n\tlet minIndexFromLink = false\n\n\tif (links.length > 0) {\n\t\tminIndexOf = str.indexOf(links[0].value)\n\t\tminIndexFromLink = true\n\t}\n\n\tObject.keys(pseudoMarkdown).forEach(startingValue => {\n\t\tconst io = str.indexOf(startingValue)\n\t\tif (io >= 0 && (minIndexOf < 0 || io < minIndexOf)) {\n\t\t\tminIndexOf = io\n\t\t\tminIndexOfKey = startingValue\n\t\t\tminIndexFromLink = false\n\t\t}\n\t})\n\n\tif (minIndexFromLink && minIndexOfKey !== -1) {\n\t\tlet strLeft = str.substr(0, minIndexOf)\n\t\tlet strLink = str.substr(minIndexOf, links[0].value.length)\n\t\tlet strRight = str.substr(minIndexOf + links[0].value.length)\n\t\tresult.push(strLeft)\n\t\tresult.push(strLink)\n\t\tresult = result.concat(compileToJSON(strRight, pseudoMarkdown))\n\t\treturn result\n\t}\n\n\tif (minIndexOfKey) {\n\t\tlet strLeft = str.substr(0, minIndexOf)\n\t\tconst char = minIndexOfKey\n\t\tlet strRight = str.substr(minIndexOf + char.length)\n\n\t\tif (str.replace(/\\s/g, '').length === char.length * 2) {\n\t\t\treturn [str]\n\t\t}\n\n\t\tconst match = strRight.match(\n\t\t\tnew RegExp(\n\t\t\t\t'^(' +\n\t\t\t\t\t(pseudoMarkdown[char].allowed_chars || '.') +\n\t\t\t\t\t'*' +\n\t\t\t\t\t(pseudoMarkdown[char].end ? '?' : '') +\n\t\t\t\t\t')' +\n\t\t\t\t\t(pseudoMarkdown[char].end\n\t\t\t\t\t\t? '(' + pseudoMarkdown[char].end + ')'\n\t\t\t\t\t\t: ''),\n\t\t\t\t'm'\n\t\t\t)\n\t\t)\n\t\tif (!match || !match[1]) {\n\t\t\tstrLeft = strLeft + char\n\t\t\tresult.push(strLeft)\n\t\t} else {\n\t\t\tif (strLeft) {\n\t\t\t\tresult.push(strLeft)\n\t\t\t}\n\t\t\tconst object = {\n\t\t\t\tstart: char,\n\t\t\t\tcontent: compileToJSON(match[1], pseudoMarkdown),\n\t\t\t\tend: match[2],\n\t\t\t\ttype: pseudoMarkdown[char].type\n\t\t\t}\n\t\t\tresult.push(object)\n\t\t\tstrRight = strRight.substr(match[0].length)\n\t\t}\n\t\tresult = result.concat(compileToJSON(strRight, pseudoMarkdown))\n\t\treturn result\n\t} else {\n\t\tif (str) {\n\t\t\treturn [str]\n\t\t} else {\n\t\t\treturn []\n\t\t}\n\t}\n}\n\nfunction compileToHTML(json, pseudoMarkdown) {\n\tconst result = []\n\n\tjson.forEach(item => {\n\t\tif (typeof item === 'string') {\n\t\t\tresult.push({ types: [], value: item })\n\t\t} else {\n\t\t\tif (pseudoMarkdown[item.start]) {\n\t\t\t\tresult.push(parseContent(item))\n\t\t\t}\n\t\t}\n\t})\n\n\treturn result\n}\n\nfunction parseContent(item) {\n\tconst result = []\n\titerateContent(item, result, [])\n\treturn result\n}\n\nfunction iterateContent(item, result, types) {\n\titem.content.forEach(it => {\n\t\tif (typeof it === 'string') {\n\t\t\tresult.push({\n\t\t\t\ttypes: removeDuplicates(types.concat([item.type])),\n\t\t\t\tvalue: it\n\t\t\t})\n\t\t} else {\n\t\t\titerateContent(\n\t\t\t\tit,\n\t\t\t\tresult,\n\t\t\t\tremoveDuplicates([it.type].concat([item.type]).concat(types))\n\t\t\t)\n\t\t}\n\t})\n}\n\nfunction removeDuplicates(items) {\n\treturn [...new Set(items)]\n}\n\nfunction linkifyResult(array) {\n\tconst result = []\n\n\tarray.forEach(arr => {\n\t\tconst links = linkify.find(arr.value)\n\n\t\tif (links.length) {\n\t\t\tconst spaces = arr.value.replace(links[0].value, '')\n\t\t\tresult.push({ types: arr.types, value: spaces })\n\n\t\t\tarr.types = ['url'].concat(arr.types)\n\t\t\tarr.href = links[0].href\n\t\t\tarr.value = links[0].value\n\t\t}\n\n\t\tresult.push(arr)\n\t})\n\n\treturn result\n}\n","<template>\n\t<div\n\t\tclass=\"vac-format-message-wrapper\"\n\t\t:class=\"{ 'vac-text-ellipsis': singleLine }\"\n\t>\n\t\t<div\n\t\t\tv-if=\"!textFormatting.disabled\"\n\t\t\t:class=\"{ 'vac-text-ellipsis': singleLine }\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-for=\"(message, i) in linkifiedMessage\"\n\t\t\t\t:key=\"i\"\n\t\t\t\tclass=\"vac-format-container\"\n\t\t\t>\n\t\t\t\t<component\n\t\t\t\t\t:is=\"message.url ? 'a' : 'span'\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'vac-text-ellipsis': singleLine,\n\t\t\t\t\t\t'vac-text-bold': message.bold,\n\t\t\t\t\t\t'vac-text-italic': deleted || message.italic,\n\t\t\t\t\t\t'vac-text-strike': message.strike,\n\t\t\t\t\t\t'vac-text-underline': message.underline,\n\t\t\t\t\t\t'vac-text-inline-code': !singleLine && message.inline,\n\t\t\t\t\t\t'vac-text-multiline-code': !singleLine && message.multiline,\n\t\t\t\t\t\t'vac-text-tag': !singleLine && !reply && message.tag\n\t\t\t\t\t}\"\n\t\t\t\t\t:href=\"message.href\"\n\t\t\t\t\t:target=\"message.href ? linkOptions.target : null\"\n\t\t\t\t\t:rel=\"message.href ? linkOptions.rel : null\"\n\t\t\t\t\t@click=\"openTag(message)\"\n\t\t\t\t>\n\t\t\t\t\t<slot name=\"deleted-icon\" v-bind=\"{ deleted }\">\n\t\t\t\t\t\t<svg-icon v-if=\"deleted\" name=\"deleted\" class=\"vac-icon-deleted\" />\n\t\t\t\t\t</slot>\n\t\t\t\t\t<template v-if=\"message.url && message.image\">\n\t\t\t\t\t\t<div class=\"vac-image-link-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"vac-image-link\"\n\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t'background-image': `url('${message.value}')`,\n\t\t\t\t\t\t\t\t\theight: message.height\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"vac-image-link-message\">\n\t\t\t\t\t\t\t<span>{{ message.value }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<span>{{ message.value }}</span>\n\t\t\t\t\t</template>\n\t\t\t\t</component>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else>\n\t\t\t{{ formattedContent }}\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from '../SvgIcon/SvgIcon'\n\nimport formatString from '../../utils/format-string'\nimport { IMAGE_TYPES } from '../../utils/constants'\n\nexport default {\n\tname: 'FormatMessage',\n\tcomponents: { SvgIcon },\n\n\tprops: {\n\t\tcontent: { type: [String, Number], required: true },\n\t\tdeleted: { type: Boolean, default: false },\n\t\tusers: { type: Array, default: () => [] },\n\t\tlinkify: { type: Boolean, default: true },\n\t\tsingleLine: { type: Boolean, default: false },\n\t\treply: { type: Boolean, default: false },\n\t\ttextFormatting: { type: Object, required: true },\n\t\tlinkOptions: { type: Object, required: true }\n\t},\n\n\temits: ['open-user-tag'],\n\n\tcomputed: {\n\t\tlinkifiedMessage() {\n\t\t\tconst message = formatString(\n\t\t\t\tthis.formatTags(this.content),\n\t\t\t\tthis.linkify && !this.linkOptions.disabled,\n\t\t\t\tthis.textFormatting\n\t\t\t)\n\n\t\t\tmessage.forEach(m => {\n\t\t\t\tm.url = this.checkType(m, 'url')\n\t\t\t\tm.bold = this.checkType(m, 'bold')\n\t\t\t\tm.italic = this.checkType(m, 'italic')\n\t\t\t\tm.strike = this.checkType(m, 'strike')\n\t\t\t\tm.underline = this.checkType(m, 'underline')\n\t\t\t\tm.inline = this.checkType(m, 'inline-code')\n\t\t\t\tm.multiline = this.checkType(m, 'multiline-code')\n\t\t\t\tm.tag = this.checkType(m, 'tag')\n\t\t\t\tm.image = this.checkImageType(m)\n\t\t\t})\n\n\t\t\treturn message\n\t\t},\n\t\tformattedContent() {\n\t\t\treturn this.formatTags(this.content)\n\t\t}\n\t},\n\n\tmethods: {\n\t\tcheckType(message, type) {\n\t\t\treturn message.types.indexOf(type) !== -1\n\t\t},\n\t\tcheckImageType(message) {\n\t\t\tlet index = message.value.lastIndexOf('.')\n\t\t\tconst slashIndex = message.value.lastIndexOf('/')\n\t\t\tif (slashIndex > index) index = -1\n\n\t\t\tconst type = message.value.substring(index + 1, message.value.length)\n\n\t\t\tconst isMedia =\n\t\t\t\tindex > 0 && IMAGE_TYPES.some(t => type.toLowerCase().includes(t))\n\n\t\t\tif (isMedia) this.setImageSize(message)\n\n\t\t\treturn isMedia\n\t\t},\n\t\tsetImageSize(message) {\n\t\t\tconst image = new Image()\n\t\t\timage.src = message.value\n\n\t\t\timage.addEventListener('load', onLoad)\n\n\t\t\tfunction onLoad(img) {\n\t\t\t\tconst ratio = img.path[0].width / 150\n\t\t\t\tmessage.height = Math.round(img.path[0].height / ratio) + 'px'\n\t\t\t\timage.removeEventListener('load', onLoad)\n\t\t\t}\n\t\t},\n\t\tformatTags(content) {\n\t\t\tconst firstTag = '<usertag>'\n\t\t\tconst secondTag = '</usertag>'\n\n\t\t\tconst usertags = [...content.matchAll(new RegExp(firstTag, 'gi'))].map(\n\t\t\t\ta => a.index\n\t\t\t)\n\n\t\t\tconst initialContent = content\n\n\t\t\tusertags.forEach(index => {\n\t\t\t\tconst userId = initialContent.substring(\n\t\t\t\t\tindex + firstTag.length,\n\t\t\t\t\tinitialContent.indexOf(secondTag, index)\n\t\t\t\t)\n\n\t\t\t\tconst user = this.users.find(user => user._id === userId)\n\n\t\t\t\tcontent = content.replaceAll(userId, `@${user?.username || 'unknown'}`)\n\t\t\t})\n\n\t\t\treturn content\n\t\t},\n\t\topenTag(message) {\n\t\t\tif (!this.singleLine && this.checkType(message, 'tag')) {\n\t\t\t\tconst user = this.users.find(\n\t\t\t\t\tu => message.value.indexOf(u.username) !== -1\n\t\t\t\t)\n\t\t\t\tthis.$emit('open-user-tag', user)\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./FormatMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./FormatMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormatMessage.vue?vue&type=template&id=934b3d7e&\"\nimport script from \"./FormatMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./FormatMessage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default (room, currentUserId, textMessages) => {\n\tif (room.typingUsers && room.typingUsers.length) {\n\t\tconst typingUsers = room.users.filter(user => {\n\t\t\tif (user._id === currentUserId) return\n\t\t\tif (room.typingUsers.indexOf(user._id) === -1) return\n\t\t\tif (user.status && user.status.state === 'offline') return\n\t\t\treturn true\n\t\t})\n\n\t\tif (!typingUsers.length) return\n\n\t\tif (room.users.length === 2) {\n\t\t\treturn textMessages.IS_TYPING\n\t\t} else {\n\t\t\treturn (\n\t\t\t\ttypingUsers.map(user => user.username).join(', ') +\n\t\t\t\t' ' +\n\t\t\t\ttextMessages.IS_TYPING\n\t\t\t)\n\t\t}\n\t}\n}\n","<template>\n\t<div class=\"vac-room-container\">\n\t\t<slot name=\"room-list-item\" v-bind=\"{ room }\">\n\t\t\t<slot name=\"room-list-avatar\" v-bind=\"{ room }\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"room.avatar\"\n\t\t\t\t\tclass=\"vac-avatar\"\n\t\t\t\t\t:style=\"{ 'background-image': `url('${room.avatar}')` }\"\n\t\t\t\t/>\n\t\t\t</slot>\n\t\t\t<div class=\"vac-name-container vac-text-ellipsis\">\n\t\t\t\t<div class=\"vac-title-container\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"userStatus\"\n\t\t\t\t\t\tclass=\"vac-state-circle\"\n\t\t\t\t\t\t:class=\"{ 'vac-state-online': userStatus === 'online' }\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"vac-room-name vac-text-ellipsis\">\n\t\t\t\t\t\t{{ room.roomName }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"room.lastMessage\" class=\"vac-text-date\">\n\t\t\t\t\t\t{{ room.lastMessage.timestamp }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"vac-text-last\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'vac-message-new':\n\t\t\t\t\t\t\troom.lastMessage && room.lastMessage.new && !typingUsers\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<span v-if=\"isMessageCheckmarkVisible\">\n\t\t\t\t\t\t<slot name=\"checkmark-icon\" v-bind=\"{ message: room.lastMessage }\">\n\t\t\t\t\t\t\t<svg-icon\n\t\t\t\t\t\t\t\t:name=\"\n\t\t\t\t\t\t\t\t\troom.lastMessage.distributed\n\t\t\t\t\t\t\t\t\t\t? 'double-checkmark'\n\t\t\t\t\t\t\t\t\t\t: 'checkmark'\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t:param=\"room.lastMessage.seen ? 'seen' : ''\"\n\t\t\t\t\t\t\t\tclass=\"vac-icon-check\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"room.lastMessage && !room.lastMessage.deleted && isAudio\"\n\t\t\t\t\t\tclass=\"vac-text-ellipsis\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"microphone-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"microphone\" class=\"vac-icon-microphone\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t{{ formattedDuration }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<format-message\n\t\t\t\t\t\tv-else-if=\"room.lastMessage\"\n\t\t\t\t\t\t:content=\"getLastMessage\"\n\t\t\t\t\t\t:deleted=\"!!room.lastMessage.deleted && !typingUsers\"\n\t\t\t\t\t\t:users=\"room.users\"\n\t\t\t\t\t\t:linkify=\"false\"\n\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t\t\t:single-line=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #deleted-icon=\"data\">\n\t\t\t\t\t\t\t<slot name=\"deleted-icon\" v-bind=\"data\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</format-message>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"!room.lastMessage && typingUsers\"\n\t\t\t\t\t\tclass=\"vac-text-ellipsis\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ typingUsers }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"vac-room-options-container\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"room.unreadCount\"\n\t\t\t\t\t\t\tclass=\"vac-badge-counter vac-room-badge\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ room.unreadCount }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<slot name=\"room-list-options\" v-bind=\"{ room }\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"roomActions.length\"\n\t\t\t\t\t\t\t\tclass=\"vac-svg-button vac-list-room-options\"\n\t\t\t\t\t\t\t\t@click.stop=\"roomMenuOpened = room.roomId\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot name=\"room-list-options-icon\">\n\t\t\t\t\t\t\t\t\t<svg-icon name=\"dropdown\" param=\"room\" />\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<transition v-if=\"roomActions.length\" name=\"vac-slide-left\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"roomMenuOpened === room.roomId\"\n\t\t\t\t\t\t\t\t\tv-click-outside=\"closeRoomMenu\"\n\t\t\t\t\t\t\t\t\tclass=\"vac-menu-options\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"vac-menu-list\">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"action in roomActions\" :key=\"action.name\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"vac-menu-item\"\n\t\t\t\t\t\t\t\t\t\t\t\t@click.stop=\"roomActionHandler(action)\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{{ action.title }}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</transition>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</slot>\n\t</div>\n</template>\n\n<script>\nimport vClickOutside from 'v-click-outside'\n\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\nimport FormatMessage from '../../../components/FormatMessage/FormatMessage'\n\nimport typingText from '../../../utils/typing-text'\nconst { isAudioFile } = require('../../../utils/media-file')\n\nexport default {\n\tname: 'RoomsContent',\n\tcomponents: {\n\t\tSvgIcon,\n\t\tFormatMessage\n\t},\n\n\tdirectives: {\n\t\tclickOutside: vClickOutside.directive\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\troom: { type: Object, required: true },\n\t\ttextFormatting: { type: Object, required: true },\n\t\tlinkOptions: { type: Object, required: true },\n\t\ttextMessages: { type: Object, required: true },\n\t\troomActions: { type: Array, required: true }\n\t},\n\n\temits: ['room-action-handler'],\n\n\tdata() {\n\t\treturn {\n\t\t\troomMenuOpened: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tgetLastMessage() {\n\t\t\tconst isTyping = this.typingUsers\n\t\t\tif (isTyping) return isTyping\n\n\t\t\tconst content = this.room.lastMessage.deleted\n\t\t\t\t? this.textMessages.MESSAGE_DELETED\n\t\t\t\t: this.room.lastMessage.content\n\n\t\t\tif (this.room.users.length <= 2) {\n\t\t\t\treturn content\n\t\t\t}\n\n\t\t\tconst user = this.room.users.find(\n\t\t\t\tuser => user._id === this.room.lastMessage.senderId\n\t\t\t)\n\n\t\t\tif (this.room.lastMessage.username) {\n\t\t\t\treturn `${this.room.lastMessage.username} - ${content}`\n\t\t\t} else if (!user || user._id === this.currentUserId) {\n\t\t\t\treturn content\n\t\t\t}\n\n\t\t\treturn `${user.username} - ${content}`\n\t\t},\n\t\tuserStatus() {\n\t\t\tif (!this.room.users || this.room.users.length !== 2) return\n\n\t\t\tconst user = this.room.users.find(u => u._id !== this.currentUserId)\n\t\t\tif (user && user.status) return user.status.state\n\n\t\t\treturn null\n\t\t},\n\t\ttypingUsers() {\n\t\t\treturn typingText(this.room, this.currentUserId, this.textMessages)\n\t\t},\n\t\tisMessageCheckmarkVisible() {\n\t\t\treturn (\n\t\t\t\t!this.typingUsers &&\n\t\t\t\tthis.room.lastMessage &&\n\t\t\t\t!this.room.lastMessage.deleted &&\n\t\t\t\tthis.room.lastMessage.senderId === this.currentUserId &&\n\t\t\t\t(this.room.lastMessage.saved ||\n\t\t\t\t\tthis.room.lastMessage.distributed ||\n\t\t\t\t\tthis.room.lastMessage.seen)\n\t\t\t)\n\t\t},\n\t\tformattedDuration() {\n\t\t\tconst file = this.room.lastMessage.files[0]\n\n\t\t\tif (!file.duration) {\n\t\t\t\treturn `${file.name}.${file.extension}`\n\t\t\t}\n\n\t\t\tlet s = Math.floor(file.duration)\n\t\t\treturn (s - (s %= 60)) / 60 + (s > 9 ? ':' : ':0') + s\n\t\t},\n\t\tisAudio() {\n\t\t\treturn this.room.lastMessage.files\n\t\t\t\t? isAudioFile(this.room.lastMessage.files[0])\n\t\t\t\t: false\n\t\t}\n\t},\n\n\tmethods: {\n\t\troomActionHandler(action) {\n\t\t\tthis.closeRoomMenu()\n\t\t\tthis.$emit('room-action-handler', { action, roomId: this.room.roomId })\n\t\t},\n\t\tcloseRoomMenu() {\n\t\t\tthis.roomMenuOpened = null\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomContent.vue?vue&type=template&id=543ff5af&\"\nimport script from \"./RoomContent.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomContent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default (items, prop, val, startsWith = false) => {\n\tif (!val || val === '') return items\n\n\treturn items.filter(v => {\n\t\tif (startsWith) return formatString(v[prop]).startsWith(formatString(val))\n\t\treturn formatString(v[prop]).includes(formatString(val))\n\t})\n}\n\nfunction formatString(string) {\n\treturn string\n\t\t.toLowerCase()\n\t\t.normalize('NFD')\n\t\t.replace(/[\\u0300-\\u036f]/g, '')\n}\n","<template>\n\t<div\n\t\tv-show=\"showRoomsList\"\n\t\tclass=\"vac-rooms-container vac-app-border-r\"\n\t\t:class=\"{ 'vac-rooms-container-full': isMobile }\"\n\t>\n\t\t<slot name=\"rooms-header\" />\n\n\t\t<slot name=\"rooms-list-search\">\n\t\t\t<rooms-search\n\t\t\t\t:rooms=\"rooms\"\n\t\t\t\t:loading-rooms=\"loadingRooms\"\n\t\t\t\t:text-messages=\"textMessages\"\n\t\t\t\t:show-search=\"showSearch\"\n\t\t\t\t:show-add-room=\"showAddRoom\"\n\t\t\t\t@search-room=\"searchRoom\"\n\t\t\t\t@add-room=\"$emit('add-room')\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</rooms-search>\n\t\t</slot>\n\n\t\t<loader :show=\"loadingRooms\">\n\t\t\t<template v-for=\"(idx, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t</template>\n\t\t</loader>\n\n\t\t<div v-if=\"!loadingRooms && !rooms.length\" class=\"vac-rooms-empty\">\n\t\t\t<slot name=\"rooms-empty\">\n\t\t\t\t{{ textMessages.ROOMS_EMPTY }}\n\t\t\t</slot>\n\t\t</div>\n\n\t\t<div v-if=\"!loadingRooms\" id=\"rooms-list\" class=\"vac-room-list\">\n\t\t\t<div\n\t\t\t\tv-for=\"fRoom in filteredRooms\"\n\t\t\t\t:id=\"fRoom.roomId\"\n\t\t\t\t:key=\"fRoom.roomId\"\n\t\t\t\tclass=\"vac-room-item\"\n\t\t\t\t:class=\"{ 'vac-room-selected': selectedRoomId === fRoom.roomId }\"\n\t\t\t\t@click=\"openRoom(fRoom)\"\n\t\t\t>\n\t\t\t\t<room-content\n\t\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t\t:room=\"fRoom\"\n\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t\t:text-messages=\"textMessages\"\n\t\t\t\t\t:room-actions=\"roomActions\"\n\t\t\t\t\t@room-action-handler=\"$emit('room-action-handler', $event)\"\n\t\t\t\t>\n\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t</template>\n\t\t\t\t</room-content>\n\t\t\t</div>\n\t\t\t<transition name=\"vac-fade-message\">\n\t\t\t\t<div v-if=\"rooms.length && !loadingRooms\" id=\"infinite-loader-rooms\">\n\t\t\t\t\t<loader :show=\"showLoader\" :infinite=\"true\">\n\t\t\t\t\t\t<template v-for=\"(idx, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</loader>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Loader from '../../components/Loader/Loader'\n\nimport RoomsSearch from './RoomsSearch/RoomsSearch'\nimport RoomContent from './RoomContent/RoomContent'\n\nimport filteredItems from '../../utils/filter-items'\n\nexport default {\n\tname: 'RoomsList',\n\tcomponents: {\n\t\tLoader,\n\t\tRoomsSearch,\n\t\tRoomContent\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\ttextMessages: { type: Object, required: true },\n\t\tshowRoomsList: { type: Boolean, required: true },\n\t\tshowSearch: { type: Boolean, required: true },\n\t\tshowAddRoom: { type: Boolean, required: true },\n\t\ttextFormatting: { type: Object, required: true },\n\t\tlinkOptions: { type: Object, required: true },\n\t\tisMobile: { type: Boolean, required: true },\n\t\trooms: { type: Array, required: true },\n\t\tloadingRooms: { type: Boolean, required: true },\n\t\troomsLoaded: { type: Boolean, required: true },\n\t\troom: { type: Object, required: true },\n\t\troomActions: { type: Array, required: true },\n\t\tscrollDistance: { type: Number, required: true }\n\t},\n\n\temits: [\n\t\t'add-room',\n\t\t'room-action-handler',\n\t\t'loading-more-rooms',\n\t\t'fetch-room',\n\t\t'fetch-more-rooms'\n\t],\n\n\tdata() {\n\t\treturn {\n\t\t\tfilteredRooms: this.rooms || [],\n\t\t\tobserver: null,\n\t\t\tshowLoader: true,\n\t\t\tloadingMoreRooms: false,\n\t\t\tselectedRoomId: ''\n\t\t}\n\t},\n\n\twatch: {\n\t\trooms: {\n\t\t\tdeep: true,\n\t\t\thandler(newVal, oldVal) {\n\t\t\t\tthis.filteredRooms = newVal\n\t\t\t\tif (newVal.length !== oldVal.length || this.roomsLoaded) {\n\t\t\t\t\tthis.loadingMoreRooms = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tloadingRooms(val) {\n\t\t\tif (!val) {\n\t\t\t\tsetTimeout(() => this.initIntersectionObserver())\n\t\t\t}\n\t\t},\n\t\tloadingMoreRooms(val) {\n\t\t\tthis.$emit('loading-more-rooms', val)\n\t\t},\n\t\troomsLoaded: {\n\t\t\timmediate: true,\n\t\t\thandler(val) {\n\t\t\t\tif (val) {\n\t\t\t\t\tthis.loadingMoreRooms = false\n\t\t\t\t\tif (!this.loadingRooms) {\n\t\t\t\t\t\tthis.showLoader = false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\troom: {\n\t\t\timmediate: true,\n\t\t\thandler(val) {\n\t\t\t\tif (val && !this.isMobile) this.selectedRoomId = val.roomId\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\tinitIntersectionObserver() {\n\t\t\tif (this.observer) {\n\t\t\t\tthis.showLoader = true\n\t\t\t\tthis.observer.disconnect()\n\t\t\t}\n\n\t\t\tconst loader = document.getElementById('infinite-loader-rooms')\n\n\t\t\tif (loader) {\n\t\t\t\tconst options = {\n\t\t\t\t\troot: document.getElementById('rooms-list'),\n\t\t\t\t\trootMargin: `${this.scrollDistance}px`,\n\t\t\t\t\tthreshold: 0\n\t\t\t\t}\n\n\t\t\t\tthis.observer = new IntersectionObserver(entries => {\n\t\t\t\t\tif (entries[0].isIntersecting) {\n\t\t\t\t\t\tthis.loadMoreRooms()\n\t\t\t\t\t}\n\t\t\t\t}, options)\n\n\t\t\t\tthis.observer.observe(loader)\n\t\t\t}\n\t\t},\n\t\tsearchRoom(ev) {\n\t\t\tthis.filteredRooms = filteredItems(\n\t\t\t\tthis.rooms,\n\t\t\t\t'roomName',\n\t\t\t\tev.target.value\n\t\t\t)\n\t\t},\n\t\topenRoom(room) {\n\t\t\tif (room.roomId === this.room.roomId && !this.isMobile) return\n\t\t\tif (!this.isMobile) this.selectedRoomId = room.roomId\n\t\t\tthis.$emit('fetch-room', { room })\n\t\t},\n\t\tloadMoreRooms() {\n\t\t\tif (this.loadingMoreRooms) return\n\n\t\t\tif (this.roomsLoaded) {\n\t\t\t\tthis.loadingMoreRooms = false\n\t\t\t\tthis.showLoader = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.$emit('fetch-more-rooms')\n\t\t\tthis.loadingMoreRooms = true\n\t\t}\n\t}\n}\n</script>\n","// Credits to https://github.com/grishkovelli/vue-audio-recorder\n\nlet lamejs\ntry {\n\tlamejs = require('lamejs')\n} catch (_) {\n\tlamejs = { missing: true }\n}\n\nconst { Mp3Encoder } = lamejs\n\nexport default class {\n\tconstructor(config) {\n\t\tif (lamejs.missing) {\n\t\t\tthrow new Error(\n\t\t\t\t'You must add lamejs in your dependencies to use the audio recorder. Please run \"npm install lamejs --save\"'\n\t\t\t)\n\t\t}\n\n\t\tthis.bitRate = config.bitRate\n\t\tthis.sampleRate = config.sampleRate\n\t\tthis.dataBuffer = []\n\t\tthis.encoder = new Mp3Encoder(1, this.sampleRate, this.bitRate)\n\t}\n\n\tencode(arrayBuffer) {\n\t\tconst maxSamples = 1152\n\t\tconst samples = this._convertBuffer(arrayBuffer)\n\t\tlet remaining = samples.length\n\n\t\tfor (let i = 0; remaining >= 0; i += maxSamples) {\n\t\t\tconst left = samples.subarray(i, i + maxSamples)\n\t\t\tconst buffer = this.encoder.encodeBuffer(left)\n\t\t\tthis.dataBuffer.push(new Int8Array(buffer))\n\t\t\tremaining -= maxSamples\n\t\t}\n\t}\n\n\tfinish() {\n\t\tthis.dataBuffer.push(this.encoder.flush())\n\t\tconst blob = new Blob(this.dataBuffer, { type: 'audio/mp3' })\n\t\tthis.dataBuffer = []\n\n\t\treturn {\n\t\t\tid: Date.now(),\n\t\t\tblob: blob,\n\t\t\turl: URL.createObjectURL(blob)\n\t\t}\n\t}\n\n\t_floatTo16BitPCM(input, output) {\n\t\tfor (let i = 0; i < input.length; i++) {\n\t\t\tconst s = Math.max(-1, Math.min(1, input[i]))\n\t\t\toutput[i] = s < 0 ? s * 0x8000 : s * 0x7fff\n\t\t}\n\t}\n\n\t_convertBuffer(arrayBuffer) {\n\t\tconst data = new Float32Array(arrayBuffer)\n\t\tconst out = new Int16Array(arrayBuffer.length)\n\t\tthis._floatTo16BitPCM(data, out)\n\t\treturn out\n\t}\n}\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomsList.vue?vue&type=template&id=326b2efd&\"\nimport script from \"./RoomsList.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomsList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:((_vm.isMobile && !_vm.showRoomsList) || !_vm.isMobile || _vm.singleRoom),expression:\"(isMobile && !showRoomsList) || !isMobile || singleRoom\"}],staticClass:\"vac-col-messages\",on:{\"touchstart\":_vm.touchStart}},[(_vm.showNoRoom)?_vm._t(\"no-room-selected\",function(){return [_c('div',{staticClass:\"vac-container-center vac-room-empty\"},[_c('div',[_vm._v(_vm._s(_vm.textMessages.ROOM_EMPTY))])])]}):_c('room-header',{attrs:{\"current-user-id\":_vm.currentUserId,\"text-messages\":_vm.textMessages,\"single-room\":_vm.singleRoom,\"show-rooms-list\":_vm.showRoomsList,\"is-mobile\":_vm.isMobile,\"room-info-enabled\":_vm.roomInfoEnabled,\"menu-actions\":_vm.menuActions,\"room\":_vm.room},on:{\"toggle-rooms-list\":function($event){return _vm.$emit('toggle-rooms-list')},\"room-info\":function($event){return _vm.$emit('room-info')},\"menu-action-handler\":function($event){return _vm.$emit('menu-action-handler', $event)}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}),_c('div',{ref:\"scrollContainer\",staticClass:\"vac-container-scroll\",attrs:{\"id\":\"messages-list\"},on:{\"scroll\":_vm.onContainerScroll}},[_c('loader',{attrs:{\"show\":_vm.loadingMessages},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(idx,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}),_c('div',{staticClass:\"vac-messages-container\"},[_c('div',{class:{ 'vac-messages-hidden': _vm.loadingMessages }},[_c('transition',{attrs:{\"name\":\"vac-fade-message\"}},[_c('div',[(_vm.showNoMessages)?_c('div',{staticClass:\"vac-text-started\"},[_vm._t(\"messages-empty\",function(){return [_vm._v(\" \"+_vm._s(_vm.textMessages.MESSAGES_EMPTY)+\" \")]})],2):_vm._e(),(_vm.showMessagesStarted)?_c('div',{staticClass:\"vac-text-started\"},[_vm._v(\" \"+_vm._s(_vm.textMessages.CONVERSATION_STARTED)+\" \"+_vm._s(_vm.messages[0].date)+\" \")]):_vm._e()])]),(_vm.messages.length && !_vm.messagesLoaded)?_c('div',{attrs:{\"id\":\"infinite-loader-messages\"}},[_c('loader',{attrs:{\"show\":true,\"infinite\":true},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(idx,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1):_vm._e(),_c('transition-group',{key:_vm.roomId,attrs:{\"name\":\"vac-fade-message\",\"tag\":\"span\"}},_vm._l((_vm.messages),function(m,i){return _c('div',{key:m.indexId || m._id},[_c('message',{attrs:{\"current-user-id\":_vm.currentUserId,\"message\":m,\"index\":i,\"messages\":_vm.messages,\"edited-message\":_vm.editedMessage,\"message-actions\":_vm.messageActions,\"room-users\":_vm.room.users,\"text-messages\":_vm.textMessages,\"room-footer-ref\":_vm.$refs.roomFooter,\"new-messages\":_vm.newMessages,\"show-reaction-emojis\":_vm.showReactionEmojis,\"show-new-messages-divider\":_vm.showNewMessagesDivider,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions,\"hide-options\":_vm.hideOptions},on:{\"message-added\":_vm.onMessageAdded,\"message-action-handler\":_vm.messageActionHandler,\"open-file\":_vm.openFile,\"open-user-tag\":_vm.openUserTag,\"open-failed-message\":function($event){return _vm.$emit('open-failed-message', $event)},\"send-message-reaction\":_vm.sendMessageReaction,\"hide-options\":function($event){_vm.hideOptions = $event}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(idx,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1)}),0)],1)])],1),(!_vm.loadingMessages)?_c('div',[_c('transition',{attrs:{\"name\":\"vac-bounce\"}},[(_vm.scrollIcon)?_c('div',{staticClass:\"vac-icon-scroll\",on:{\"click\":_vm.scrollToBottom}},[_c('transition',{attrs:{\"name\":\"vac-bounce\"}},[(_vm.scrollMessagesCount)?_c('div',{staticClass:\"vac-badge-counter vac-messages-count\"},[_vm._v(\" \"+_vm._s(_vm.scrollMessagesCount)+\" \")]):_vm._e()]),_vm._t(\"scroll-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"dropdown\",\"param\":\"scroll\"}})]})],2):_vm._e()])],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(Object.keys(_vm.room).length && _vm.showFooter),expression:\"Object.keys(room).length && showFooter\"}],ref:\"roomFooter\",staticClass:\"vac-room-footer\",class:{\n\t\t\t'vac-app-box-shadow': _vm.shadowFooter\n\t\t}},[_c('room-emojis',{attrs:{\"filtered-emojis\":_vm.filteredEmojis,\"select-item\":_vm.selectEmojiItem,\"active-up-or-down\":_vm.activeUpOrDownEmojis},on:{\"select-emoji\":function($event){return _vm.selectEmoji($event)},\"activate-item\":function($event){_vm.activeUpOrDownEmojis = 0}}}),_c('room-users-tag',{attrs:{\"filtered-users-tag\":_vm.filteredUsersTag,\"select-item\":_vm.selectUsersTagItem,\"active-up-or-down\":_vm.activeUpOrDownUsersTag},on:{\"select-user-tag\":function($event){return _vm.selectUserTag($event)},\"activate-item\":function($event){_vm.activeUpOrDownUsersTag = 0}}}),_c('room-templates-text',{attrs:{\"filtered-templates-text\":_vm.filteredTemplatesText,\"select-item\":_vm.selectTemplatesTextItem,\"active-up-or-down\":_vm.activeUpOrDownTemplatesText},on:{\"select-template-text\":function($event){return _vm.selectTemplateText($event)},\"activate-item\":function($event){_vm.activeUpOrDownTemplatesText = 0}}}),_c('room-message-reply',{attrs:{\"room\":_vm.room,\"message-reply\":_vm.messageReply,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions},on:{\"reset-message\":_vm.resetMessage},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}),_c('room-files',{attrs:{\"files\":_vm.files},on:{\"remove-file\":_vm.removeFile,\"reset-message\":_vm.resetMessage},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}),_c('div',{staticClass:\"vac-box-footer\",class:{ 'vac-box-footer-border': !_vm.files.length }},[(_vm.showAudio && !_vm.files.length)?_c('div',{staticClass:\"vac-icon-textarea-left\"},[(_vm.isRecording)?[_c('div',{staticClass:\"vac-svg-button vac-icon-audio-stop\",on:{\"click\":_vm.stopRecorder}},[_vm._t(\"audio-stop-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"close-outline\"}})]})],2),_c('div',{staticClass:\"vac-dot-audio-record\"}),_c('div',{staticClass:\"vac-dot-audio-record-time\"},[_vm._v(\" \"+_vm._s(_vm.recordedTime)+\" \")]),_c('div',{staticClass:\"vac-svg-button vac-icon-audio-confirm\",on:{\"click\":function($event){return _vm.toggleRecorder(false)}}},[_vm._t(\"audio-stop-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"checkmark\"}})]})],2)]:_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":function($event){return _vm.toggleRecorder(true)}}},[_vm._t(\"microphone-icon\",function(){return [_c('svg-icon',{staticClass:\"vac-icon-microphone\",attrs:{\"name\":\"microphone\"}})]})],2)],2):_vm._e(),_c('textarea',{ref:\"roomTextarea\",staticClass:\"vac-textarea\",class:{\n\t\t\t\t\t'vac-textarea-outline': _vm.editedMessage._id\n\t\t\t\t},style:({\n\t\t\t\t\t'min-height': \"20px\",\n\t\t\t\t\t'padding-left': \"12px\"\n\t\t\t\t}),attrs:{\"placeholder\":_vm.textMessages.TYPE_MESSAGE},on:{\"input\":_vm.onChangeInput,\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.escapeTextarea.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();return _vm.selectItem.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"tab\",9,$event.key,\"Tab\")){ return null; }if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"tab\",9,$event.key,\"Tab\")){ return null; }return _vm.selectItem.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }return _vm.updateActiveUpOrDown(-1)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }return _vm.updateActiveUpOrDown(1)}],\"paste\":_vm.onPasteImage}}),_c('div',{staticClass:\"vac-icon-textarea\"},[(_vm.editedMessage._id)?_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.resetMessage}},[_vm._t(\"edit-close-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"close-outline\"}})]})],2):_vm._e(),(_vm.showEmojis)?_c('emoji-picker-container',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(function () { return (_vm.emojiOpened = false); }),expression:\"() => (emojiOpened = false)\"}],attrs:{\"emoji-opened\":_vm.emojiOpened,\"position-top\":true},on:{\"add-emoji\":_vm.addEmoji,\"open-emoji\":function($event){_vm.emojiOpened = $event}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}):_vm._e(),(_vm.showFiles)?_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.launchFilePicker}},[_vm._t(\"paperclip-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"paperclip\"}})]})],2):_vm._e(),(_vm.textareaActionEnabled)?_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.textareaActionHandler}},[_vm._t(\"custom-action-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"deleted\"}})]})],2):_vm._e(),(_vm.showFiles)?_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\",\"accept\":_vm.acceptedFiles},on:{\"change\":function($event){return _vm.onFileChange($event.target.files)}}}):_vm._e(),(_vm.showSendIcon)?_c('div',{staticClass:\"vac-svg-button\",class:{ 'vac-send-disabled': _vm.isMessageEmpty },on:{\"click\":_vm.sendMessage}},[_vm._t(\"send-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"send\",\"param\":_vm.isMessageEmpty || _vm.isFileLoading ? 'disabled' : ''}})]})],2):_vm._e()],1)])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-emoji-wrapper\"},[_c('div',{staticClass:\"vac-svg-button\",class:{ 'vac-emoji-reaction': _vm.emojiReaction },on:{\"click\":_vm.openEmoji}},[_vm._t(\"emoji-picker-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"emoji\",\"param\":_vm.emojiReaction ? 'reaction' : ''}})]})],2),(_vm.emojiOpened)?[_c('transition',{attrs:{\"name\":\"vac-slide-up\",\"appear\":\"\"}},[_c('div',{staticClass:\"vac-emoji-picker\",class:{ 'vac-picker-reaction': _vm.emojiReaction },style:({\n\t\t\t\t\theight: (_vm.emojiPickerHeight + \"px\"),\n\t\t\t\t\ttop: _vm.positionTop ? _vm.emojiPickerHeight : (_vm.emojiPickerTop + \"px\"),\n\t\t\t\t\tright: _vm.emojiPickerRight,\n\t\t\t\t\tdisplay: _vm.emojiPickerTop || !_vm.emojiReaction ? 'initial' : 'none'\n\t\t\t\t})},[(_vm.emojiOpened)?_c('emoji-picker',{ref:\"emojiPicker\"}):_vm._e()],1)])]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"vac-emoji-wrapper\">\n\t\t<div\n\t\t\tclass=\"vac-svg-button\"\n\t\t\t:class=\"{ 'vac-emoji-reaction': emojiReaction }\"\n\t\t\t@click=\"openEmoji\"\n\t\t>\n\t\t\t<slot name=\"emoji-picker-icon\">\n\t\t\t\t<svg-icon name=\"emoji\" :param=\"emojiReaction ? 'reaction' : ''\" />\n\t\t\t</slot>\n\t\t</div>\n\n\t\t<template v-if=\"emojiOpened\">\n\t\t\t<transition name=\"vac-slide-up\" appear>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"vac-emoji-picker\"\n\t\t\t\t\t:class=\"{ 'vac-picker-reaction': emojiReaction }\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\theight: `${emojiPickerHeight}px`,\n\t\t\t\t\t\ttop: positionTop ? emojiPickerHeight : `${emojiPickerTop}px`,\n\t\t\t\t\t\tright: emojiPickerRight,\n\t\t\t\t\t\tdisplay: emojiPickerTop || !emojiReaction ? 'initial' : 'none'\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<emoji-picker v-if=\"emojiOpened\" ref=\"emojiPicker\" />\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from '../SvgIcon/SvgIcon'\n\nexport default {\n\tname: 'EmojiPickerContainer',\n\tcomponents: {\n\t\tSvgIcon\n\t},\n\n\tprops: {\n\t\temojiOpened: { type: Boolean, default: false },\n\t\temojiReaction: { type: Boolean, default: false },\n\t\troomFooterRef: { type: HTMLDivElement, default: null },\n\t\tpositionTop: { type: Boolean, default: false },\n\t\tpositionRight: { type: Boolean, default: false }\n\t},\n\n\temits: ['add-emoji', 'open-emoji'],\n\n\tdata() {\n\t\treturn {\n\t\t\temojiPickerHeight: 320,\n\t\t\temojiPickerTop: 0,\n\t\t\temojiPickerRight: ''\n\t\t}\n\t},\n\n\twatch: {\n\t\temojiOpened(val) {\n\t\t\tif (val) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.addCustomStyling()\n\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.querySelector('emoji-picker')\n\t\t\t\t\t\t.addEventListener('emoji-click', ({ detail }) => {\n\t\t\t\t\t\t\tthis.$emit('add-emoji', {\n\t\t\t\t\t\t\t\tunicode: detail.unicode\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t}, 0)\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\taddCustomStyling() {\n\t\t\tconst picker = `.picker {\n\t\t\t\tborder: none;\n\t\t\t}`\n\n\t\t\tconst nav = `.nav {\n\t\t\t\toverflow-x: auto;\n\t\t\t}`\n\n\t\t\tconst searchBox = `.search-wrapper {\n\t\t\t\tpadding-right: 2px;\n\t\t\t\tpadding-left: 2px;\n\t\t\t}`\n\n\t\t\tconst search = `input.search {\n\t\t\t\theight: 32px;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tborder-radius: 10rem;\n\t\t\t\tborder: var(--chat-border-style);\n\t\t\t\tpadding: 5px 10px;\n\t\t\t\toutline: none;\n\t\t\t\tbackground: var(--chat-bg-color-input);\n\t\t\t\tcolor: var(--chat-color);\n\t\t\t}`\n\n\t\t\tconst style = document.createElement('style')\n\t\t\tstyle.textContent = picker + nav + searchBox + search\n\t\t\tthis.$refs.emojiPicker.shadowRoot.appendChild(style)\n\t\t},\n\t\topenEmoji(ev) {\n\t\t\tthis.$emit('open-emoji', !this.emojiOpened)\n\t\t\tthis.setEmojiPickerPosition(\n\t\t\t\tev.clientY,\n\t\t\t\tev.view.innerWidth,\n\t\t\t\tev.view.innerHeight\n\t\t\t)\n\t\t},\n\t\tsetEmojiPickerPosition(clientY, innerWidth, innerHeight) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst mobileSize = innerWidth < 500 || innerHeight < 700\n\n\t\t\t\tif (!this.roomFooterRef) {\n\t\t\t\t\tif (mobileSize) this.emojiPickerRight = '-50px'\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (mobileSize) {\n\t\t\t\t\tthis.emojiPickerRight = innerWidth / 2 - 150 + 'px'\n\t\t\t\t\tthis.emojiPickerTop = 100\n\t\t\t\t\tthis.emojiPickerHeight = innerHeight - 200\n\t\t\t\t} else {\n\t\t\t\t\tconst roomFooterTop = this.roomFooterRef.getBoundingClientRect().top\n\t\t\t\t\tconst pickerTopPosition =\n\t\t\t\t\t\troomFooterTop - clientY > this.emojiPickerHeight - 50\n\n\t\t\t\t\tif (pickerTopPosition) this.emojiPickerTop = clientY + 10\n\t\t\t\t\telse this.emojiPickerTop = clientY - this.emojiPickerHeight - 10\n\n\t\t\t\t\tthis.emojiPickerRight = this.positionTop\n\t\t\t\t\t\t? '-50px'\n\t\t\t\t\t\t: this.positionRight\n\t\t\t\t\t\t? '60px'\n\t\t\t\t\t\t: ''\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiPickerContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiPickerContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmojiPickerContainer.vue?vue&type=template&id=570a61f5&\"\nimport script from \"./EmojiPickerContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./EmojiPickerContainer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-room-header vac-app-border-b\"},[_vm._t(\"room-header\",function(){return [_c('div',{staticClass:\"vac-room-wrapper\"},[(!_vm.singleRoom)?_c('div',{staticClass:\"vac-svg-button vac-toggle-button\",class:{ 'vac-rotate-icon': !_vm.showRoomsList && !_vm.isMobile },on:{\"click\":function($event){return _vm.$emit('toggle-rooms-list')}}},[_vm._t(\"toggle-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"toggle\"}})]})],2):_vm._e(),_c('div',{staticClass:\"vac-info-wrapper\",class:{ 'vac-item-clickable': _vm.roomInfoEnabled },on:{\"click\":function($event){return _vm.$emit('room-info')}}},[_vm._t(\"room-header-avatar\",function(){return [(_vm.room.avatar)?_c('div',{staticClass:\"vac-avatar\",style:({ 'background-image': (\"url('\" + (_vm.room.avatar) + \"')\") })}):_vm._e()]},null,{ room: _vm.room }),_vm._t(\"room-header-info\",function(){return [_c('div',{staticClass:\"vac-text-ellipsis\"},[_c('div',{staticClass:\"vac-room-name vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.room.roomName)+\" \")]),(_vm.typingUsers)?_c('div',{staticClass:\"vac-room-info vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.typingUsers)+\" \")]):_c('div',{staticClass:\"vac-room-info vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.userStatus)+\" \")])])]},null,{ room: _vm.room, typingUsers: _vm.typingUsers, userStatus: _vm.userStatus })],2),(_vm.room.roomId)?_vm._t(\"room-options\",function(){return [(_vm.menuActions.length)?_c('div',{staticClass:\"vac-svg-button vac-room-options\",on:{\"click\":function($event){_vm.menuOpened = !_vm.menuOpened}}},[_vm._t(\"menu-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"menu\"}})]})],2):_vm._e(),(_vm.menuActions.length)?_c('transition',{attrs:{\"name\":\"vac-slide-left\"}},[(_vm.menuOpened)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeMenu),expression:\"closeMenu\"}],staticClass:\"vac-menu-options\"},[_c('div',{staticClass:\"vac-menu-list\"},_vm._l((_vm.menuActions),function(action){return _c('div',{key:action.name},[_c('div',{staticClass:\"vac-menu-item\",on:{\"click\":function($event){return _vm.menuActionHandler(action)}}},[_vm._v(\" \"+_vm._s(action.title)+\" \")])])}),0)]):_vm._e()]):_vm._e()]}):_vm._e()],2)]},null,{ room: _vm.room, typingUsers: _vm.typingUsers, userStatus: _vm.userStatus })],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"vac-room-header vac-app-border-b\">\n\t\t<slot name=\"room-header\" v-bind=\"{ room, typingUsers, userStatus }\">\n\t\t\t<div class=\"vac-room-wrapper\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!singleRoom\"\n\t\t\t\t\tclass=\"vac-svg-button vac-toggle-button\"\n\t\t\t\t\t:class=\"{ 'vac-rotate-icon': !showRoomsList && !isMobile }\"\n\t\t\t\t\t@click=\"$emit('toggle-rooms-list')\"\n\t\t\t\t>\n\t\t\t\t\t<slot name=\"toggle-icon\">\n\t\t\t\t\t\t<svg-icon name=\"toggle\" />\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"vac-info-wrapper\"\n\t\t\t\t\t:class=\"{ 'vac-item-clickable': roomInfoEnabled }\"\n\t\t\t\t\t@click=\"$emit('room-info')\"\n\t\t\t\t>\n\t\t\t\t\t<slot name=\"room-header-avatar\" v-bind=\"{ room }\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"room.avatar\"\n\t\t\t\t\t\t\tclass=\"vac-avatar\"\n\t\t\t\t\t\t\t:style=\"{ 'background-image': `url('${room.avatar}')` }\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</slot>\n\t\t\t\t\t<slot\n\t\t\t\t\t\tname=\"room-header-info\"\n\t\t\t\t\t\tv-bind=\"{ room, typingUsers, userStatus }\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"vac-text-ellipsis\">\n\t\t\t\t\t\t\t<div class=\"vac-room-name vac-text-ellipsis\">\n\t\t\t\t\t\t\t\t{{ room.roomName }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"typingUsers\" class=\"vac-room-info vac-text-ellipsis\">\n\t\t\t\t\t\t\t\t{{ typingUsers }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else class=\"vac-room-info vac-text-ellipsis\">\n\t\t\t\t\t\t\t\t{{ userStatus }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t\t<slot v-if=\"room.roomId\" name=\"room-options\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"menuActions.length\"\n\t\t\t\t\t\tclass=\"vac-svg-button vac-room-options\"\n\t\t\t\t\t\t@click=\"menuOpened = !menuOpened\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"menu-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"menu\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<transition v-if=\"menuActions.length\" name=\"vac-slide-left\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"menuOpened\"\n\t\t\t\t\t\t\tv-click-outside=\"closeMenu\"\n\t\t\t\t\t\t\tclass=\"vac-menu-options\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"vac-menu-list\">\n\t\t\t\t\t\t\t\t<div v-for=\"action in menuActions\" :key=\"action.name\">\n\t\t\t\t\t\t\t\t\t<div class=\"vac-menu-item\" @click=\"menuActionHandler(action)\">\n\t\t\t\t\t\t\t\t\t\t{{ action.title }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t</slot>\n\t</div>\n</template>\n\n<script>\nimport vClickOutside from 'v-click-outside'\n\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\n\nimport typingText from '../../../utils/typing-text'\n\nexport default {\n\tname: 'RoomHeader',\n\tcomponents: {\n\t\tSvgIcon\n\t},\n\n\tdirectives: {\n\t\tclickOutside: vClickOutside.directive\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\ttextMessages: { type: Object, required: true },\n\t\tsingleRoom: { type: Boolean, required: true },\n\t\tshowRoomsList: { type: Boolean, required: true },\n\t\tisMobile: { type: Boolean, required: true },\n\t\troomInfoEnabled: { type: Boolean, required: true },\n\t\tmenuActions: { type: Array, required: true },\n\t\troom: { type: Object, required: true }\n\t},\n\n\temits: ['toggle-rooms-list', 'room-info', 'menu-action-handler'],\n\n\tdata() {\n\t\treturn {\n\t\t\tmenuOpened: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\ttypingUsers() {\n\t\t\treturn typingText(this.room, this.currentUserId, this.textMessages)\n\t\t},\n\t\tuserStatus() {\n\t\t\tif (!this.room.users || this.room.users.length !== 2) return\n\n\t\t\tconst user = this.room.users.find(u => u._id !== this.currentUserId)\n\n\t\t\tif (!user.status) return\n\n\t\t\tlet text = ''\n\n\t\t\tif (user.status.state === 'online') {\n\t\t\t\ttext = this.textMessages.IS_ONLINE\n\t\t\t} else if (user.status.lastChanged) {\n\t\t\t\ttext = this.textMessages.LAST_SEEN + user.status.lastChanged\n\t\t\t}\n\n\t\t\treturn text\n\t\t}\n\t},\n\n\tmethods: {\n\t\tmenuActionHandler(action) {\n\t\t\tthis.closeMenu()\n\t\t\tthis.$emit('menu-action-handler', action)\n\t\t},\n\t\tcloseMenu() {\n\t\t\tthis.menuOpened = false\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomHeader.vue?vue&type=template&id=bb442b02&\"\nimport script from \"./RoomHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomHeader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vac-slide-up\"}},[(_vm.files.length)?_c('div',{staticClass:\"vac-room-files-container\",style:({ bottom: ((_vm.$parent.$refs.roomFooter.clientHeight) + \"px\") })},[_c('div',{staticClass:\"vac-files-box\"},_vm._l((_vm.files),function(file,i){return _c('div',{key:i},[_c('room-file',{attrs:{\"file\":file,\"index\":i},on:{\"remove-file\":function($event){return _vm.$emit('remove-file', $event)}}})],1)}),0),_c('div',{staticClass:\"vac-icon-close\"},[_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":function($event){return _vm.$emit('reset-message')}}},[_vm._t(\"reply-close-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"close-outline\"}})]})],2)])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-room-file-container\"},[_c('loader',{attrs:{\"show\":_vm.file.loading},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(idx,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}),_c('div',{staticClass:\"vac-svg-button vac-icon-remove\",on:{\"click\":function($event){return _vm.$emit('remove-file', _vm.index)}}},[_vm._t(\"image-close-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"close\",\"param\":\"image\"}})]})],2),(_vm.isImage)?_c('div',{staticClass:\"vac-message-image\",class:{ 'vac-blur-loading': _vm.file.loading },style:({\n\t\t\t'background-image': (\"url('\" + (_vm.file.localUrl || _vm.file.url) + \"')\")\n\t\t})}):(_vm.isVideo)?_c('video',{class:{ 'vac-blur-loading': _vm.file.loading },attrs:{\"controls\":\"\"}},[_c('source',{attrs:{\"src\":_vm.file.localUrl || _vm.file.url}})]):_c('div',{staticClass:\"vac-file-container\",class:{ 'vac-blur-loading': _vm.file.loading }},[_c('div',[_vm._t(\"file-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"file\"}})]})],2),_c('div',{staticClass:\"vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.file.name)+\" \")]),(_vm.file.extension)?_c('div',{staticClass:\"vac-text-ellipsis vac-text-extension\"},[_vm._v(\" \"+_vm._s(_vm.file.extension)+\" \")]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"vac-room-file-container\">\n\t\t<loader :show=\"file.loading\">\n\t\t\t<template v-for=\"(idx, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t</template>\n\t\t</loader>\n\n\t\t<div\n\t\t\tclass=\"vac-svg-button vac-icon-remove\"\n\t\t\t@click=\"$emit('remove-file', index)\"\n\t\t>\n\t\t\t<slot name=\"image-close-icon\">\n\t\t\t\t<svg-icon name=\"close\" param=\"image\" />\n\t\t\t</slot>\n\t\t</div>\n\n\t\t<div\n\t\t\tv-if=\"isImage\"\n\t\t\tclass=\"vac-message-image\"\n\t\t\t:class=\"{ 'vac-blur-loading': file.loading }\"\n\t\t\t:style=\"{\n\t\t\t\t'background-image': `url('${file.localUrl || file.url}')`\n\t\t\t}\"\n\t\t/>\n\n\t\t<video\n\t\t\tv-else-if=\"isVideo\"\n\t\t\tcontrols\n\t\t\t:class=\"{ 'vac-blur-loading': file.loading }\"\n\t\t>\n\t\t\t<source :src=\"file.localUrl || file.url\" />\n\t\t</video>\n\n\t\t<div\n\t\t\tv-else\n\t\t\tclass=\"vac-file-container\"\n\t\t\t:class=\"{ 'vac-blur-loading': file.loading }\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<slot name=\"file-icon\">\n\t\t\t\t\t<svg-icon name=\"file\" />\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<div class=\"vac-text-ellipsis\">\n\t\t\t\t{{ file.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"file.extension\" class=\"vac-text-ellipsis vac-text-extension\">\n\t\t\t\t{{ file.extension }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Loader from '../../../../components/Loader/Loader'\nimport SvgIcon from '../../../../components/SvgIcon/SvgIcon'\n\nconst { isImageFile, isVideoFile } = require('../../../../utils/media-file')\n\nexport default {\n\tname: 'RoomFiles',\n\tcomponents: {\n\t\tLoader,\n\t\tSvgIcon\n\t},\n\n\tprops: {\n\t\tfile: { type: Object, required: true },\n\t\tindex: { type: Number, required: true }\n\t},\n\n\temits: ['remove-file'],\n\n\tcomputed: {\n\t\tisImage() {\n\t\t\treturn isImageFile(this.file)\n\t\t},\n\t\tisVideo() {\n\t\t\treturn isVideoFile(this.file)\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../../demo/node_modules/babel-loader/lib/index.js!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../../demo/node_modules/babel-loader/lib/index.js!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomFile.vue?vue&type=template&id=3e5927e6&\"\nimport script from \"./RoomFile.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomFile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<transition name=\"vac-slide-up\">\n\t\t<div\n\t\t\tv-if=\"files.length\"\n\t\t\tclass=\"vac-room-files-container\"\n\t\t\t:style=\"{ bottom: `${$parent.$refs.roomFooter.clientHeight}px` }\"\n\t\t>\n\t\t\t<div class=\"vac-files-box\">\n\t\t\t\t<div v-for=\"(file, i) in files\" :key=\"i\">\n\t\t\t\t\t<room-file\n\t\t\t\t\t\t:file=\"file\"\n\t\t\t\t\t\t:index=\"i\"\n\t\t\t\t\t\t@remove-file=\"$emit('remove-file', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"vac-icon-close\">\n\t\t\t\t<div class=\"vac-svg-button\" @click=\"$emit('reset-message')\">\n\t\t\t\t\t<slot name=\"reply-close-icon\">\n\t\t\t\t\t\t<svg-icon name=\"close-outline\" />\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\n\nimport RoomFile from './RoomFile/RoomFile'\n\nexport default {\n\tname: 'RoomFiles',\n\tcomponents: {\n\t\tSvgIcon,\n\t\tRoomFile\n\t},\n\n\tprops: {\n\t\tfiles: { type: Array, required: true }\n\t},\n\n\temits: ['remove-file', 'reset-message']\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomFiles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomFiles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomFiles.vue?vue&type=template&id=ece9a318&\"\nimport script from \"./RoomFiles.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomFiles.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vac-slide-up\"}},[(_vm.messageReply)?_c('div',{staticClass:\"vac-reply-container\",style:({ bottom: ((_vm.$parent.$refs.roomFooter.clientHeight) + \"px\") })},[_c('div',{staticClass:\"vac-reply-box\"},[_c('div',{staticClass:\"vac-reply-info\"},[_c('div',{staticClass:\"vac-reply-username\"},[_vm._v(\" \"+_vm._s(_vm.messageReply.username)+\" \")]),_c('div',{staticClass:\"vac-reply-content\"},[_c('format-message',{attrs:{\"content\":_vm.messageReply.content,\"users\":_vm.room.users,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions,\"reply\":true},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1)]),(_vm.isImage)?_c('img',{staticClass:\"vac-image-reply\",attrs:{\"src\":_vm.firstFile.url}}):(_vm.isVideo)?_c('video',{staticClass:\"vac-image-reply\",attrs:{\"controls\":\"\"}},[_c('source',{attrs:{\"src\":_vm.firstFile.url}})]):(_vm.isAudio)?_c('audio-player',{staticClass:\"vac-audio-reply\",attrs:{\"src\":_vm.firstFile.url},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}):(_vm.isOtherFile)?_c('div',{staticClass:\"vac-image-reply vac-file-container\"},[_c('div',[_vm._t(\"file-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"file\"}})]})],2),_c('div',{staticClass:\"vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.firstFile.name)+\" \")]),(_vm.firstFile.extension)?_c('div',{staticClass:\"vac-text-ellipsis vac-text-extension\"},[_vm._v(\" \"+_vm._s(_vm.firstFile.extension)+\" \")]):_vm._e()]):_vm._e()],1),_c('div',{staticClass:\"vac-icon-reply\"},[_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":function($event){return _vm.$emit('reset-message')}}},[_vm._t(\"reply-close-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"close-outline\"}})]})],2)])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"vac-audio-player\"},[_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.playback}},[(_vm.isPlaying)?_vm._t(\"audio-pause-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"audio-pause\"}})]}):_vm._t(\"audio-play-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"audio-play\"}})]})],2),_c('audio-control',{attrs:{\"percentage\":_vm.progress},on:{\"change-linehead\":_vm.onUpdateProgress,\"hover-audio-progress\":function($event){return _vm.$emit('hover-audio-progress', $event)}}}),_c('audio',{attrs:{\"id\":_vm.playerUniqId,\"src\":_vm.audioSource}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"progress\",staticClass:\"vac-player-bar\",on:{\"mousedown\":_vm.onMouseDown,\"mouseover\":function($event){return _vm.$emit('hover-audio-progress', true)},\"mouseout\":function($event){return _vm.$emit('hover-audio-progress', false)}}},[_c('div',{staticClass:\"vac-player-progress\"},[_c('div',{staticClass:\"vac-line-container\"},[_c('div',{staticClass:\"vac-line-progress\",style:({ width: (_vm.percentage + \"%\") })}),_c('div',{staticClass:\"vac-line-dot\",class:{ 'vac-line-dot__active': _vm.isMouseDown },style:({ left: (_vm.percentage + \"%\") })})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div\n\t\tref=\"progress\"\n\t\tclass=\"vac-player-bar\"\n\t\t@mousedown=\"onMouseDown\"\n\t\t@mouseover=\"$emit('hover-audio-progress', true)\"\n\t\t@mouseout=\"$emit('hover-audio-progress', false)\"\n\t>\n\t\t<div class=\"vac-player-progress\">\n\t\t\t<div class=\"vac-line-container\">\n\t\t\t\t<div class=\"vac-line-progress\" :style=\"{ width: `${percentage}%` }\" />\n\t\t\t\t<div\n\t\t\t\t\tclass=\"vac-line-dot\"\n\t\t\t\t\t:class=\"{ 'vac-line-dot__active': isMouseDown }\"\n\t\t\t\t\t:style=\"{ left: `${percentage}%` }\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tprops: {\n\t\tpercentage: { type: Number, default: 0 }\n\t},\n\n\temits: ['hover-audio-progress', 'change-linehead'],\n\n\tdata() {\n\t\treturn {\n\t\t\tisMouseDown: false\n\t\t}\n\t},\n\n\tmethods: {\n\t\tonMouseDown(ev) {\n\t\t\tthis.isMouseDown = true\n\t\t\tconst seekPos = this.calculateLineHeadPosition(ev, this.$refs.progress)\n\t\t\tthis.$emit('change-linehead', seekPos)\n\t\t\tdocument.addEventListener('mousemove', this.onMouseMove)\n\t\t\tdocument.addEventListener('mouseup', this.onMouseUp)\n\t\t},\n\t\tonMouseUp(ev) {\n\t\t\tthis.isMouseDown = false\n\t\t\tdocument.removeEventListener('mouseup', this.onMouseUp)\n\t\t\tdocument.removeEventListener('mousemove', this.onMouseMove)\n\t\t\tconst seekPos = this.calculateLineHeadPosition(ev, this.$refs.progress)\n\t\t\tthis.$emit('change-linehead', seekPos)\n\t\t},\n\t\tonMouseMove(ev) {\n\t\t\tconst seekPos = this.calculateLineHeadPosition(ev, this.$refs.progress)\n\t\t\tthis.$emit('change-linehead', seekPos)\n\t\t},\n\t\tcalculateLineHeadPosition(ev, element) {\n\t\t\tconst progressWidth = element.getBoundingClientRect().width\n\t\t\tconst leftPosition = element.getBoundingClientRect().left\n\t\t\tlet pos = (ev.clientX - leftPosition) / progressWidth\n\n\t\t\tpos = pos < 0 ? 0 : pos\n\t\t\tpos = pos > 1 ? 1 : pos\n\n\t\t\treturn pos\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../../demo/node_modules/babel-loader/lib/index.js!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../../demo/node_modules/babel-loader/lib/index.js!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioControl.vue?vue&type=template&id=ee3587d0&\"\nimport script from \"./AudioControl.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioControl.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div>\n\t\t<div class=\"vac-audio-player\">\n\t\t\t<div class=\"vac-svg-button\" @click=\"playback\">\n\t\t\t\t<slot v-if=\"isPlaying\" name=\"audio-pause-icon\">\n\t\t\t\t\t<svg-icon name=\"audio-pause\" />\n\t\t\t\t</slot>\n\t\t\t\t<slot v-else name=\"audio-play-icon\">\n\t\t\t\t\t<svg-icon name=\"audio-play\" />\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<audio-control\n\t\t\t\t:percentage=\"progress\"\n\t\t\t\t@change-linehead=\"onUpdateProgress\"\n\t\t\t\t@hover-audio-progress=\"$emit('hover-audio-progress', $event)\"\n\t\t\t/>\n\n\t\t\t<audio :id=\"playerUniqId\" :src=\"audioSource\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\n\nimport AudioControl from './AudioControl/AudioControl'\n\nexport default {\n\tname: 'AudioPlayer',\n\tcomponents: {\n\t\tSvgIcon,\n\t\tAudioControl\n\t},\n\n\tprops: {\n\t\tmessageId: { type: [String, Number], default: null },\n\t\tsrc: { type: String, default: null }\n\t},\n\n\temits: ['hover-audio-progress', 'update-progress-time'],\n\n\tdata() {\n\t\treturn {\n\t\t\tisPlaying: false,\n\t\t\tduration: this.convertTimeMMSS(0),\n\t\t\tplayedTime: this.convertTimeMMSS(0),\n\t\t\tprogress: 0\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tplayerUniqId() {\n\t\t\treturn `audio-player${this.messageId}`\n\t\t},\n\t\taudioSource() {\n\t\t\tif (this.src) return this.src\n\t\t\tthis.resetProgress()\n\t\t\treturn null\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.player = document.getElementById(this.playerUniqId)\n\n\t\tthis.player.addEventListener('ended', () => {\n\t\t\tthis.isPlaying = false\n\t\t})\n\n\t\tthis.player.addEventListener('loadeddata', () => {\n\t\t\tthis.resetProgress()\n\t\t\tthis.duration = this.convertTimeMMSS(this.player.duration)\n\t\t\tthis.updateProgressTime()\n\t\t})\n\n\t\tthis.player.addEventListener('timeupdate', this.onTimeUpdate)\n\t},\n\n\tmethods: {\n\t\tconvertTimeMMSS(seconds) {\n\t\t\treturn new Date(seconds * 1000).toISOString().substr(14, 5)\n\t\t},\n\t\tplayback() {\n\t\t\tif (!this.audioSource) return\n\n\t\t\tif (this.isPlaying) this.player.pause()\n\t\t\telse setTimeout(() => this.player.play())\n\n\t\t\tthis.isPlaying = !this.isPlaying\n\t\t},\n\t\tresetProgress() {\n\t\t\tif (this.isPlaying) this.player.pause()\n\n\t\t\tthis.duration = this.convertTimeMMSS(0)\n\t\t\tthis.playedTime = this.convertTimeMMSS(0)\n\t\t\tthis.progress = 0\n\t\t\tthis.isPlaying = false\n\t\t\tthis.updateProgressTime()\n\t\t},\n\t\tonTimeUpdate() {\n\t\t\tthis.playedTime = this.convertTimeMMSS(this.player.currentTime)\n\t\t\tthis.progress = (this.player.currentTime / this.player.duration) * 100\n\t\t\tthis.updateProgressTime()\n\t\t},\n\t\tonUpdateProgress(pos) {\n\t\t\tif (pos) this.player.currentTime = pos * this.player.duration\n\t\t},\n\t\tupdateProgressTime() {\n\t\t\tthis.$emit(\n\t\t\t\t'update-progress-time',\n\t\t\t\tthis.progress > 1 ? this.playedTime : this.duration\n\t\t\t)\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioPlayer.vue?vue&type=template&id=7f26ed84&\"\nimport script from \"./AudioPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioPlayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<transition name=\"vac-slide-up\">\n\t\t<div\n\t\t\tv-if=\"messageReply\"\n\t\t\tclass=\"vac-reply-container\"\n\t\t\t:style=\"{ bottom: `${$parent.$refs.roomFooter.clientHeight}px` }\"\n\t\t>\n\t\t\t<div class=\"vac-reply-box\">\n\t\t\t\t<div class=\"vac-reply-info\">\n\t\t\t\t\t<div class=\"vac-reply-username\">\n\t\t\t\t\t\t{{ messageReply.username }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"vac-reply-content\">\n\t\t\t\t\t\t<format-message\n\t\t\t\t\t\t\t:content=\"messageReply.content\"\n\t\t\t\t\t\t\t:users=\"room.users\"\n\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t\t\t\t:reply=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</format-message>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<img v-if=\"isImage\" :src=\"firstFile.url\" class=\"vac-image-reply\" />\n\n\t\t\t\t<video v-else-if=\"isVideo\" controls class=\"vac-image-reply\">\n\t\t\t\t\t<source :src=\"firstFile.url\" />\n\t\t\t\t</video>\n\n\t\t\t\t<audio-player\n\t\t\t\t\tv-else-if=\"isAudio\"\n\t\t\t\t\t:src=\"firstFile.url\"\n\t\t\t\t\tclass=\"vac-audio-reply\"\n\t\t\t\t>\n\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t</template>\n\t\t\t\t</audio-player>\n\n\t\t\t\t<div v-else-if=\"isOtherFile\" class=\"vac-image-reply vac-file-container\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<slot name=\"file-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"file\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"vac-text-ellipsis\">\n\t\t\t\t\t\t{{ firstFile.name }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"firstFile.extension\"\n\t\t\t\t\t\tclass=\"vac-text-ellipsis vac-text-extension\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ firstFile.extension }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"vac-icon-reply\">\n\t\t\t\t<div class=\"vac-svg-button\" @click=\"$emit('reset-message')\">\n\t\t\t\t\t<slot name=\"reply-close-icon\">\n\t\t\t\t\t\t<svg-icon name=\"close-outline\" />\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\nimport FormatMessage from '../../../components/FormatMessage/FormatMessage'\n\nimport AudioPlayer from '../../Message/AudioPlayer/AudioPlayer'\n\nconst {\n\tisAudioFile,\n\tisImageFile,\n\tisVideoFile\n} = require('../../../utils/media-file')\n\nexport default {\n\tname: 'RoomMessageReply',\n\tcomponents: {\n\t\tSvgIcon,\n\t\tFormatMessage,\n\t\tAudioPlayer\n\t},\n\n\tprops: {\n\t\troom: { type: Object, required: true },\n\t\tmessageReply: { type: Object, default: null },\n\t\ttextFormatting: { type: Object, required: true },\n\t\tlinkOptions: { type: Object, required: true }\n\t},\n\n\temits: ['reset-message'],\n\n\tcomputed: {\n\t\tfirstFile() {\n\t\t\treturn this.messageReply.files?.length ? this.messageReply.files[0] : {}\n\t\t},\n\t\tisImage() {\n\t\t\treturn isImageFile(this.firstFile)\n\t\t},\n\t\tisVideo() {\n\t\t\treturn isVideoFile(this.firstFile)\n\t\t},\n\t\tisAudio() {\n\t\t\treturn isAudioFile(this.firstFile)\n\t\t},\n\t\tisOtherFile() {\n\t\t\treturn (\n\t\t\t\tthis.messageReply.files?.length &&\n\t\t\t\t!this.isAudio &&\n\t\t\t\t!this.isVideo &&\n\t\t\t\t!this.isImage\n\t\t\t)\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomMessageReply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomMessageReply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomMessageReply.vue?vue&type=template&id=28774150&\"\nimport script from \"./RoomMessageReply.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomMessageReply.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vac-slide-up\"}},[(_vm.filteredUsersTag.length)?_c('div',{staticClass:\"vac-tags-container\",style:({ bottom: ((_vm.$parent.$refs.roomFooter.clientHeight) + \"px\") })},_vm._l((_vm.filteredUsersTag),function(user,index){return _c('div',{key:user._id,staticClass:\"vac-tags-box\",class:{ 'vac-tags-box-active': index === _vm.activeItem },on:{\"mouseover\":function($event){_vm.activeItem = index},\"click\":function($event){return _vm.$emit('select-user-tag', user)}}},[_c('div',{staticClass:\"vac-tags-info\"},[(user.avatar)?_c('div',{staticClass:\"vac-avatar vac-tags-avatar\",style:({ 'background-image': (\"url('\" + (user.avatar) + \"')\") })}):_vm._e(),_c('div',{staticClass:\"vac-tags-username\"},[_vm._v(\" \"+_vm._s(user.username)+\" \")])])])}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<transition name=\"vac-slide-up\">\n\t\t<div\n\t\t\tv-if=\"filteredUsersTag.length\"\n\t\t\tclass=\"vac-tags-container\"\n\t\t\t:style=\"{ bottom: `${$parent.$refs.roomFooter.clientHeight}px` }\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-for=\"(user, index) in filteredUsersTag\"\n\t\t\t\t:key=\"user._id\"\n\t\t\t\tclass=\"vac-tags-box\"\n\t\t\t\t:class=\"{ 'vac-tags-box-active': index === activeItem }\"\n\t\t\t\t@mouseover=\"activeItem = index\"\n\t\t\t\t@click=\"$emit('select-user-tag', user)\"\n\t\t\t>\n\t\t\t\t<div class=\"vac-tags-info\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"user.avatar\"\n\t\t\t\t\t\tclass=\"vac-avatar vac-tags-avatar\"\n\t\t\t\t\t\t:style=\"{ 'background-image': `url('${user.avatar}')` }\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"vac-tags-username\">\n\t\t\t\t\t\t{{ user.username }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nexport default {\n\tname: 'RoomUsersTag',\n\n\tprops: {\n\t\tfilteredUsersTag: { type: Array, required: true },\n\t\tselectItem: { type: Boolean, default: null },\n\t\tactiveUpOrDown: { type: Number, default: null }\n\t},\n\n\temits: ['select-user-tag', 'activate-item'],\n\n\tdata() {\n\t\treturn {\n\t\t\tactiveItem: null\n\t\t}\n\t},\n\n\twatch: {\n\t\tfilteredUsersTag() {\n\t\t\tthis.activeItem = 0\n\t\t},\n\t\tselectItem(val) {\n\t\t\tif (val) {\n\t\t\t\tthis.$emit('select-user-tag', this.filteredUsersTag[this.activeItem])\n\t\t\t}\n\t\t},\n\t\tactiveUpOrDown() {\n\t\t\tif (\n\t\t\t\tthis.activeUpOrDown > 0 &&\n\t\t\t\tthis.activeItem < this.filteredUsersTag.length - 1\n\t\t\t) {\n\t\t\t\tthis.activeItem++\n\t\t\t} else if (this.activeUpOrDown < 0 && this.activeItem > 0) {\n\t\t\t\tthis.activeItem--\n\t\t\t}\n\t\t\tthis.$emit('activate-item')\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomUsersTag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomUsersTag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomUsersTag.vue?vue&type=template&id=7fb51b20&\"\nimport script from \"./RoomUsersTag.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomUsersTag.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vac-slide-up\"}},[(_vm.filteredEmojis.length)?_c('div',{staticClass:\"vac-emojis-container\",style:({ bottom: ((_vm.$parent.$refs.roomFooter.clientHeight) + \"px\") })},_vm._l((_vm.filteredEmojis),function(emoji,index){return _c('div',{key:emoji,staticClass:\"vac-emoji-element\",class:{ 'vac-emoji-element-active': index === _vm.activeItem },on:{\"mouseover\":function($event){_vm.activeItem = index},\"click\":function($event){return _vm.$emit('select-emoji', emoji)}}},[_vm._v(\" \"+_vm._s(emoji)+\" \")])}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<transition name=\"vac-slide-up\">\n\t\t<div\n\t\t\tv-if=\"filteredEmojis.length\"\n\t\t\tclass=\"vac-emojis-container\"\n\t\t\t:style=\"{ bottom: `${$parent.$refs.roomFooter.clientHeight}px` }\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-for=\"(emoji, index) in filteredEmojis\"\n\t\t\t\t:key=\"emoji\"\n\t\t\t\tclass=\"vac-emoji-element\"\n\t\t\t\t:class=\"{ 'vac-emoji-element-active': index === activeItem }\"\n\t\t\t\t@mouseover=\"activeItem = index\"\n\t\t\t\t@click=\"$emit('select-emoji', emoji)\"\n\t\t\t>\n\t\t\t\t{{ emoji }}\n\t\t\t</div>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nexport default {\n\tname: 'RoomEmojis',\n\n\tprops: {\n\t\tfilteredEmojis: { type: Array, required: true },\n\t\tselectItem: { type: Boolean, default: null },\n\t\tactiveUpOrDown: { type: Number, default: null }\n\t},\n\n\temits: ['select-emoji', 'activate-item'],\n\n\tdata() {\n\t\treturn {\n\t\t\tactiveItem: null\n\t\t}\n\t},\n\n\twatch: {\n\t\tfilteredEmojis() {\n\t\t\tthis.activeItem = 0\n\t\t},\n\t\tselectItem(val) {\n\t\t\tif (val) {\n\t\t\t\tthis.$emit('select-emoji', this.filteredEmojis[this.activeItem])\n\t\t\t}\n\t\t},\n\t\tactiveUpOrDown() {\n\t\t\tif (\n\t\t\t\tthis.activeUpOrDown > 0 &&\n\t\t\t\tthis.activeItem < this.filteredEmojis.length - 1\n\t\t\t) {\n\t\t\t\tthis.activeItem++\n\t\t\t} else if (this.activeUpOrDown < 0 && this.activeItem > 0) {\n\t\t\t\tthis.activeItem--\n\t\t\t}\n\t\t\tthis.$emit('activate-item')\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomEmojis.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomEmojis.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomEmojis.vue?vue&type=template&id=2d791f57&\"\nimport script from \"./RoomEmojis.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomEmojis.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vac-slide-up\"}},[(_vm.filteredTemplatesText.length)?_c('div',{staticClass:\"vac-template-container vac-app-box-shadow\",style:({ bottom: ((_vm.$parent.$refs.roomFooter.clientHeight) + \"px\") })},_vm._l((_vm.filteredTemplatesText),function(template,index){return _c('div',{key:index,staticClass:\"vac-template-box\",class:{ 'vac-template-active': index === _vm.activeItem },on:{\"mouseover\":function($event){_vm.activeItem = index},\"click\":function($event){return _vm.$emit('select-template-text', template)}}},[_c('div',{staticClass:\"vac-template-info\"},[_c('div',{staticClass:\"vac-template-tag\"},[_vm._v(\" /\"+_vm._s(template.tag)+\" \")]),_c('div',{staticClass:\"vac-template-text\"},[_vm._v(\" \"+_vm._s(template.text)+\" \")])])])}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<transition name=\"vac-slide-up\">\n\t\t<div\n\t\t\tv-if=\"filteredTemplatesText.length\"\n\t\t\tclass=\"vac-template-container vac-app-box-shadow\"\n\t\t\t:style=\"{ bottom: `${$parent.$refs.roomFooter.clientHeight}px` }\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-for=\"(template, index) in filteredTemplatesText\"\n\t\t\t\t:key=\"index\"\n\t\t\t\tclass=\"vac-template-box\"\n\t\t\t\t:class=\"{ 'vac-template-active': index === activeItem }\"\n\t\t\t\t@mouseover=\"activeItem = index\"\n\t\t\t\t@click=\"$emit('select-template-text', template)\"\n\t\t\t>\n\t\t\t\t<div class=\"vac-template-info\">\n\t\t\t\t\t<div class=\"vac-template-tag\">\n\t\t\t\t\t\t/{{ template.tag }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"vac-template-text\">\n\t\t\t\t\t\t{{ template.text }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nexport default {\n\tname: 'RoomTemplatesText',\n\n\tprops: {\n\t\tfilteredTemplatesText: { type: Array, required: true },\n\t\tselectItem: { type: Boolean, default: null },\n\t\tactiveUpOrDown: { type: Number, default: null }\n\t},\n\n\temits: ['select-template-text', 'activate-item'],\n\n\tdata() {\n\t\treturn {\n\t\t\tactiveItem: null\n\t\t}\n\t},\n\n\twatch: {\n\t\tfilteredTemplatesText() {\n\t\t\tthis.activeItem = 0\n\t\t},\n\t\tselectItem(val) {\n\t\t\tif (val) {\n\t\t\t\tthis.$emit(\n\t\t\t\t\t'select-template-text',\n\t\t\t\t\tthis.filteredTemplatesText[this.activeItem]\n\t\t\t\t)\n\t\t\t}\n\t\t},\n\t\tactiveUpOrDown() {\n\t\t\tif (\n\t\t\t\tthis.activeUpOrDown > 0 &&\n\t\t\t\tthis.activeItem < this.filteredTemplatesText.length - 1\n\t\t\t) {\n\t\t\t\tthis.activeItem++\n\t\t\t} else if (this.activeUpOrDown < 0 && this.activeItem > 0) {\n\t\t\t\tthis.activeItem--\n\t\t\t}\n\t\t\tthis.$emit('activate-item')\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomTemplatesText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomTemplatesText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomTemplatesText.vue?vue&type=template&id=01c840e1&\"\nimport script from \"./RoomTemplatesText.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomTemplatesText.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"message\",staticClass:\"vac-message-wrapper\",attrs:{\"id\":_vm.message._id}},[(_vm.showDate)?_c('div',{staticClass:\"vac-card-info vac-card-date\"},[_vm._v(\" \"+_vm._s(_vm.message.date)+\" \")]):_vm._e(),(_vm.newMessage._id === _vm.message._id)?_c('div',{staticClass:\"vac-line-new\"},[_vm._v(\" \"+_vm._s(_vm.textMessages.NEW_MESSAGES)+\" \")]):_vm._e(),(_vm.message.system)?_c('div',{staticClass:\"vac-card-info vac-card-system\"},[_c('format-message',{attrs:{\"content\":_vm.message.content,\"users\":_vm.roomUsers,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions},on:{\"open-user-tag\":_vm.openUserTag},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1):_c('div',{staticClass:\"vac-message-box\",class:{ 'vac-offset-current': _vm.message.senderId === _vm.currentUserId }},[_vm._t(\"message\",function(){return [(_vm.message.avatar && _vm.message.senderId !== _vm.currentUserId)?_c('div',{staticClass:\"vac-avatar\",style:({ 'background-image': (\"url('\" + (_vm.message.avatar) + \"')\") })}):_vm._e(),_c('div',{staticClass:\"vac-message-container\",class:{\n\t\t\t\t\t'vac-message-container-offset': _vm.messageOffset\n\t\t\t\t}},[_c('div',{staticClass:\"vac-message-card\",class:{\n\t\t\t\t\t\t'vac-message-highlight': _vm.isMessageHover,\n\t\t\t\t\t\t'vac-message-current': _vm.message.senderId === _vm.currentUserId,\n\t\t\t\t\t\t'vac-message-deleted': _vm.message.deleted\n\t\t\t\t\t},on:{\"mouseover\":_vm.onHoverMessage,\"mouseleave\":_vm.onLeaveMessage}},[(_vm.roomUsers.length > 2 && _vm.message.senderId !== _vm.currentUserId)?_c('div',{staticClass:\"vac-text-username\",class:{\n\t\t\t\t\t\t\t'vac-username-reply': !_vm.message.deleted && _vm.message.replyMessage\n\t\t\t\t\t\t}},[_c('span',[_vm._v(_vm._s(_vm.message.username))])]):_vm._e(),(!_vm.message.deleted && _vm.message.replyMessage)?_c('message-reply',{attrs:{\"message\":_vm.message,\"room-users\":_vm.roomUsers,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}):_vm._e(),(_vm.message.deleted)?_c('div',[_vm._t(\"deleted-icon\",function(){return [_c('svg-icon',{staticClass:\"vac-icon-deleted\",attrs:{\"name\":\"deleted\"}})]}),_c('span',[_vm._v(_vm._s(_vm.textMessages.MESSAGE_DELETED))])],2):(!_vm.message.files || !_vm.message.files.length)?_c('format-message',{attrs:{\"content\":_vm.message.content,\"users\":_vm.roomUsers,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions},on:{\"open-user-tag\":_vm.openUserTag},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}):(!_vm.isAudio || _vm.message.files.length > 1)?_c('message-files',{attrs:{\"current-user-id\":_vm.currentUserId,\"message\":_vm.message,\"room-users\":_vm.roomUsers,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions},on:{\"open-file\":_vm.openFile},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}):[_c('audio-player',{attrs:{\"message-id\":_vm.message._id,\"src\":_vm.message.files[0].url},on:{\"update-progress-time\":function($event){_vm.progressTime = $event},\"hover-audio-progress\":function($event){_vm.hoverAudioProgress = $event}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}),(!_vm.message.deleted)?_c('div',{staticClass:\"vac-progress-time\"},[_vm._v(\" \"+_vm._s(_vm.progressTime)+\" \")]):_vm._e()],_c('div',{staticClass:\"vac-text-timestamp\"},[(_vm.message.edited && !_vm.message.deleted)?_c('div',{staticClass:\"vac-icon-edited\"},[_vm._t(\"pencil-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"pencil\"}})]})],2):_vm._e(),_c('span',[_vm._v(_vm._s(_vm.message.timestamp))]),(_vm.isCheckmarkVisible)?_c('span',[_vm._t(\"checkmark-icon\",function(){return [_c('svg-icon',{staticClass:\"vac-icon-check\",attrs:{\"name\":_vm.message.distributed ? 'double-checkmark' : 'checkmark',\"param\":_vm.message.seen ? 'seen' : ''}})]},null,{ message: _vm.message })],2):_vm._e()]),_c('message-actions',{attrs:{\"current-user-id\":_vm.currentUserId,\"message\":_vm.message,\"message-actions\":_vm.messageActions,\"room-footer-ref\":_vm.roomFooterRef,\"show-reaction-emojis\":_vm.showReactionEmojis,\"hide-options\":_vm.hideOptions,\"message-hover\":_vm.messageHover,\"hover-message-id\":_vm.hoverMessageId,\"hover-audio-progress\":_vm.hoverAudioProgress},on:{\"hide-options\":function($event){return _vm.$emit('hide-options', false)},\"update-message-hover\":function($event){_vm.messageHover = $event},\"update-options-opened\":function($event){_vm.optionsOpened = $event},\"update-emoji-opened\":function($event){_vm.emojiOpened = $event},\"message-action-handler\":_vm.messageActionHandler,\"send-message-reaction\":_vm.sendMessageReaction},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],2),_c('message-reactions',{attrs:{\"current-user-id\":_vm.currentUserId,\"message\":_vm.message},on:{\"send-message-reaction\":_vm.sendMessageReaction}})],1),_vm._t(\"message-failure\",function(){return [(_vm.message.failure && _vm.message.senderId === _vm.currentUserId)?_c('div',{staticClass:\"vac-failure-container vac-svg-button\",class:{\n\t\t\t\t\t\t'vac-failure-container-avatar':\n\t\t\t\t\t\t\t_vm.message.avatar && _vm.message.senderId === _vm.currentUserId\n\t\t\t\t\t},on:{\"click\":function($event){return _vm.$emit('open-failed-message', { message: _vm.message })}}},[_c('div',{staticClass:\"vac-failure-text\"},[_vm._v(\" ! \")])]):_vm._e()]},null,{ message: _vm.message }),(_vm.message.avatar && _vm.message.senderId === _vm.currentUserId)?_c('div',{staticClass:\"vac-avatar vac-avatar-current\",style:({ 'background-image': (\"url('\" + (_vm.message.avatar) + \"')\") })}):_vm._e()]},null,{ message: _vm.message })],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-reply-message\"},[_c('div',{staticClass:\"vac-reply-username\"},[_vm._v(\" \"+_vm._s(_vm.replyUsername)+\" \")]),(_vm.isImage)?_c('div',{staticClass:\"vac-image-reply-container\"},[_c('div',{staticClass:\"vac-message-image vac-message-image-reply\",style:({\n\t\t\t\t'background-image': (\"url('\" + (_vm.firstFile.url) + \"')\")\n\t\t\t})})]):(_vm.isVideo)?_c('div',{staticClass:\"vac-video-reply-container\"},[_c('video',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"controls\":\"\"}},[_c('source',{attrs:{\"src\":_vm.firstFile.url}})])]):(_vm.isAudio)?_c('audio-player',{attrs:{\"src\":_vm.firstFile.url},on:{\"update-progress-time\":function($event){_vm.progressTime = $event},\"hover-audio-progress\":function($event){_vm.hoverAudioProgress = $event}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}):(_vm.isOtherFile)?_c('div',{staticClass:\"vac-file-container\"},[_c('div',[_vm._t(\"file-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"file\"}})]})],2),_c('div',{staticClass:\"vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.firstFile.name)+\" \")]),(_vm.firstFile.extension)?_c('div',{staticClass:\"vac-text-ellipsis vac-text-extension\"},[_vm._v(\" \"+_vm._s(_vm.firstFile.extension)+\" \")]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"vac-reply-content\"},[_c('format-message',{attrs:{\"content\":_vm.message.replyMessage.content,\"users\":_vm.roomUsers,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions,\"reply\":true},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"vac-reply-message\">\n\t\t<div class=\"vac-reply-username\">\n\t\t\t{{ replyUsername }}\n\t\t</div>\n\n\t\t<div v-if=\"isImage\" class=\"vac-image-reply-container\">\n\t\t\t<div\n\t\t\t\tclass=\"vac-message-image vac-message-image-reply\"\n\t\t\t\t:style=\"{\n\t\t\t\t\t'background-image': `url('${firstFile.url}')`\n\t\t\t\t}\"\n\t\t\t/>\n\t\t</div>\n\n\t\t<div v-else-if=\"isVideo\" class=\"vac-video-reply-container\">\n\t\t\t<video width=\"100%\" height=\"100%\" controls>\n\t\t\t\t<source :src=\"firstFile.url\" />\n\t\t\t</video>\n\t\t</div>\n\n\t\t<audio-player\n\t\t\tv-else-if=\"isAudio\"\n\t\t\t:src=\"firstFile.url\"\n\t\t\t@update-progress-time=\"progressTime = $event\"\n\t\t\t@hover-audio-progress=\"hoverAudioProgress = $event\"\n\t\t>\n\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t</template>\n\t\t</audio-player>\n\n\t\t<div v-else-if=\"isOtherFile\" class=\"vac-file-container\">\n\t\t\t<div>\n\t\t\t\t<slot name=\"file-icon\">\n\t\t\t\t\t<svg-icon name=\"file\" />\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<div class=\"vac-text-ellipsis\">\n\t\t\t\t{{ firstFile.name }}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"firstFile.extension\"\n\t\t\t\tclass=\"vac-text-ellipsis vac-text-extension\"\n\t\t\t>\n\t\t\t\t{{ firstFile.extension }}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"vac-reply-content\">\n\t\t\t<format-message\n\t\t\t\t:content=\"message.replyMessage.content\"\n\t\t\t\t:users=\"roomUsers\"\n\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t:reply=\"true\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</format-message>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\nimport FormatMessage from '../../../components/FormatMessage/FormatMessage'\n\nimport AudioPlayer from '../AudioPlayer/AudioPlayer'\n\nconst {\n\tisAudioFile,\n\tisImageFile,\n\tisVideoFile\n} = require('../../../utils/media-file')\n\nexport default {\n\tname: 'MessageReply',\n\tcomponents: { AudioPlayer, SvgIcon, FormatMessage },\n\n\tprops: {\n\t\tmessage: { type: Object, required: true },\n\t\ttextFormatting: { type: Object, required: true },\n\t\tlinkOptions: { type: Object, required: true },\n\t\troomUsers: { type: Array, required: true }\n\t},\n\n\tcomputed: {\n\t\treplyUsername() {\n\t\t\tconst { senderId } = this.message.replyMessage\n\t\t\tconst replyUser = this.roomUsers.find(user => user._id === senderId)\n\t\t\treturn replyUser ? replyUser.username : ''\n\t\t},\n\t\tfirstFile() {\n\t\t\treturn this.message.replyMessage.files?.length\n\t\t\t\t? this.message.replyMessage.files[0]\n\t\t\t\t: {}\n\t\t},\n\t\tisAudio() {\n\t\t\treturn isAudioFile(this.firstFile)\n\t\t},\n\t\tisImage() {\n\t\t\treturn isImageFile(this.firstFile)\n\t\t},\n\t\tisVideo() {\n\t\t\treturn isVideoFile(this.firstFile)\n\t\t},\n\t\tisOtherFile() {\n\t\t\treturn (\n\t\t\t\tthis.message.replyMessage.files?.length &&\n\t\t\t\t!this.isAudio &&\n\t\t\t\t!this.isVideo &&\n\t\t\t\t!this.isImage\n\t\t\t)\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageReply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageReply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageReply.vue?vue&type=template&id=173f64d6&\"\nimport script from \"./MessageReply.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageReply.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-message-files-container\"},[_vm._l((_vm.imageVideoFiles),function(file,idx){return _c('div',{key:idx + 'iv'},[_c('message-file',{attrs:{\"file\":file,\"current-user-id\":_vm.currentUserId,\"message\":_vm.message,\"index\":idx},on:{\"open-file\":function($event){return _vm.$emit('open-file', $event)}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1)}),_vm._l((_vm.otherFiles),function(file,idx){return _c('div',{key:idx + 'a'},[(file.progress >= 0)?_c('progress-bar',{style:({ top: '54px' }),attrs:{\"progress\":file.progress}}):_vm._e(),_c('div',{staticClass:\"vac-file-container\",class:{ 'vac-file-container-progress': file.progress >= 0 },on:{\"click\":function($event){$event.stopPropagation();return _vm.openFile(file, 'download')}}},[_c('div',{staticClass:\"vac-svg-button\"},[_vm._t(\"document-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"document\"}})]})],2),_c('div',{staticClass:\"vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(file.name)+\" \")]),(file.extension)?_c('div',{staticClass:\"vac-text-ellipsis vac-text-extension\"},[_vm._v(\" \"+_vm._s(file.extension)+\" \")]):_vm._e()])],1)}),_c('format-message',{attrs:{\"content\":_vm.message.content,\"users\":_vm.roomUsers,\"text-formatting\":_vm.textFormatting,\"link-options\":_vm.linkOptions},on:{\"open-user-tag\":function($event){return _vm.$emit('open-user-tag')}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(i,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vac-fade-spinner\",\"appear\":\"\"}},[_c('div',{ref:\"progress\",staticClass:\"vac-progress-wrapper\"},[_c('svg',{attrs:{\"height\":_vm.radius * 2,\"width\":_vm.radius * 2}},[_c('circle',{style:({\n\t\t\t\t\tstrokeDashoffset: _vm.strokeDashoffset,\n\t\t\t\t\tstrokeLinecap: 'round'\n\t\t\t\t}),attrs:{\"stroke\":\"rgba(255, 255, 255, 0.7)\",\"stroke-dasharray\":_vm.circumference + ' ' + _vm.circumference,\"stroke-width\":_vm.stroke,\"fill\":\"transparent\",\"r\":_vm.normalizedRadius,\"cx\":_vm.radius,\"cy\":_vm.radius}})]),_c('div',{staticClass:\"vac-progress-content\",style:({\n\t\t\t\theight: _vm.radius * 2 - 19 + 'px',\n\t\t\t\twidth: _vm.radius * 2 - 19 + 'px'\n\t\t\t})},[_c('div',{staticClass:\"vac-progress-text\"},[_vm._v(\" \"+_vm._s(_vm.progress)),_c('span',{staticClass:\"vac-progress-pourcent\"},[_vm._v(\"%\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<transition name=\"vac-fade-spinner\" appear>\n\t\t<div ref=\"progress\" class=\"vac-progress-wrapper\">\n\t\t\t<svg :height=\"radius * 2\" :width=\"radius * 2\">\n\t\t\t\t<circle\n\t\t\t\t\tstroke=\"rgba(255, 255, 255, 0.7)\"\n\t\t\t\t\t:stroke-dasharray=\"circumference + ' ' + circumference\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tstrokeDashoffset: strokeDashoffset,\n\t\t\t\t\t\tstrokeLinecap: 'round'\n\t\t\t\t\t}\"\n\t\t\t\t\t:stroke-width=\"stroke\"\n\t\t\t\t\tfill=\"transparent\"\n\t\t\t\t\t:r=\"normalizedRadius\"\n\t\t\t\t\t:cx=\"radius\"\n\t\t\t\t\t:cy=\"radius\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t\t<div\n\t\t\t\tclass=\"vac-progress-content\"\n\t\t\t\t:style=\"{\n\t\t\t\t\theight: radius * 2 - 19 + 'px',\n\t\t\t\t\twidth: radius * 2 - 19 + 'px'\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<div class=\"vac-progress-text\">\n\t\t\t\t\t{{ progress }}<span class=\"vac-progress-pourcent\">%</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nexport default {\n\tname: 'ProgressBar',\n\n\tprops: {\n\t\tprogress: { type: Number, default: 0 }\n\t},\n\n\tdata() {\n\t\tconst radius = 35\n\t\tconst stroke = 4\n\t\tconst normalizedRadius = radius - stroke * 2\n\t\tconst circumference = normalizedRadius * 2 * Math.PI\n\n\t\treturn {\n\t\t\tradius,\n\t\t\tstroke,\n\t\t\tnormalizedRadius,\n\t\t\tcircumference\n\t\t}\n\t},\n\tcomputed: {\n\t\tstrokeDashoffset() {\n\t\t\treturn this.circumference - (this.progress / 100) * this.circumference\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProgressBar.vue?vue&type=template&id=561521ed&\"\nimport script from \"./ProgressBar.vue?vue&type=script&lang=js&\"\nexport * from \"./ProgressBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-message-file-container\"},[(_vm.isImage)?_c('div',{ref:'imageRef' + _vm.index,staticClass:\"vac-message-image-container\",on:{\"mouseover\":function($event){_vm.imageHover = true},\"mouseleave\":function($event){_vm.imageHover = false},\"click\":function($event){$event.stopPropagation();return _vm.openFile('preview')}}},[(_vm.file.progress >= 0)?_c('progress-bar',{style:({ top: ((_vm.imageResponsive.loaderTop) + \"px\") }),attrs:{\"progress\":_vm.file.progress}}):_c('loader',{style:({ top: ((_vm.imageResponsive.loaderTop) + \"px\") }),attrs:{\"show\":_vm.isImageLoading},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(idx,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}),_c('div',{staticClass:\"vac-message-image\",class:{\n\t\t\t\t'vac-blur-loading':\n\t\t\t\t\t_vm.isImageLoading && _vm.message.senderId === _vm.currentUserId\n\t\t\t},style:({\n\t\t\t\t'background-image': (\"url('\" + (_vm.isImageLoading ? _vm.file.preview || _vm.file.url : _vm.file.url) + \"')\"),\n\t\t\t\t'max-height': ((_vm.imageResponsive.maxHeight) + \"px\")\n\t\t\t})},[_c('transition',{attrs:{\"name\":\"vac-fade-image\"}},[(_vm.imageHover && !_vm.isImageLoading)?_c('div',{staticClass:\"vac-image-buttons\"},[_c('div',{staticClass:\"vac-svg-button vac-button-view\",on:{\"click\":function($event){$event.stopPropagation();return _vm.openFile('preview')}}},[_vm._t(\"eye-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"eye\"}})]})],2),_c('div',{staticClass:\"vac-svg-button vac-button-download\",on:{\"click\":function($event){$event.stopPropagation();return _vm.openFile('download')}}},[_vm._t(\"document-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"document\"}})]})],2)]):_vm._e()])],1)],1):(_vm.isVideo)?_c('div',{staticClass:\"vac-video-container\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.openFile('preview')}}},[(_vm.file.progress >= 0)?_c('progress-bar',{attrs:{\"progress\":_vm.file.progress}}):_vm._e(),_c('video',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"controls\":\"\"}},[_c('source',{attrs:{\"src\":_vm.file.url}})])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"vac-message-file-container\">\n\t\t<div\n\t\t\tv-if=\"isImage\"\n\t\t\t:ref=\"'imageRef' + index\"\n\t\t\tclass=\"vac-message-image-container\"\n\t\t\t@mouseover=\"imageHover = true\"\n\t\t\t@mouseleave=\"imageHover = false\"\n\t\t\t@click.stop=\"openFile('preview')\"\n\t\t>\n\t\t\t<progress-bar\n\t\t\t\tv-if=\"file.progress >= 0\"\n\t\t\t\t:progress=\"file.progress\"\n\t\t\t\t:style=\"{ top: `${imageResponsive.loaderTop}px` }\"\n\t\t\t/>\n\t\t\t<loader\n\t\t\t\tv-else\n\t\t\t\t:show=\"isImageLoading\"\n\t\t\t\t:style=\"{ top: `${imageResponsive.loaderTop}px` }\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(idx, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</loader>\n\t\t\t<div\n\t\t\t\tclass=\"vac-message-image\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'vac-blur-loading':\n\t\t\t\t\t\tisImageLoading && message.senderId === currentUserId\n\t\t\t\t}\"\n\t\t\t\t:style=\"{\n\t\t\t\t\t'background-image': `url('${\n\t\t\t\t\t\tisImageLoading ? file.preview || file.url : file.url\n\t\t\t\t\t}')`,\n\t\t\t\t\t'max-height': `${imageResponsive.maxHeight}px`\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<transition name=\"vac-fade-image\">\n\t\t\t\t\t<div v-if=\"imageHover && !isImageLoading\" class=\"vac-image-buttons\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"vac-svg-button vac-button-view\"\n\t\t\t\t\t\t\t@click.stop=\"openFile('preview')\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<slot name=\"eye-icon\">\n\t\t\t\t\t\t\t\t<svg-icon name=\"eye\" />\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"vac-svg-button vac-button-download\"\n\t\t\t\t\t\t\t@click.stop=\"openFile('download')\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<slot name=\"document-icon\">\n\t\t\t\t\t\t\t\t<svg-icon name=\"document\" />\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tv-else-if=\"isVideo\"\n\t\t\tclass=\"vac-video-container\"\n\t\t\t@click.stop.prevent=\"openFile('preview')\"\n\t\t>\n\t\t\t<progress-bar v-if=\"file.progress >= 0\" :progress=\"file.progress\" />\n\t\t\t<video width=\"100%\" height=\"100%\" controls>\n\t\t\t\t<source :src=\"file.url\" />\n\t\t\t</video>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Loader from '../../../../components/Loader/Loader'\nimport ProgressBar from '../../../../components/ProgressBar/ProgressBar'\nimport SvgIcon from '../../../../components/SvgIcon/SvgIcon'\n\nconst { isImageFile, isVideoFile } = require('../../../../utils/media-file')\n\nexport default {\n\tname: 'MessageFile',\n\tcomponents: { SvgIcon, Loader, ProgressBar },\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\tmessage: { type: Object, required: true },\n\t\tfile: { type: Object, required: true },\n\t\tindex: { type: Number, required: true }\n\t},\n\n\temits: ['open-file'],\n\n\tdata() {\n\t\treturn {\n\t\t\timageResponsive: '',\n\t\t\timageLoading: false,\n\t\t\timageHover: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tisImageLoading() {\n\t\t\treturn this.file.url.indexOf('blob:http') !== -1 || this.imageLoading\n\t\t},\n\t\tisImage() {\n\t\t\treturn isImageFile(this.file)\n\t\t},\n\t\tisVideo() {\n\t\t\treturn isVideoFile(this.file)\n\t\t}\n\t},\n\n\twatch: {\n\t\tfile: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.checkImgLoad()\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tconst ref = this.$refs['imageRef' + this.index]\n\n\t\tif (ref) {\n\t\t\tthis.imageResponsive = {\n\t\t\t\tmaxHeight: ref.clientWidth - 18,\n\t\t\t\tloaderTop: ref.clientHeight / 2 - 9\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\tcheckImgLoad() {\n\t\t\tif (!isImageFile(this.file)) return\n\t\t\tthis.imageLoading = true\n\t\t\tconst image = new Image()\n\t\t\timage.src = this.file.url\n\t\t\timage.addEventListener('load', () => (this.imageLoading = false))\n\t\t},\n\t\topenFile(action) {\n\t\t\tthis.$emit('open-file', { file: this.file, action })\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../../demo/node_modules/babel-loader/lib/index.js!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../../demo/node_modules/babel-loader/lib/index.js!../../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageFile.vue?vue&type=template&id=37e9719c&\"\nimport script from \"./MessageFile.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageFile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"vac-message-files-container\">\n\t\t<div v-for=\"(file, idx) in imageVideoFiles\" :key=\"idx + 'iv'\">\n\t\t\t<message-file\n\t\t\t\t:file=\"file\"\n\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t:message=\"message\"\n\t\t\t\t:index=\"idx\"\n\t\t\t\t@open-file=\"$emit('open-file', $event)\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</message-file>\n\t\t</div>\n\n\t\t<div v-for=\"(file, idx) in otherFiles\" :key=\"idx + 'a'\">\n\t\t\t<progress-bar\n\t\t\t\tv-if=\"file.progress >= 0\"\n\t\t\t\t:progress=\"file.progress\"\n\t\t\t\t:style=\"{ top: '54px' }\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tclass=\"vac-file-container\"\n\t\t\t\t:class=\"{ 'vac-file-container-progress': file.progress >= 0 }\"\n\t\t\t\t@click.stop=\"openFile(file, 'download')\"\n\t\t\t>\n\t\t\t\t<div class=\"vac-svg-button\">\n\t\t\t\t\t<slot name=\"document-icon\">\n\t\t\t\t\t\t<svg-icon name=\"document\" />\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"vac-text-ellipsis\">\n\t\t\t\t\t{{ file.name }}\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"file.extension\" class=\"vac-text-ellipsis vac-text-extension\">\n\t\t\t\t\t{{ file.extension }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<format-message\n\t\t\t:content=\"message.content\"\n\t\t\t:users=\"roomUsers\"\n\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t:link-options=\"linkOptions\"\n\t\t\t@open-user-tag=\"$emit('open-user-tag')\"\n\t\t>\n\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t</template>\n\t\t</format-message>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\nimport FormatMessage from '../../../components/FormatMessage/FormatMessage'\nimport ProgressBar from '../../../components/ProgressBar/ProgressBar'\n\nimport MessageFile from './MessageFile/MessageFile'\n\nconst { isImageVideoFile } = require('../../../utils/media-file')\n\nexport default {\n\tname: 'MessageFiles',\n\tcomponents: { SvgIcon, FormatMessage, ProgressBar, MessageFile },\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\tmessage: { type: Object, required: true },\n\t\troomUsers: { type: Array, required: true },\n\t\ttextFormatting: { type: Object, required: true },\n\t\tlinkOptions: { type: Object, required: true }\n\t},\n\n\temits: ['open-file', 'open-user-tag'],\n\n\tcomputed: {\n\t\timageVideoFiles() {\n\t\t\treturn this.message.files.filter(file => isImageVideoFile(file))\n\t\t},\n\t\totherFiles() {\n\t\t\treturn this.message.files.filter(file => !isImageVideoFile(file))\n\t\t}\n\t},\n\n\tmethods: {\n\t\topenFile(file, action) {\n\t\t\tthis.$emit('open-file', { file, action })\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageFiles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageFiles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageFiles.vue?vue&type=template&id=08958bff&\"\nimport script from \"./MessageFiles.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageFiles.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-message-actions-wrapper\"},[_c('div',{staticClass:\"vac-options-container\",style:({\n\t\t\tdisplay: _vm.hoverAudioProgress ? 'none' : 'initial',\n\t\t\twidth:\n\t\t\t\t_vm.filteredMessageActions.length && _vm.showReactionEmojis ? '70px' : '45px'\n\t\t})},[_c('transition-group',{attrs:{\"name\":\"vac-slide-left\",\"tag\":\"span\"}},[(_vm.isMessageActions || _vm.isMessageReactions)?_c('div',{key:\"1\",staticClass:\"vac-blur-container\",class:{\n\t\t\t\t\t'vac-options-me': _vm.message.senderId === _vm.currentUserId\n\t\t\t\t}}):_vm._e(),(_vm.isMessageActions)?_c('div',{key:\"2\",ref:\"actionIcon\",staticClass:\"vac-svg-button vac-message-options\",on:{\"click\":_vm.openOptions}},[_vm._t(\"dropdown-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"dropdown\",\"param\":\"message\"}})]})],2):_vm._e(),(_vm.isMessageReactions)?_c('emoji-picker-container',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeEmoji),expression:\"closeEmoji\"}],key:\"3\",staticClass:\"vac-message-emojis\",style:({ right: _vm.isMessageActions ? '30px' : '5px' }),attrs:{\"emoji-opened\":_vm.emojiOpened,\"emoji-reaction\":true,\"room-footer-ref\":_vm.roomFooterRef,\"position-right\":_vm.message.senderId === _vm.currentUserId},on:{\"add-emoji\":_vm.sendMessageReaction,\"open-emoji\":_vm.openEmoji},scopedSlots:_vm._u([{key:\"emoji-picker-icon\",fn:function(){return [_vm._t(\"emoji-picker-reaction-icon\")]},proxy:true}],null,true)}):_vm._e()],1)],1),(_vm.filteredMessageActions.length)?_c('transition',{attrs:{\"name\":_vm.message.senderId === _vm.currentUserId\n\t\t\t\t? 'vac-slide-left'\n\t\t\t\t: 'vac-slide-right'}},[(_vm.optionsOpened)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeOptions),expression:\"closeOptions\"}],ref:\"menuOptions\",staticClass:\"vac-menu-options\",class:{\n\t\t\t\t'vac-menu-left': _vm.message.senderId !== _vm.currentUserId\n\t\t\t},style:({ top: (_vm.menuOptionsTop + \"px\") })},[_c('div',{staticClass:\"vac-menu-list\"},_vm._l((_vm.filteredMessageActions),function(action){return _c('div',{key:action.name},[_c('div',{staticClass:\"vac-menu-item\",on:{\"click\":function($event){return _vm.messageActionHandler(action)}}},[_vm._v(\" \"+_vm._s(action.title)+\" \")])])}),0)]):_vm._e()]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"vac-message-actions-wrapper\">\n\t\t<div\n\t\t\tclass=\"vac-options-container\"\n\t\t\t:style=\"{\n\t\t\t\tdisplay: hoverAudioProgress ? 'none' : 'initial',\n\t\t\t\twidth:\n\t\t\t\t\tfilteredMessageActions.length && showReactionEmojis ? '70px' : '45px'\n\t\t\t}\"\n\t\t>\n\t\t\t<transition-group name=\"vac-slide-left\" tag=\"span\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isMessageActions || isMessageReactions\"\n\t\t\t\t\tkey=\"1\"\n\t\t\t\t\tclass=\"vac-blur-container\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'vac-options-me': message.senderId === currentUserId\n\t\t\t\t\t}\"\n\t\t\t\t/>\n\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isMessageActions\"\n\t\t\t\t\tref=\"actionIcon\"\n\t\t\t\t\tkey=\"2\"\n\t\t\t\t\tclass=\"vac-svg-button vac-message-options\"\n\t\t\t\t\t@click=\"openOptions\"\n\t\t\t\t>\n\t\t\t\t\t<slot name=\"dropdown-icon\">\n\t\t\t\t\t\t<svg-icon name=\"dropdown\" param=\"message\" />\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\n\t\t\t\t<emoji-picker-container\n\t\t\t\t\tv-if=\"isMessageReactions\"\n\t\t\t\t\tkey=\"3\"\n\t\t\t\t\tv-click-outside=\"closeEmoji\"\n\t\t\t\t\tclass=\"vac-message-emojis\"\n\t\t\t\t\t:style=\"{ right: isMessageActions ? '30px' : '5px' }\"\n\t\t\t\t\t:emoji-opened=\"emojiOpened\"\n\t\t\t\t\t:emoji-reaction=\"true\"\n\t\t\t\t\t:room-footer-ref=\"roomFooterRef\"\n\t\t\t\t\t:position-right=\"message.senderId === currentUserId\"\n\t\t\t\t\t@add-emoji=\"sendMessageReaction\"\n\t\t\t\t\t@open-emoji=\"openEmoji\"\n\t\t\t\t>\n\t\t\t\t\t<template #emoji-picker-icon>\n\t\t\t\t\t\t<slot name=\"emoji-picker-reaction-icon\" />\n\t\t\t\t\t</template>\n\t\t\t\t</emoji-picker-container>\n\t\t\t</transition-group>\n\t\t</div>\n\n\t\t<transition\n\t\t\tv-if=\"filteredMessageActions.length\"\n\t\t\t:name=\"\n\t\t\t\tmessage.senderId === currentUserId\n\t\t\t\t\t? 'vac-slide-left'\n\t\t\t\t\t: 'vac-slide-right'\n\t\t\t\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-if=\"optionsOpened\"\n\t\t\t\tref=\"menuOptions\"\n\t\t\t\tv-click-outside=\"closeOptions\"\n\t\t\t\tclass=\"vac-menu-options\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'vac-menu-left': message.senderId !== currentUserId\n\t\t\t\t}\"\n\t\t\t\t:style=\"{ top: `${menuOptionsTop}px` }\"\n\t\t\t>\n\t\t\t\t<div class=\"vac-menu-list\">\n\t\t\t\t\t<div v-for=\"action in filteredMessageActions\" :key=\"action.name\">\n\t\t\t\t\t\t<div class=\"vac-menu-item\" @click=\"messageActionHandler(action)\">\n\t\t\t\t\t\t\t{{ action.title }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t</div>\n</template>\n\n<script>\nimport vClickOutside from 'v-click-outside'\n\nimport SvgIcon from '../../../components/SvgIcon/SvgIcon'\nimport EmojiPickerContainer from '../../../components/EmojiPickerContainer/EmojiPickerContainer'\n\nexport default {\n\tname: 'MessageActions',\n\tcomponents: { SvgIcon, EmojiPickerContainer },\n\n\tdirectives: {\n\t\tclickOutside: vClickOutside.directive\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\tmessage: { type: Object, required: true },\n\t\tmessageActions: { type: Array, required: true },\n\t\troomFooterRef: { type: HTMLDivElement, default: null },\n\t\tshowReactionEmojis: { type: Boolean, required: true },\n\t\thideOptions: { type: Boolean, required: true },\n\t\tmessageHover: { type: Boolean, required: true },\n\t\thoverMessageId: { type: [String, Number], default: null },\n\t\thoverAudioProgress: { type: Boolean, required: true }\n\t},\n\n\temits: [\n\t\t'update-emoji-opened',\n\t\t'update-options-opened',\n\t\t'update-message-hover',\n\t\t'hide-options',\n\t\t'message-action-handler',\n\t\t'send-message-reaction'\n\t],\n\n\tdata() {\n\t\treturn {\n\t\t\tmenuOptionsTop: 0,\n\t\t\toptionsOpened: false,\n\t\t\toptionsClosing: false,\n\t\t\temojiOpened: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tisMessageActions() {\n\t\t\treturn (\n\t\t\t\tthis.filteredMessageActions.length &&\n\t\t\t\tthis.messageHover &&\n\t\t\t\t!this.message.deleted &&\n\t\t\t\t!this.message.disableActions &&\n\t\t\t\t!this.hoverAudioProgress\n\t\t\t)\n\t\t},\n\t\tisMessageReactions() {\n\t\t\treturn (\n\t\t\t\tthis.showReactionEmojis &&\n\t\t\t\tthis.messageHover &&\n\t\t\t\t!this.message.deleted &&\n\t\t\t\t!this.message.disableReactions &&\n\t\t\t\t!this.hoverAudioProgress\n\t\t\t)\n\t\t},\n\t\tfilteredMessageActions() {\n\t\t\treturn this.message.senderId === this.currentUserId\n\t\t\t\t? this.messageActions\n\t\t\t\t: this.messageActions.filter(message => !message.onlyMe)\n\t\t}\n\t},\n\n\twatch: {\n\t\temojiOpened(val) {\n\t\t\tthis.$emit('update-emoji-opened', val)\n\t\t\tif (val) this.optionsOpened = false\n\t\t},\n\t\thideOptions(val) {\n\t\t\tif (val) {\n\t\t\t\tthis.closeEmoji()\n\t\t\t\tthis.closeOptions()\n\t\t\t}\n\t\t},\n\t\toptionsOpened(val) {\n\t\t\tthis.$emit('update-options-opened', val)\n\t\t}\n\t},\n\n\tmethods: {\n\t\topenOptions() {\n\t\t\tif (this.optionsClosing) return\n\n\t\t\tthis.optionsOpened = !this.optionsOpened\n\t\t\tif (!this.optionsOpened) return\n\n\t\t\tthis.$emit('hide-options', false)\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (\n\t\t\t\t\t!this.roomFooterRef ||\n\t\t\t\t\t!this.$refs.menuOptions ||\n\t\t\t\t\t!this.$refs.actionIcon\n\t\t\t\t) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst menuOptionsTop = this.$refs.menuOptions.getBoundingClientRect()\n\t\t\t\t\t.height\n\n\t\t\t\tconst actionIconTop = this.$refs.actionIcon.getBoundingClientRect().top\n\t\t\t\tconst roomFooterTop = this.roomFooterRef.getBoundingClientRect().top\n\n\t\t\t\tconst optionsTopPosition =\n\t\t\t\t\troomFooterTop - actionIconTop > menuOptionsTop + 50\n\n\t\t\t\tif (optionsTopPosition) this.menuOptionsTop = 30\n\t\t\t\telse this.menuOptionsTop = -menuOptionsTop\n\t\t\t})\n\t\t},\n\t\tcloseOptions() {\n\t\t\tthis.optionsOpened = false\n\t\t\tthis.optionsClosing = true\n\t\t\tthis.updateMessageHover()\n\t\t\tsetTimeout(() => (this.optionsClosing = false), 100)\n\t\t},\n\t\topenEmoji() {\n\t\t\tthis.emojiOpened = !this.emojiOpened\n\t\t\tthis.$emit('hide-options', false)\n\t\t},\n\t\tcloseEmoji() {\n\t\t\tthis.emojiOpened = false\n\t\t\tthis.updateMessageHover()\n\t\t},\n\t\tupdateMessageHover() {\n\t\t\tif (this.hoverMessageId !== this.message._id) {\n\t\t\t\tthis.$emit('update-message-hover', false)\n\t\t\t}\n\t\t},\n\t\tmessageActionHandler(action) {\n\t\t\tthis.closeOptions()\n\t\t\tthis.$emit('message-action-handler', action)\n\t\t},\n\t\tsendMessageReaction(emoji, reaction) {\n\t\t\tthis.$emit('send-message-reaction', { emoji, reaction })\n\t\t\tthis.closeEmoji()\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageActions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageActions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageActions.vue?vue&type=template&id=5d1d27a4&\"\nimport script from \"./MessageActions.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageActions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.message.deleted)?_c('transition-group',{attrs:{\"name\":\"vac-slide-left\",\"tag\":\"span\"}},_vm._l((_vm.message.reactions),function(reaction,key){return _c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(reaction.length),expression:\"reaction.length\"}],key:key + 0,staticClass:\"vac-button-reaction\",class:{\n\t\t\t'vac-reaction-me': reaction.indexOf(_vm.currentUserId) !== -1\n\t\t},style:({\n\t\t\tfloat: _vm.message.senderId === _vm.currentUserId ? 'right' : 'left'\n\t\t}),on:{\"click\":function($event){return _vm.sendMessageReaction({ unicode: key }, reaction)}}},[_vm._v(\" \"+_vm._s(key)),_c('span',[_vm._v(_vm._s(reaction.length))])])}),0):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<transition-group v-if=\"!message.deleted\" name=\"vac-slide-left\" tag=\"span\">\n\t\t<button\n\t\t\tv-for=\"(reaction, key) in message.reactions\"\n\t\t\tv-show=\"reaction.length\"\n\t\t\t:key=\"key + 0\"\n\t\t\tclass=\"vac-button-reaction\"\n\t\t\t:class=\"{\n\t\t\t\t'vac-reaction-me': reaction.indexOf(currentUserId) !== -1\n\t\t\t}\"\n\t\t\t:style=\"{\n\t\t\t\tfloat: message.senderId === currentUserId ? 'right' : 'left'\n\t\t\t}\"\n\t\t\t@click=\"sendMessageReaction({ unicode: key }, reaction)\"\n\t\t>\n\t\t\t{{ key }}<span>{{ reaction.length }}</span>\n\t\t</button>\n\t</transition-group>\n</template>\n\n<script>\nexport default {\n\tname: 'MessageReactions',\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\tmessage: { type: Object, required: true }\n\t},\n\n\temits: ['send-message-reaction'],\n\n\tmethods: {\n\t\tsendMessageReaction(emoji, reaction) {\n\t\t\tthis.$emit('send-message-reaction', { emoji, reaction })\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageReactions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageReactions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageReactions.vue?vue&type=template&id=51f19e1d&\"\nimport script from \"./MessageReactions.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageReactions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div :id=\"message._id\" ref=\"message\" class=\"vac-message-wrapper\">\n\t\t<div v-if=\"showDate\" class=\"vac-card-info vac-card-date\">\n\t\t\t{{ message.date }}\n\t\t</div>\n\n\t\t<div v-if=\"newMessage._id === message._id\" class=\"vac-line-new\">\n\t\t\t{{ textMessages.NEW_MESSAGES }}\n\t\t</div>\n\n\t\t<div v-if=\"message.system\" class=\"vac-card-info vac-card-system\">\n\t\t\t<format-message\n\t\t\t\t:content=\"message.content\"\n\t\t\t\t:users=\"roomUsers\"\n\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t@open-user-tag=\"openUserTag\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</format-message>\n\t\t</div>\n\n\t\t<div\n\t\t\tv-else\n\t\t\tclass=\"vac-message-box\"\n\t\t\t:class=\"{ 'vac-offset-current': message.senderId === currentUserId }\"\n\t\t>\n\t\t\t<slot name=\"message\" v-bind=\"{ message }\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"message.avatar && message.senderId !== currentUserId\"\n\t\t\t\t\tclass=\"vac-avatar\"\n\t\t\t\t\t:style=\"{ 'background-image': `url('${message.avatar}')` }\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"vac-message-container\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'vac-message-container-offset': messageOffset\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"vac-message-card\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'vac-message-highlight': isMessageHover,\n\t\t\t\t\t\t\t'vac-message-current': message.senderId === currentUserId,\n\t\t\t\t\t\t\t'vac-message-deleted': message.deleted\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t@mouseover=\"onHoverMessage\"\n\t\t\t\t\t\t@mouseleave=\"onLeaveMessage\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"roomUsers.length > 2 && message.senderId !== currentUserId\"\n\t\t\t\t\t\t\tclass=\"vac-text-username\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'vac-username-reply': !message.deleted && message.replyMessage\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>{{ message.username }}</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<message-reply\n\t\t\t\t\t\t\tv-if=\"!message.deleted && message.replyMessage\"\n\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t:room-users=\"roomUsers\"\n\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</message-reply>\n\n\t\t\t\t\t\t<div v-if=\"message.deleted\">\n\t\t\t\t\t\t\t<slot name=\"deleted-icon\">\n\t\t\t\t\t\t\t\t<svg-icon name=\"deleted\" class=\"vac-icon-deleted\" />\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t<span>{{ textMessages.MESSAGE_DELETED }}</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<format-message\n\t\t\t\t\t\t\tv-else-if=\"!message.files || !message.files.length\"\n\t\t\t\t\t\t\t:content=\"message.content\"\n\t\t\t\t\t\t\t:users=\"roomUsers\"\n\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t\t\t\t@open-user-tag=\"openUserTag\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</format-message>\n\n\t\t\t\t\t\t<message-files\n\t\t\t\t\t\t\tv-else-if=\"!isAudio || message.files.length > 1\"\n\t\t\t\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t:room-users=\"roomUsers\"\n\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t\t\t\t@open-file=\"openFile\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</message-files>\n\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<audio-player\n\t\t\t\t\t\t\t\t:message-id=\"message._id\"\n\t\t\t\t\t\t\t\t:src=\"message.files[0].url\"\n\t\t\t\t\t\t\t\t@update-progress-time=\"progressTime = $event\"\n\t\t\t\t\t\t\t\t@hover-audio-progress=\"hoverAudioProgress = $event\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</audio-player>\n\n\t\t\t\t\t\t\t<div v-if=\"!message.deleted\" class=\"vac-progress-time\">\n\t\t\t\t\t\t\t\t{{ progressTime }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<div class=\"vac-text-timestamp\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"message.edited && !message.deleted\"\n\t\t\t\t\t\t\t\tclass=\"vac-icon-edited\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot name=\"pencil-icon\">\n\t\t\t\t\t\t\t\t\t<svg-icon name=\"pencil\" />\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span>{{ message.timestamp }}</span>\n\t\t\t\t\t\t\t<span v-if=\"isCheckmarkVisible\">\n\t\t\t\t\t\t\t\t<slot name=\"checkmark-icon\" v-bind=\"{ message }\">\n\t\t\t\t\t\t\t\t\t<svg-icon\n\t\t\t\t\t\t\t\t\t\t:name=\"\n\t\t\t\t\t\t\t\t\t\t\tmessage.distributed ? 'double-checkmark' : 'checkmark'\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t:param=\"message.seen ? 'seen' : ''\"\n\t\t\t\t\t\t\t\t\t\tclass=\"vac-icon-check\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<message-actions\n\t\t\t\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t:message-actions=\"messageActions\"\n\t\t\t\t\t\t\t:room-footer-ref=\"roomFooterRef\"\n\t\t\t\t\t\t\t:show-reaction-emojis=\"showReactionEmojis\"\n\t\t\t\t\t\t\t:hide-options=\"hideOptions\"\n\t\t\t\t\t\t\t:message-hover=\"messageHover\"\n\t\t\t\t\t\t\t:hover-message-id=\"hoverMessageId\"\n\t\t\t\t\t\t\t:hover-audio-progress=\"hoverAudioProgress\"\n\t\t\t\t\t\t\t@hide-options=\"$emit('hide-options', false)\"\n\t\t\t\t\t\t\t@update-message-hover=\"messageHover = $event\"\n\t\t\t\t\t\t\t@update-options-opened=\"optionsOpened = $event\"\n\t\t\t\t\t\t\t@update-emoji-opened=\"emojiOpened = $event\"\n\t\t\t\t\t\t\t@message-action-handler=\"messageActionHandler\"\n\t\t\t\t\t\t\t@send-message-reaction=\"sendMessageReaction\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</message-actions>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<message-reactions\n\t\t\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t@send-message-reaction=\"sendMessageReaction\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<slot name=\"message-failure\" v-bind=\"{ message }\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"message.failure && message.senderId === currentUserId\"\n\t\t\t\t\t\tclass=\"vac-failure-container vac-svg-button\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'vac-failure-container-avatar':\n\t\t\t\t\t\t\t\tmessage.avatar && message.senderId === currentUserId\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t@click=\"$emit('open-failed-message', { message })\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"vac-failure-text\">\n\t\t\t\t\t\t\t!\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</slot>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"message.avatar && message.senderId === currentUserId\"\n\t\t\t\t\tclass=\"vac-avatar vac-avatar-current\"\n\t\t\t\t\t:style=\"{ 'background-image': `url('${message.avatar}')` }\"\n\t\t\t\t/>\n\t\t\t</slot>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from '../../components/SvgIcon/SvgIcon'\nimport FormatMessage from '../../components/FormatMessage/FormatMessage'\n\nimport MessageReply from './MessageReply/MessageReply'\nimport MessageFiles from './MessageFiles/MessageFiles'\nimport MessageActions from './MessageActions/MessageActions'\nimport MessageReactions from './MessageReactions/MessageReactions'\nimport AudioPlayer from './AudioPlayer/AudioPlayer'\n\nconst { messagesValidation } = require('../../utils/data-validation')\nconst { isAudioFile } = require('../../utils/media-file')\n\nexport default {\n\tname: 'Message',\n\tcomponents: {\n\t\tSvgIcon,\n\t\tFormatMessage,\n\t\tAudioPlayer,\n\t\tMessageReply,\n\t\tMessageFiles,\n\t\tMessageActions,\n\t\tMessageReactions\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\ttextMessages: { type: Object, required: true },\n\t\tindex: { type: Number, required: true },\n\t\tmessage: { type: Object, required: true },\n\t\tmessages: { type: Array, required: true },\n\t\teditedMessage: { type: Object, required: true },\n\t\troomUsers: { type: Array, default: () => [] },\n\t\tmessageActions: { type: Array, required: true },\n\t\troomFooterRef: { type: HTMLDivElement, default: null },\n\t\tnewMessages: { type: Array, default: () => [] },\n\t\tshowReactionEmojis: { type: Boolean, required: true },\n\t\tshowNewMessagesDivider: { type: Boolean, required: true },\n\t\ttextFormatting: { type: Object, required: true },\n\t\tlinkOptions: { type: Object, required: true },\n\t\thideOptions: { type: Boolean, required: true }\n\t},\n\n\temits: [\n\t\t'hide-options',\n\t\t'message-added',\n\t\t'open-file',\n\t\t'open-user-tag',\n\t\t'open-failed-message',\n\t\t'message-action-handler',\n\t\t'send-message-reaction'\n\t],\n\n\tdata() {\n\t\treturn {\n\t\t\thoverMessageId: null,\n\t\t\tmessageHover: false,\n\t\t\toptionsOpened: false,\n\t\t\temojiOpened: false,\n\t\t\tnewMessage: {},\n\t\t\tprogressTime: '- : -',\n\t\t\thoverAudioProgress: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tshowDate() {\n\t\t\treturn (\n\t\t\t\tthis.index > 0 &&\n\t\t\t\tthis.message.date !== this.messages[this.index - 1].date\n\t\t\t)\n\t\t},\n\t\tmessageOffset() {\n\t\t\treturn (\n\t\t\t\tthis.index > 0 &&\n\t\t\t\tthis.message.senderId !== this.messages[this.index - 1].senderId\n\t\t\t)\n\t\t},\n\t\tisMessageHover() {\n\t\t\treturn (\n\t\t\t\tthis.editedMessage._id === this.message._id ||\n\t\t\t\tthis.hoverMessageId === this.message._id\n\t\t\t)\n\t\t},\n\t\tisAudio() {\n\t\t\treturn this.message.files?.some(file => isAudioFile(file))\n\t\t},\n\t\tisCheckmarkVisible() {\n\t\t\treturn (\n\t\t\t\tthis.message.senderId === this.currentUserId &&\n\t\t\t\t!this.message.deleted &&\n\t\t\t\t(this.message.saved || this.message.distributed || this.message.seen)\n\t\t\t)\n\t\t}\n\t},\n\n\twatch: {\n\t\tnewMessages: {\n\t\t\timmediate: true,\n\t\t\tdeep: true,\n\t\t\thandler(val) {\n\t\t\t\tif (!val.length || !this.showNewMessagesDivider) {\n\t\t\t\t\tthis.newMessage = {}\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.newMessage = val.reduce((res, obj) =>\n\t\t\t\t\tobj.index < res.index ? obj : res\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tmessagesValidation(this.message)\n\n\t\tthis.$emit('message-added', {\n\t\t\tmessage: this.message,\n\t\t\tindex: this.index,\n\t\t\tref: this.$refs.message\n\t\t})\n\t},\n\n\tmethods: {\n\t\tonHoverMessage() {\n\t\t\tthis.messageHover = true\n\t\t\tif (this.canEditMessage()) this.hoverMessageId = this.message._id\n\t\t},\n\t\tcanEditMessage() {\n\t\t\treturn !this.message.deleted\n\t\t},\n\t\tonLeaveMessage() {\n\t\t\tif (!this.optionsOpened && !this.emojiOpened) this.messageHover = false\n\t\t\tthis.hoverMessageId = null\n\t\t},\n\t\topenFile(file) {\n\t\t\tthis.$emit('open-file', { message: this.message, file: file })\n\t\t},\n\t\topenUserTag(user) {\n\t\t\tthis.$emit('open-user-tag', { user })\n\t\t},\n\t\tmessageActionHandler(action) {\n\t\t\tthis.messageHover = false\n\t\t\tthis.hoverMessageId = null\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$emit('message-action-handler', { action, message: this.message })\n\t\t\t}, 300)\n\t\t},\n\t\tsendMessageReaction({ emoji, reaction }) {\n\t\t\tthis.$emit('send-message-reaction', {\n\t\t\t\tmessageId: this.message._id,\n\t\t\t\treaction: emoji,\n\t\t\t\tremove: reaction && reaction.indexOf(this.currentUserId) !== -1\n\t\t\t})\n\t\t\tthis.messageHover = false\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=278e45b9&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Credits to https://github.com/grishkovelli/vue-audio-recorder\n\nimport Mp3Encoder from './mp3-encoder'\n\nexport default class {\n\tconstructor(options = {}) {\n\t\tthis.beforeRecording = options.beforeRecording\n\t\tthis.pauseRecording = options.pauseRecording\n\t\tthis.afterRecording = options.afterRecording\n\t\tthis.micFailed = options.micFailed\n\n\t\tthis.encoderOptions = {\n\t\t\tbitRate: options.bitRate,\n\t\t\tsampleRate: options.sampleRate\n\t\t}\n\n\t\tthis.bufferSize = 4096\n\t\tthis.records = []\n\n\t\tthis.isPause = false\n\t\tthis.isRecording = false\n\n\t\tthis.duration = 0\n\t\tthis.volume = 0\n\n\t\tthis._duration = 0\n\t}\n\n\tstart() {\n\t\tconst constraints = {\n\t\t\tvideo: false,\n\t\t\taudio: {\n\t\t\t\tchannelCount: 1,\n\t\t\t\techoCancellation: false\n\t\t\t}\n\t\t}\n\n\t\tthis.beforeRecording && this.beforeRecording('start recording')\n\n\t\tnavigator.mediaDevices\n\t\t\t.getUserMedia(constraints)\n\t\t\t.then(this._micCaptured.bind(this))\n\t\t\t.catch(this._micError.bind(this))\n\n\t\tthis.isPause = false\n\t\tthis.isRecording = true\n\n\t\tif (!this.lameEncoder) {\n\t\t\tthis.lameEncoder = new Mp3Encoder(this.encoderOptions)\n\t\t}\n\t}\n\n\tstop() {\n\t\tthis.stream.getTracks().forEach(track => track.stop())\n\t\tthis.input.disconnect()\n\t\tthis.processor.disconnect()\n\t\tthis.context.close()\n\n\t\tlet record = null\n\n\t\trecord = this.lameEncoder.finish()\n\n\t\trecord.duration = this.duration\n\t\tthis.records.push(record)\n\n\t\tthis._duration = 0\n\t\tthis.duration = 0\n\n\t\tthis.isPause = false\n\t\tthis.isRecording = false\n\n\t\tthis.afterRecording && this.afterRecording(record)\n\t}\n\n\tpause() {\n\t\tthis.stream.getTracks().forEach(track => track.stop())\n\t\tthis.input.disconnect()\n\t\tthis.processor.disconnect()\n\n\t\tthis._duration = this.duration\n\t\tthis.isPause = true\n\n\t\tthis.pauseRecording && this.pauseRecording('pause recording')\n\t}\n\n\t_micCaptured(stream) {\n\t\tthis.context = new (window.AudioContext || window.webkitAudioContext)()\n\t\tthis.duration = this._duration\n\t\tthis.input = this.context.createMediaStreamSource(stream)\n\t\tthis.processor = this.context.createScriptProcessor(this.bufferSize, 1, 1)\n\t\tthis.stream = stream\n\n\t\tthis.processor.onaudioprocess = ev => {\n\t\t\tconst sample = ev.inputBuffer.getChannelData(0)\n\t\t\tlet sum = 0.0\n\n\t\t\tif (this.lameEncoder) {\n\t\t\t\tthis.lameEncoder.encode(sample)\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < sample.length; ++i) {\n\t\t\t\tsum += sample[i] * sample[i]\n\t\t\t}\n\n\t\t\tthis.duration =\n\t\t\t\tparseFloat(this._duration) +\n\t\t\t\tparseFloat(this.context.currentTime.toFixed(2))\n\t\t\tthis.volume = Math.sqrt(sum / sample.length).toFixed(2)\n\t\t}\n\n\t\tthis.input.connect(this.processor)\n\t\tthis.processor.connect(this.context.destination)\n\t}\n\n\t_micError(error) {\n\t\tthis.micFailed && this.micFailed(error)\n\t}\n}\n","<template>\n\t<div\n\t\tv-show=\"(isMobile && !showRoomsList) || !isMobile || singleRoom\"\n\t\tclass=\"vac-col-messages\"\n\t\t@touchstart=\"touchStart\"\n\t>\n\t\t<slot v-if=\"showNoRoom\" name=\"no-room-selected\">\n\t\t\t<div class=\"vac-container-center vac-room-empty\">\n\t\t\t\t<div>{{ textMessages.ROOM_EMPTY }}</div>\n\t\t\t</div>\n\t\t</slot>\n\n\t\t<room-header\n\t\t\tv-else\n\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t:text-messages=\"textMessages\"\n\t\t\t:single-room=\"singleRoom\"\n\t\t\t:show-rooms-list=\"showRoomsList\"\n\t\t\t:is-mobile=\"isMobile\"\n\t\t\t:room-info-enabled=\"roomInfoEnabled\"\n\t\t\t:menu-actions=\"menuActions\"\n\t\t\t:room=\"room\"\n\t\t\t@toggle-rooms-list=\"$emit('toggle-rooms-list')\"\n\t\t\t@room-info=\"$emit('room-info')\"\n\t\t\t@menu-action-handler=\"$emit('menu-action-handler', $event)\"\n\t\t>\n\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t</template>\n\t\t</room-header>\n\n\t\t<div\n\t\t\tid=\"messages-list\"\n\t\t\tref=\"scrollContainer\"\n\t\t\tclass=\"vac-container-scroll\"\n\t\t\t@scroll=\"onContainerScroll\"\n\t\t>\n\t\t\t<loader :show=\"loadingMessages\">\n\t\t\t\t<template v-for=\"(idx, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</loader>\n\t\t\t<div class=\"vac-messages-container\">\n\t\t\t\t<div :class=\"{ 'vac-messages-hidden': loadingMessages }\">\n\t\t\t\t\t<transition name=\"vac-fade-message\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div v-if=\"showNoMessages\" class=\"vac-text-started\">\n\t\t\t\t\t\t\t\t<slot name=\"messages-empty\">\n\t\t\t\t\t\t\t\t\t{{ textMessages.MESSAGES_EMPTY }}\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"showMessagesStarted\" class=\"vac-text-started\">\n\t\t\t\t\t\t\t\t{{ textMessages.CONVERSATION_STARTED }} {{ messages[0].date }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</transition>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"messages.length && !messagesLoaded\"\n\t\t\t\t\t\tid=\"infinite-loader-messages\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<loader :show=\"true\" :infinite=\"true\">\n\t\t\t\t\t\t\t<template v-for=\"(idx, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</loader>\n\t\t\t\t\t</div>\n\t\t\t\t\t<transition-group :key=\"roomId\" name=\"vac-fade-message\" tag=\"span\">\n\t\t\t\t\t\t<div v-for=\"(m, i) in messages\" :key=\"m.indexId || m._id\">\n\t\t\t\t\t\t\t<message\n\t\t\t\t\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t\t\t\t\t:message=\"m\"\n\t\t\t\t\t\t\t\t:index=\"i\"\n\t\t\t\t\t\t\t\t:messages=\"messages\"\n\t\t\t\t\t\t\t\t:edited-message=\"editedMessage\"\n\t\t\t\t\t\t\t\t:message-actions=\"messageActions\"\n\t\t\t\t\t\t\t\t:room-users=\"room.users\"\n\t\t\t\t\t\t\t\t:text-messages=\"textMessages\"\n\t\t\t\t\t\t\t\t:room-footer-ref=\"$refs.roomFooter\"\n\t\t\t\t\t\t\t\t:new-messages=\"newMessages\"\n\t\t\t\t\t\t\t\t:show-reaction-emojis=\"showReactionEmojis\"\n\t\t\t\t\t\t\t\t:show-new-messages-divider=\"showNewMessagesDivider\"\n\t\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t\t\t\t\t:hide-options=\"hideOptions\"\n\t\t\t\t\t\t\t\t@message-added=\"onMessageAdded\"\n\t\t\t\t\t\t\t\t@message-action-handler=\"messageActionHandler\"\n\t\t\t\t\t\t\t\t@open-file=\"openFile\"\n\t\t\t\t\t\t\t\t@open-user-tag=\"openUserTag\"\n\t\t\t\t\t\t\t\t@open-failed-message=\"$emit('open-failed-message', $event)\"\n\t\t\t\t\t\t\t\t@send-message-reaction=\"sendMessageReaction\"\n\t\t\t\t\t\t\t\t@hide-options=\"hideOptions = $event\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-for=\"(idx, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</message>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</transition-group>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"!loadingMessages\">\n\t\t\t<transition name=\"vac-bounce\">\n\t\t\t\t<div v-if=\"scrollIcon\" class=\"vac-icon-scroll\" @click=\"scrollToBottom\">\n\t\t\t\t\t<transition name=\"vac-bounce\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"scrollMessagesCount\"\n\t\t\t\t\t\t\tclass=\"vac-badge-counter vac-messages-count\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ scrollMessagesCount }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</transition>\n\t\t\t\t\t<slot name=\"scroll-icon\">\n\t\t\t\t\t\t<svg-icon name=\"dropdown\" param=\"scroll\" />\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t</div>\n\t\t<div\n\t\t\tv-show=\"Object.keys(room).length && showFooter\"\n\t\t\tref=\"roomFooter\"\n\t\t\tclass=\"vac-room-footer\"\n\t\t\t:class=\"{\n\t\t\t\t'vac-app-box-shadow': shadowFooter\n\t\t\t}\"\n\t\t>\n\t\t\t<room-emojis\n\t\t\t\t:filtered-emojis=\"filteredEmojis\"\n\t\t\t\t:select-item=\"selectEmojiItem\"\n\t\t\t\t:active-up-or-down=\"activeUpOrDownEmojis\"\n\t\t\t\t@select-emoji=\"selectEmoji($event)\"\n\t\t\t\t@activate-item=\"activeUpOrDownEmojis = 0\"\n\t\t\t/>\n\n\t\t\t<room-users-tag\n\t\t\t\t:filtered-users-tag=\"filteredUsersTag\"\n\t\t\t\t:select-item=\"selectUsersTagItem\"\n\t\t\t\t:active-up-or-down=\"activeUpOrDownUsersTag\"\n\t\t\t\t@select-user-tag=\"selectUserTag($event)\"\n\t\t\t\t@activate-item=\"activeUpOrDownUsersTag = 0\"\n\t\t\t/>\n\n\t\t\t<room-templates-text\n\t\t\t\t:filtered-templates-text=\"filteredTemplatesText\"\n\t\t\t\t:select-item=\"selectTemplatesTextItem\"\n\t\t\t\t:active-up-or-down=\"activeUpOrDownTemplatesText\"\n\t\t\t\t@select-template-text=\"selectTemplateText($event)\"\n\t\t\t\t@activate-item=\"activeUpOrDownTemplatesText = 0\"\n\t\t\t/>\n\n\t\t\t<room-message-reply\n\t\t\t\t:room=\"room\"\n\t\t\t\t:message-reply=\"messageReply\"\n\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t@reset-message=\"resetMessage\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</room-message-reply>\n\n\t\t\t<room-files\n\t\t\t\t:files=\"files\"\n\t\t\t\t@remove-file=\"removeFile\"\n\t\t\t\t@reset-message=\"resetMessage\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</room-files>\n\n\t\t\t<div\n\t\t\t\tclass=\"vac-box-footer\"\n\t\t\t\t:class=\"{ 'vac-box-footer-border': !files.length }\"\n\t\t\t>\n\t\t\t\t<div v-if=\"showAudio && !files.length\" class=\"vac-icon-textarea-left\">\n\t\t\t\t\t<template v-if=\"isRecording\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"vac-svg-button vac-icon-audio-stop\"\n\t\t\t\t\t\t\t@click=\"stopRecorder\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<slot name=\"audio-stop-icon\">\n\t\t\t\t\t\t\t\t<svg-icon name=\"close-outline\" />\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"vac-dot-audio-record\" />\n\n\t\t\t\t\t\t<div class=\"vac-dot-audio-record-time\">\n\t\t\t\t\t\t\t{{ recordedTime }}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"vac-svg-button vac-icon-audio-confirm\"\n\t\t\t\t\t\t\t@click=\"toggleRecorder(false)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<slot name=\"audio-stop-icon\">\n\t\t\t\t\t\t\t\t<svg-icon name=\"checkmark\" />\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<div v-else class=\"vac-svg-button\" @click=\"toggleRecorder(true)\">\n\t\t\t\t\t\t<slot name=\"microphone-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"microphone\" class=\"vac-icon-microphone\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<textarea\n\t\t\t\t\tref=\"roomTextarea\"\n\t\t\t\t\t:placeholder=\"textMessages.TYPE_MESSAGE\"\n\t\t\t\t\tclass=\"vac-textarea\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'vac-textarea-outline': editedMessage._id\n\t\t\t\t\t}\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t'min-height': `20px`,\n\t\t\t\t\t\t'padding-left': `12px`\n\t\t\t\t\t}\"\n\t\t\t\t\t@input=\"onChangeInput\"\n\t\t\t\t\t@keydown.esc=\"escapeTextarea\"\n\t\t\t\t\t@keydown.enter.exact.prevent=\"selectItem\"\n\t\t\t\t\t@paste=\"onPasteImage\"\n\t\t\t\t\t@keydown.tab.exact.prevent=\"\"\n\t\t\t\t\t@keydown.tab=\"selectItem\"\n\t\t\t\t\t@keydown.up.exact.prevent=\"\"\n\t\t\t\t\t@keydown.up=\"updateActiveUpOrDown(-1)\"\n\t\t\t\t\t@keydown.down.exact.prevent=\"\"\n\t\t\t\t\t@keydown.down=\"updateActiveUpOrDown(1)\"\n\t\t\t\t/>\n\n\t\t\t\t<div class=\"vac-icon-textarea\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"editedMessage._id\"\n\t\t\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t\t\t@click=\"resetMessage\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"edit-close-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"close-outline\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<emoji-picker-container\n\t\t\t\t\t\tv-if=\"showEmojis\"\n\t\t\t\t\t\tv-click-outside=\"() => (emojiOpened = false)\"\n\t\t\t\t\t\t:emoji-opened=\"emojiOpened\"\n\t\t\t\t\t\t:position-top=\"true\"\n\t\t\t\t\t\t@add-emoji=\"addEmoji\"\n\t\t\t\t\t\t@open-emoji=\"emojiOpened = $event\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</emoji-picker-container>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"showFiles\"\n\t\t\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t\t\t@click=\"launchFilePicker\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"paperclip-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"paperclip\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"textareaActionEnabled\"\n\t\t\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t\t\t@click=\"textareaActionHandler\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"custom-action-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"deleted\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<input\n\t\t\t\t\t\tv-if=\"showFiles\"\n\t\t\t\t\t\tref=\"file\"\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t:accept=\"acceptedFiles\"\n\t\t\t\t\t\tstyle=\"display: none\"\n\t\t\t\t\t\t@change=\"onFileChange($event.target.files)\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"showSendIcon\"\n\t\t\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t\t\t:class=\"{ 'vac-send-disabled': isMessageEmpty }\"\n\t\t\t\t\t\t@click=\"sendMessage\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"send-icon\">\n\t\t\t\t\t\t\t<svg-icon\n\t\t\t\t\t\t\t\tname=\"send\"\n\t\t\t\t\t\t\t\t:param=\"isMessageEmpty || isFileLoading ? 'disabled' : ''\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport vClickOutside from 'v-click-outside'\nimport { Database } from 'emoji-picker-element'\n\nimport Loader from '../../components/Loader/Loader'\nimport SvgIcon from '../../components/SvgIcon/SvgIcon'\nimport EmojiPickerContainer from '../../components/EmojiPickerContainer/EmojiPickerContainer'\n\nimport RoomHeader from './RoomHeader/RoomHeader'\nimport RoomFiles from './RoomFiles/RoomFiles'\nimport RoomMessageReply from './RoomMessageReply/RoomMessageReply'\nimport RoomUsersTag from './RoomUsersTag/RoomUsersTag'\nimport RoomEmojis from './RoomEmojis/RoomEmojis'\nimport RoomTemplatesText from './RoomTemplatesText/RoomTemplatesText'\nimport Message from '../Message/Message'\n\nimport filteredItems from '../../utils/filter-items'\nimport Recorder from '../../utils/recorder'\n\nconst { detectMobile } = require('../../utils/mobile-detection')\n\nconst debounce = (func, delay) => {\n\tlet inDebounce\n\treturn function () {\n\t\tconst context = this\n\t\tconst args = arguments\n\t\tclearTimeout(inDebounce)\n\t\tinDebounce = setTimeout(() => func.apply(context, args), delay)\n\t}\n}\n\nexport default {\n\tname: 'Room',\n\tcomponents: {\n\t\tLoader,\n\t\tSvgIcon,\n\t\tEmojiPickerContainer,\n\t\tRoomHeader,\n\t\tRoomFiles,\n\t\tRoomMessageReply,\n\t\tRoomUsersTag,\n\t\tRoomEmojis,\n\t\tRoomTemplatesText,\n\t\tMessage\n\t},\n\n\tdirectives: {\n\t\tclickOutside: vClickOutside.directive\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\ttextMessages: { type: Object, required: true },\n\t\tsingleRoom: { type: Boolean, required: true },\n\t\tshowRoomsList: { type: Boolean, required: true },\n\t\tisMobile: { type: Boolean, required: true },\n\t\trooms: { type: Array, required: true },\n\t\troomId: { type: [String, Number], required: true },\n\t\tloadFirstRoom: { type: Boolean, required: true },\n\t\tmessages: { type: Array, required: true },\n\t\troomMessage: { type: String, default: null },\n\t\tmessagesLoaded: { type: Boolean, required: true },\n\t\tmenuActions: { type: Array, required: true },\n\t\tmessageActions: { type: Array, required: true },\n\t\tshowSendIcon: { type: Boolean, required: true },\n\t\tshowFiles: { type: Boolean, required: true },\n\t\tshowAudio: { type: Boolean, required: true },\n\t\taudioBitRate: { type: Number, required: true },\n\t\taudioSampleRate: { type: Number, required: true },\n\t\tshowEmojis: { type: Boolean, required: true },\n\t\tshowReactionEmojis: { type: Boolean, required: true },\n\t\tshowNewMessagesDivider: { type: Boolean, required: true },\n\t\tshowFooter: { type: Boolean, required: true },\n\t\tacceptedFiles: { type: String, required: true },\n\t\ttextFormatting: { type: Object, required: true },\n\t\tlinkOptions: { type: Object, required: true },\n\t\tloadingRooms: { type: Boolean, required: true },\n\t\troomInfoEnabled: { type: Boolean, required: true },\n\t\ttextareaActionEnabled: { type: Boolean, required: true },\n\t\tuserTagsEnabled: { type: Boolean, required: true },\n\t\temojisSuggestionEnabled: { type: Boolean, required: true },\n\t\tscrollDistance: { type: Number, required: true },\n\t\ttemplatesText: { type: Array, default: null }\n\t},\n\n\temits: [\n\t\t'toggle-rooms-list',\n\t\t'room-info',\n\t\t'menu-action-handler',\n\t\t'edit-message',\n\t\t'send-message',\n\t\t'delete-message',\n\t\t'message-action-handler',\n\t\t'fetch-messages',\n\t\t'send-message-reaction',\n\t\t'typing-message',\n\t\t'open-file',\n\t\t'open-user-tag',\n\t\t'open-failed-message',\n\t\t'textarea-action-handler'\n\t],\n\n\tdata() {\n\t\treturn {\n\t\t\tmessage: '',\n\t\t\teditedMessage: {},\n\t\t\tmessageReply: null,\n\t\t\tinfiniteState: null,\n\t\t\tloadingMessages: false,\n\t\t\tobserver: null,\n\t\t\tshowLoader: true,\n\t\t\tloadingMoreMessages: false,\n\t\t\tfiles: [],\n\t\t\tfileDialog: false,\n\t\t\temojiOpened: false,\n\t\t\thideOptions: true,\n\t\t\tscrollIcon: false,\n\t\t\tscrollMessagesCount: 0,\n\t\t\tnewMessages: [],\n\t\t\tkeepKeyboardOpen: false,\n\t\t\tfilteredEmojis: [],\n\t\t\tfilteredUsersTag: [],\n\t\t\tselectedUsersTag: [],\n\t\t\tfilteredTemplatesText: [],\n\t\t\tselectEmojiItem: null,\n\t\t\tselectUsersTagItem: null,\n\t\t\tselectTemplatesTextItem: null,\n\t\t\tactiveUpOrDownEmojis: null,\n\t\t\tactiveUpOrDownUsersTag: null,\n\t\t\tactiveUpOrDownTemplatesText: null,\n\t\t\ttextareaCursorPosition: null,\n\t\t\tcursorRangePosition: null,\n\t\t\temojisDB: new Database(),\n\t\t\trecorder: this.initRecorder(),\n\t\t\tisRecording: false,\n\t\t\tformat: 'mp3'\n\t\t}\n\t},\n\n\tcomputed: {\n\t\troom() {\n\t\t\treturn this.rooms.find(room => room.roomId === this.roomId) || {}\n\t\t},\n\t\tshowNoMessages() {\n\t\t\treturn (\n\t\t\t\tthis.room.roomId &&\n\t\t\t\t!this.messages.length &&\n\t\t\t\t!this.loadingMessages &&\n\t\t\t\t!this.loadingRooms\n\t\t\t)\n\t\t},\n\t\tshowNoRoom() {\n\t\t\tconst noRoomSelected =\n\t\t\t\t(!this.rooms.length && !this.loadingRooms) ||\n\t\t\t\t(!this.room.roomId && !this.loadFirstRoom)\n\n\t\t\tif (noRoomSelected) {\n\t\t\t\tthis.loadingMessages = false /* eslint-disable-line vue/no-side-effects-in-computed-properties */\n\t\t\t}\n\t\t\treturn noRoomSelected\n\t\t},\n\t\tshowMessagesStarted() {\n\t\t\treturn this.messages.length && this.messagesLoaded\n\t\t},\n\t\tisMessageEmpty() {\n\t\t\treturn !this.files.length && !this.message.trim()\n\t\t},\n\t\tisFileLoading() {\n\t\t\treturn this.files.some(e => e.loading)\n\t\t},\n\t\trecordedTime() {\n\t\t\treturn new Date(this.recorder.duration * 1000).toISOString().substr(14, 5)\n\t\t},\n\t\tshadowFooter() {\n\t\t\treturn (\n\t\t\t\t!!this.filteredEmojis.length ||\n\t\t\t\t!!this.filteredUsersTag.length ||\n\t\t\t\t!!this.filteredTemplatesText.length ||\n\t\t\t\t!!this.files.length ||\n\t\t\t\t!!this.messageReply\n\t\t\t)\n\t\t}\n\t},\n\n\twatch: {\n\t\tmessage(val) {\n\t\t\tthis.getTextareaRef().value = val\n\t\t},\n\t\tloadingMessages(val) {\n\t\t\tif (val) {\n\t\t\t\tthis.infiniteState = null\n\t\t\t} else {\n\t\t\t\tif (this.infiniteState) this.infiniteState.loaded()\n\t\t\t\tthis.focusTextarea(true)\n\t\t\t\tsetTimeout(() => this.initIntersectionObserver())\n\t\t\t}\n\t\t},\n\t\troom: {\n\t\t\timmediate: true,\n\t\t\thandler(newVal, oldVal) {\n\t\t\t\tif (newVal.roomId && (!oldVal || newVal.roomId !== oldVal.roomId)) {\n\t\t\t\t\tthis.onRoomChanged()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\troomMessage: {\n\t\t\timmediate: true,\n\t\t\thandler(val) {\n\t\t\t\tif (val) this.message = this.roomMessage\n\t\t\t}\n\t\t},\n\t\tmessages: {\n\t\t\tdeep: true,\n\t\t\thandler(newVal, oldVal) {\n\t\t\t\tnewVal.forEach((message, i) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.showNewMessagesDivider &&\n\t\t\t\t\t\t!message.seen &&\n\t\t\t\t\t\tmessage.senderId !== this.currentUserId\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.newMessages.push({\n\t\t\t\t\t\t\t_id: message._id,\n\t\t\t\t\t\t\tindex: i\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (oldVal?.length === newVal?.length - 1) {\n\t\t\t\t\tthis.newMessages = []\n\t\t\t\t}\n\t\t\t\tif (this.infiniteState) {\n\t\t\t\t\tthis.infiniteState.loaded()\n\t\t\t\t}\n\t\t\t\tsetTimeout(() => (this.loadingMoreMessages = false))\n\t\t\t}\n\t\t},\n\t\tmessagesLoaded(val) {\n\t\t\tif (val) this.loadingMessages = false\n\t\t\tif (this.infiniteState) this.infiniteState.complete()\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.newMessages = []\n\t\tconst isMobile = detectMobile()\n\n\t\tthis.getTextareaRef().addEventListener(\n\t\t\t'keyup',\n\t\t\tdebounce(e => {\n\t\t\t\tif (e.key === 'Enter' && !e.shiftKey && !this.fileDialog) {\n\t\t\t\t\tif (isMobile) {\n\t\t\t\t\t\tthis.message = this.message + '\\n'\n\t\t\t\t\t\tsetTimeout(() => this.onChangeInput())\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t!this.filteredEmojis.length &&\n\t\t\t\t\t\t!this.filteredUsersTag.length &&\n\t\t\t\t\t\t!this.filteredTemplatesText.length\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.sendMessage()\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.updateFooterList('@')\n\t\t\t\t\tthis.updateFooterList(':')\n\t\t\t\t\tthis.updateFooterList('/')\n\t\t\t\t}, 60)\n\t\t\t}),\n\t\t\t50\n\t\t)\n\n\t\tthis.getTextareaRef().addEventListener('click', () => {\n\t\t\tif (isMobile) this.keepKeyboardOpen = true\n\n\t\t\tthis.updateFooterList('@')\n\t\t\tthis.updateFooterList(':')\n\t\t\tthis.updateFooterList('/')\n\t\t})\n\n\t\tthis.getTextareaRef().addEventListener('blur', () => {\n\t\t\tthis.resetFooterList()\n\t\t\tif (isMobile) setTimeout(() => (this.keepKeyboardOpen = false))\n\t\t})\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.stopRecorder()\n\t},\n\n\tmethods: {\n\t\tinitIntersectionObserver() {\n\t\t\tif (this.observer) {\n\t\t\t\tthis.showLoader = true\n\t\t\t\tthis.observer.disconnect()\n\t\t\t}\n\n\t\t\tconst loader = document.getElementById('infinite-loader-messages')\n\n\t\t\tif (loader) {\n\t\t\t\tconst options = {\n\t\t\t\t\troot: document.getElementById('messages-list'),\n\t\t\t\t\trootMargin: `${this.scrollDistance}px`,\n\t\t\t\t\tthreshold: 0\n\t\t\t\t}\n\n\t\t\t\tthis.observer = new IntersectionObserver(entries => {\n\t\t\t\t\tif (entries[0].isIntersecting) {\n\t\t\t\t\t\tthis.loadMoreMessages()\n\t\t\t\t\t}\n\t\t\t\t}, options)\n\n\t\t\t\tthis.observer.observe(loader)\n\t\t\t}\n\t\t},\n\t\tpreventTopScroll() {\n\t\t\tconst container = this.$refs.scrollContainer\n\t\t\tconst prevScrollHeight = container.scrollHeight\n\n\t\t\tconst observer = new ResizeObserver(_ => {\n\t\t\t\tif (container.scrollHeight !== prevScrollHeight) {\n\t\t\t\t\tif (this.$refs.scrollContainer) {\n\t\t\t\t\t\tthis.$refs.scrollContainer.scrollTo({\n\t\t\t\t\t\t\ttop: container.scrollHeight - prevScrollHeight\n\t\t\t\t\t\t})\n\t\t\t\t\t\tobserver.disconnect()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tfor (var i = 0; i < container.children.length; i++) {\n\t\t\t\tobserver.observe(container.children[i])\n\t\t\t}\n\t\t},\n\t\tgetTextareaRef() {\n\t\t\treturn this.$refs.roomTextarea\n\t\t},\n\t\ttouchStart(touchEvent) {\n\t\t\tif (this.singleRoom) return\n\n\t\t\tif (touchEvent.changedTouches.length === 1) {\n\t\t\t\tconst posXStart = touchEvent.changedTouches[0].clientX\n\t\t\t\tconst posYStart = touchEvent.changedTouches[0].clientY\n\n\t\t\t\taddEventListener(\n\t\t\t\t\t'touchend',\n\t\t\t\t\ttouchEvent => this.touchEnd(touchEvent, posXStart, posYStart),\n\t\t\t\t\t{ once: true }\n\t\t\t\t)\n\t\t\t}\n\t\t},\n\t\ttouchEnd(touchEvent, posXStart, posYStart) {\n\t\t\tif (touchEvent.changedTouches.length === 1) {\n\t\t\t\tconst posXEnd = touchEvent.changedTouches[0].clientX\n\t\t\t\tconst posYEnd = touchEvent.changedTouches[0].clientY\n\n\t\t\t\tconst swippedRight = posXEnd - posXStart > 100\n\t\t\t\tconst swippedVertically = Math.abs(posYEnd - posYStart) > 50\n\n\t\t\t\tif (swippedRight && !swippedVertically) {\n\t\t\t\t\tthis.$emit('toggle-rooms-list')\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonRoomChanged() {\n\t\t\tthis.loadingMessages = true\n\t\t\tthis.scrollIcon = false\n\t\t\tthis.scrollMessagesCount = 0\n\t\t\tthis.resetMessage(true, true)\n\n\t\t\tif (this.roomMessage) {\n\t\t\t\tthis.message = this.roomMessage\n\t\t\t\tsetTimeout(() => this.onChangeInput())\n\t\t\t}\n\n\t\t\tif (!this.messages.length && this.messagesLoaded) {\n\t\t\t\tthis.loadingMessages = false\n\t\t\t}\n\n\t\t\tconst unwatch = this.$watch(\n\t\t\t\t() => this.messages,\n\t\t\t\tval => {\n\t\t\t\t\tif (!val || !val.length) return\n\n\t\t\t\t\tconst element = this.$refs.scrollContainer\n\t\t\t\t\tif (!element) return\n\n\t\t\t\t\tunwatch()\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\telement.scrollTo({ top: element.scrollHeight })\n\t\t\t\t\t\tthis.loadingMessages = false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t)\n\t\t},\n\t\tonMessageAdded({ message, index, ref }) {\n\t\t\tif (index !== this.messages.length - 1) return\n\n\t\t\tconst autoScrollOffset = ref.offsetHeight + 60\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (\n\t\t\t\t\tthis.getBottomScroll(this.$refs.scrollContainer) < autoScrollOffset\n\t\t\t\t) {\n\t\t\t\t\tthis.scrollToBottom()\n\t\t\t\t} else {\n\t\t\t\t\tif (message.senderId === this.currentUserId) {\n\t\t\t\t\t\tthis.scrollToBottom()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scrollIcon = true\n\t\t\t\t\t\tthis.scrollMessagesCount++\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tonContainerScroll(e) {\n\t\t\tthis.hideOptions = true\n\n\t\t\tif (!e.target) return\n\n\t\t\tconst bottomScroll = this.getBottomScroll(e.target)\n\t\t\tif (bottomScroll < 60) this.scrollMessagesCount = 0\n\t\t\tthis.scrollIcon = bottomScroll > 500 || this.scrollMessagesCount\n\t\t},\n\t\tupdateFooterList(tagChar) {\n\t\t\tif (!this.getTextareaRef()) return\n\n\t\t\tif (tagChar === ':' && !this.emojisSuggestionEnabled) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (tagChar === '@' && (!this.userTagsEnabled || !this.room.users)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (tagChar === '/' && !this.templatesText) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.textareaCursorPosition === this.getTextareaRef().selectionStart\n\t\t\t) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.textareaCursorPosition = this.getTextareaRef().selectionStart\n\n\t\t\tlet position = this.textareaCursorPosition\n\n\t\t\twhile (\n\t\t\t\tposition > 0 &&\n\t\t\t\tthis.message.charAt(position - 1) !== tagChar &&\n\t\t\t\t// eslint-disable-next-line no-unmodified-loop-condition\n\t\t\t\t(this.message.charAt(position - 1) !== ' ' || tagChar !== ':')\n\t\t\t) {\n\t\t\t\tposition--\n\t\t\t}\n\n\t\t\tconst beforeTag = this.message.charAt(position - 2)\n\t\t\tconst notLetterNumber = !beforeTag.match(/^[0-9a-zA-Z]+$/)\n\n\t\t\tif (\n\t\t\t\tthis.message.charAt(position - 1) === tagChar &&\n\t\t\t\t(!beforeTag || beforeTag === ' ' || notLetterNumber)\n\t\t\t) {\n\t\t\t\tconst query = this.message.substring(\n\t\t\t\t\tposition,\n\t\t\t\t\tthis.textareaCursorPosition\n\t\t\t\t)\n\t\t\t\tif (tagChar === ':') {\n\t\t\t\t\tthis.updateEmojis(query)\n\t\t\t\t} else if (tagChar === '@') {\n\t\t\t\t\tthis.updateShowUsersTag(query)\n\t\t\t\t} else if (tagChar === '/') {\n\t\t\t\t\tthis.updateShowTemplatesText(query)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.resetFooterList(tagChar)\n\t\t\t}\n\t\t},\n\t\tgetCharPosition(tagChar) {\n\t\t\tconst cursorPosition = this.getTextareaRef().selectionStart\n\n\t\t\tlet position = cursorPosition\n\t\t\twhile (position > 0 && this.message.charAt(position - 1) !== tagChar) {\n\t\t\t\tposition--\n\t\t\t}\n\n\t\t\tlet endPosition = position\n\t\t\twhile (\n\t\t\t\tthis.message.charAt(endPosition) &&\n\t\t\t\tthis.message.charAt(endPosition).trim()\n\t\t\t) {\n\t\t\t\tendPosition++\n\t\t\t}\n\n\t\t\treturn { position, endPosition }\n\t\t},\n\t\tasync updateEmojis(query) {\n\t\t\tif (!query) return\n\n\t\t\tconst emojis = await this.emojisDB.getEmojiBySearchQuery(query)\n\t\t\tthis.filteredEmojis = emojis.map(emoji => emoji.unicode)\n\t\t},\n\t\tselectEmoji(emoji) {\n\t\t\tthis.selectEmojiItem = false\n\n\t\t\tif (!emoji) return\n\n\t\t\tconst { position, endPosition } = this.getCharPosition(':')\n\n\t\t\tthis.message =\n\t\t\t\tthis.message.substr(0, position - 1) +\n\t\t\t\temoji +\n\t\t\t\tthis.message.substr(endPosition, this.message.length - 1)\n\n\t\t\tthis.cursorRangePosition = position\n\t\t\tthis.focusTextarea()\n\t\t},\n\t\tupdateShowUsersTag(query) {\n\t\t\tthis.filteredUsersTag = filteredItems(\n\t\t\t\tthis.room.users,\n\t\t\t\t'username',\n\t\t\t\tquery,\n\t\t\t\ttrue\n\t\t\t).filter(user => user._id !== this.currentUserId)\n\t\t},\n\t\tselectUserTag(user, editMode = false) {\n\t\t\tthis.selectUsersTagItem = false\n\n\t\t\tif (!user) return\n\n\t\t\tconst { position, endPosition } = this.getCharPosition('@')\n\n\t\t\tconst space = this.message.substr(endPosition, endPosition).length\n\t\t\t\t? ''\n\t\t\t\t: ' '\n\n\t\t\tthis.message =\n\t\t\t\tthis.message.substr(0, position) +\n\t\t\t\tuser.username +\n\t\t\t\tspace +\n\t\t\t\tthis.message.substr(endPosition, this.message.length - 1)\n\n\t\t\tthis.selectedUsersTag = [...this.selectedUsersTag, { ...user }]\n\n\t\t\tif (!editMode) {\n\t\t\t\tthis.cursorRangePosition =\n\t\t\t\t\tposition + user.username.length + space.length + 1\n\t\t\t}\n\n\t\t\tthis.focusTextarea()\n\t\t},\n\t\tupdateShowTemplatesText(query) {\n\t\t\tthis.filteredTemplatesText = filteredItems(\n\t\t\t\tthis.templatesText,\n\t\t\t\t'tag',\n\t\t\t\tquery,\n\t\t\t\ttrue\n\t\t\t)\n\t\t},\n\t\tselectTemplateText(template) {\n\t\t\tthis.selectTemplatesTextItem = false\n\n\t\t\tif (!template) return\n\n\t\t\tconst { position, endPosition } = this.getCharPosition('/')\n\n\t\t\tconst space = this.message.substr(endPosition, endPosition).length\n\t\t\t\t? ''\n\t\t\t\t: ' '\n\n\t\t\tthis.message =\n\t\t\t\tthis.message.substr(0, position - 1) +\n\t\t\t\ttemplate.text +\n\t\t\t\tspace +\n\t\t\t\tthis.message.substr(endPosition, this.message.length - 1)\n\n\t\t\tthis.cursorRangePosition =\n\t\t\t\tposition + template.text.length + space.length + 1\n\n\t\t\tthis.focusTextarea()\n\t\t},\n\t\tupdateActiveUpOrDown(direction) {\n\t\t\tif (this.filteredEmojis.length) {\n\t\t\t\tthis.activeUpOrDownEmojis = direction\n\t\t\t} else if (this.filteredUsersTag.length) {\n\t\t\t\tthis.activeUpOrDownUsersTag = direction\n\t\t\t} else if (this.filteredTemplatesText.length) {\n\t\t\t\tthis.activeUpOrDownTemplatesText = direction\n\t\t\t}\n\t\t},\n\t\tselectItem() {\n\t\t\tif (this.filteredEmojis.length) {\n\t\t\t\tthis.selectEmojiItem = true\n\t\t\t} else if (this.filteredUsersTag.length) {\n\t\t\t\tthis.selectUsersTagItem = true\n\t\t\t} else if (this.filteredTemplatesText.length) {\n\t\t\t\tthis.selectTemplatesTextItem = true\n\t\t\t}\n\t\t},\n\t\tresetFooterList(tagChar = null) {\n\t\t\tif (tagChar === ':') {\n\t\t\t\tthis.filteredEmojis = []\n\t\t\t} else if (tagChar === '@') {\n\t\t\t\tthis.filteredUsersTag = []\n\t\t\t} else if (tagChar === '/') {\n\t\t\t\tthis.filteredTemplatesText = []\n\t\t\t} else {\n\t\t\t\tthis.filteredEmojis = []\n\t\t\t\tthis.filteredUsersTag = []\n\t\t\t\tthis.filteredTemplatesText = []\n\t\t\t}\n\n\t\t\tthis.textareaCursorPosition = null\n\t\t},\n\t\tescapeTextarea() {\n\t\t\tif (this.filteredEmojis.length) this.filteredEmojis = []\n\t\t\telse if (this.filteredUsersTag.length) this.filteredUsersTag = []\n\t\t\telse if (this.filteredTemplatesText.length) {\n\t\t\t\tthis.filteredTemplatesText = []\n\t\t\t} else this.resetMessage()\n\t\t},\n\t\tresetMessage(disableMobileFocus = false, initRoom = false) {\n\t\t\tif (!initRoom) {\n\t\t\t\tthis.$emit('typing-message', null)\n\t\t\t}\n\n\t\t\tthis.selectedUsersTag = []\n\t\t\tthis.resetFooterList()\n\t\t\tthis.resetTextareaSize()\n\t\t\tthis.message = ''\n\t\t\tthis.editedMessage = {}\n\t\t\tthis.messageReply = null\n\t\t\tthis.files = []\n\t\t\tthis.emojiOpened = false\n\t\t\tthis.preventKeyboardFromClosing()\n\t\t\tsetTimeout(() => this.focusTextarea(disableMobileFocus))\n\t\t},\n\t\tresetTextareaSize() {\n\t\t\tif (this.getTextareaRef()) {\n\t\t\t\tthis.getTextareaRef().style.height = '20px'\n\t\t\t}\n\t\t},\n\t\tfocusTextarea(disableMobileFocus) {\n\t\t\tif (detectMobile() && disableMobileFocus) return\n\t\t\tif (!this.getTextareaRef()) return\n\t\t\tthis.getTextareaRef().focus()\n\n\t\t\tif (this.cursorRangePosition) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.getTextareaRef().setSelectionRange(\n\t\t\t\t\t\tthis.cursorRangePosition,\n\t\t\t\t\t\tthis.cursorRangePosition\n\t\t\t\t\t)\n\t\t\t\t\tthis.cursorRangePosition = null\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tpreventKeyboardFromClosing() {\n\t\t\tif (this.keepKeyboardOpen) this.getTextareaRef().focus()\n\t\t},\n\t\tsendMessage() {\n\t\t\tlet message = this.message.trim()\n\n\t\t\tif (!this.files.length && !message) return\n\n\t\t\tif (this.isFileLoading) return\n\n\t\t\tthis.selectedUsersTag.forEach(user => {\n\t\t\t\tmessage = message.replace(\n\t\t\t\t\t`@${user.username}`,\n\t\t\t\t\t`<usertag>${user._id}</usertag>`\n\t\t\t\t)\n\t\t\t})\n\n\t\t\tconst files = this.files.length ? this.files : null\n\n\t\t\tif (this.editedMessage._id) {\n\t\t\t\tif (\n\t\t\t\t\tthis.editedMessage.content !== message ||\n\t\t\t\t\tthis.editedMessage.files?.length ||\n\t\t\t\t\tthis.files.length\n\t\t\t\t) {\n\t\t\t\t\tthis.$emit('edit-message', {\n\t\t\t\t\t\tmessageId: this.editedMessage._id,\n\t\t\t\t\t\tnewContent: message,\n\t\t\t\t\t\tfiles: files,\n\t\t\t\t\t\treplyMessage: this.messageReply,\n\t\t\t\t\t\tusersTag: this.selectedUsersTag\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.$emit('send-message', {\n\t\t\t\t\tcontent: message,\n\t\t\t\t\tfiles: files,\n\t\t\t\t\treplyMessage: this.messageReply,\n\t\t\t\t\tusersTag: this.selectedUsersTag\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis.resetMessage(true)\n\t\t},\n\t\tloadMoreMessages() {\n\t\t\tif (this.loadingMessages) return\n\n\t\t\tsetTimeout(\n\t\t\t\t() => {\n\t\t\t\t\tif (this.loadingMoreMessages) return\n\n\t\t\t\t\tif (this.messagesLoaded || !this.room.roomId) {\n\t\t\t\t\t\tthis.loadingMoreMessages = false\n\t\t\t\t\t\tthis.showLoader = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.preventTopScroll()\n\t\t\t\t\tthis.$emit('fetch-messages')\n\t\t\t\t\tthis.loadingMoreMessages = true\n\t\t\t\t},\n\t\t\t\t// prevent scroll bouncing speed\n\t\t\t\t500\n\t\t\t)\n\t\t},\n\t\tmessageActionHandler({ action, message }) {\n\t\t\tswitch (action.name) {\n\t\t\t\tcase 'replyMessage':\n\t\t\t\t\treturn this.replyMessage(message)\n\t\t\t\tcase 'editMessage':\n\t\t\t\t\treturn this.editMessage(message)\n\t\t\t\tcase 'deleteMessage':\n\t\t\t\t\treturn this.$emit('delete-message', message)\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.$emit('message-action-handler', { action, message })\n\t\t\t}\n\t\t},\n\t\tsendMessageReaction(messageReaction) {\n\t\t\tthis.$emit('send-message-reaction', messageReaction)\n\t\t},\n\t\treplyMessage(message) {\n\t\t\tthis.editedMessage = {}\n\t\t\tthis.messageReply = message\n\t\t\tthis.focusTextarea()\n\t\t},\n\t\teditMessage(message) {\n\t\t\tthis.resetMessage()\n\n\t\t\tthis.editedMessage = { ...message }\n\n\t\t\tlet messageContent = message.content\n\t\t\tconst initialContent = messageContent\n\n\t\t\tconst firstTag = '<usertag>'\n\t\t\tconst secondTag = '</usertag>'\n\n\t\t\tconst usertags = [\n\t\t\t\t...messageContent.matchAll(new RegExp(firstTag, 'gi'))\n\t\t\t].map(a => a.index)\n\n\t\t\tusertags.forEach(index => {\n\t\t\t\tconst userId = initialContent.substring(\n\t\t\t\t\tindex + firstTag.length,\n\t\t\t\t\tinitialContent.indexOf(secondTag, index)\n\t\t\t\t)\n\n\t\t\t\tconst user = this.room.users.find(user => user._id === userId)\n\n\t\t\t\tmessageContent = messageContent.replace(\n\t\t\t\t\t`${firstTag}${userId}${secondTag}`,\n\t\t\t\t\t`@${user?.username || 'unknown'}`\n\t\t\t\t)\n\n\t\t\t\tthis.selectUserTag(user, true)\n\t\t\t})\n\n\t\t\tthis.message = messageContent\n\n\t\t\tif (message.files) {\n\t\t\t\tthis.files = [...message.files]\n\t\t\t}\n\n\t\t\tsetTimeout(() => this.resizeTextarea())\n\t\t},\n\t\tgetBottomScroll(element) {\n\t\t\tconst { scrollHeight, clientHeight, scrollTop } = element\n\t\t\treturn scrollHeight - clientHeight - scrollTop\n\t\t},\n\t\tscrollToBottom() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst element = this.$refs.scrollContainer\n\t\t\t\telement.classList.add('vac-scroll-smooth')\n\t\t\t\telement.scrollTo({ top: element.scrollHeight, behavior: 'smooth' })\n\t\t\t\tsetTimeout(() => element.classList.remove('vac-scroll-smooth'))\n\t\t\t}, 50)\n\t\t},\n\t\tonChangeInput: debounce(function () {\n\t\t\tif (this.getTextareaRef()?.value || this.getTextareaRef()?.value === '') {\n\t\t\t\tthis.message = this.getTextareaRef()?.value\n\t\t\t}\n\t\t\tthis.keepKeyboardOpen = true\n\t\t\tthis.resizeTextarea()\n\t\t\tthis.$emit('typing-message', this.message)\n\t\t}, 100),\n\t\tresizeTextarea() {\n\t\t\tconst el = this.getTextareaRef()\n\n\t\t\tif (!el) return\n\n\t\t\tconst padding = window\n\t\t\t\t.getComputedStyle(el, null)\n\t\t\t\t.getPropertyValue('padding-top')\n\t\t\t\t.replace('px', '')\n\n\t\t\tel.style.height = 0\n\t\t\tel.style.height = el.scrollHeight - padding * 2 + 'px'\n\t\t},\n\t\taddEmoji(emoji) {\n\t\t\tthis.message += emoji.unicode\n\t\t\tthis.focusTextarea(true)\n\t\t},\n\t\tlaunchFilePicker() {\n\t\t\tthis.$refs.file.value = ''\n\t\t\tthis.$refs.file.click()\n\t\t},\n\t\tonPasteImage(pasteEvent) {\n\t\t\tconst items = pasteEvent.clipboardData?.items\n\n\t\t\tif (items) {\n\t\t\t\tArray.from(items).forEach(item => {\n\t\t\t\t\tif (item.type.includes('image')) {\n\t\t\t\t\t\tconst blob = item.getAsFile()\n\t\t\t\t\t\tthis.onFileChange([blob])\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync onFileChange(files) {\n\t\t\tthis.fileDialog = true\n\t\t\tthis.focusTextarea()\n\n\t\t\tArray.from(files).forEach(async file => {\n\t\t\t\tconst fileURL = URL.createObjectURL(file)\n\t\t\t\tconst typeIndex = file.name.lastIndexOf('.')\n\n\t\t\t\tthis.files.push({\n\t\t\t\t\tloading: true,\n\t\t\t\t\tname: file.name.substring(0, typeIndex),\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\ttype: file.type,\n\t\t\t\t\textension: file.name.substring(typeIndex + 1),\n\t\t\t\t\tlocalUrl: fileURL\n\t\t\t\t})\n\n\t\t\t\tconst blobFile = await fetch(fileURL).then(res => res.blob())\n\n\t\t\t\tlet loadedFile = this.files.find(file => file.localUrl === fileURL)\n\n\t\t\t\tif (loadedFile) {\n\t\t\t\t\tloadedFile.blob = blobFile\n\t\t\t\t\tloadedFile.loading = false\n\t\t\t\t\tdelete loadedFile.loading\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tsetTimeout(() => (this.fileDialog = false), 500)\n\t\t},\n\t\tremoveFile(index) {\n\t\t\tthis.files.splice(index, 1)\n\t\t\tthis.focusTextarea()\n\t\t},\n\t\tinitRecorder() {\n\t\t\tthis.isRecording = false\n\n\t\t\treturn new Recorder({\n\t\t\t\tbitRate: this.audioBitRate,\n\t\t\t\tsampleRate: this.audioSampleRate,\n\t\t\t\tbeforeRecording: null,\n\t\t\t\tafterRecording: null,\n\t\t\t\tpauseRecording: null,\n\t\t\t\tmicFailed: this.micFailed\n\t\t\t})\n\t\t},\n\t\tmicFailed() {\n\t\t\tthis.isRecording = false\n\t\t\tthis.recorder = this.initRecorder()\n\t\t},\n\t\ttoggleRecorder(recording) {\n\t\t\tthis.isRecording = recording\n\n\t\t\tif (!this.recorder.isRecording) {\n\t\t\t\tsetTimeout(() => this.recorder.start(), 200)\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tthis.recorder.stop()\n\n\t\t\t\t\tconst record = this.recorder.records[0]\n\n\t\t\t\t\tthis.files.push({\n\t\t\t\t\t\tblob: record.blob,\n\t\t\t\t\t\tname: `audio.${this.format}`,\n\t\t\t\t\t\tsize: record.blob.size,\n\t\t\t\t\t\tduration: record.duration,\n\t\t\t\t\t\ttype: record.blob.type,\n\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\tlocalUrl: URL.createObjectURL(record.blob)\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.recorder = this.initRecorder()\n\t\t\t\t\tthis.sendMessage()\n\t\t\t\t} catch {\n\t\t\t\t\tsetTimeout(() => this.stopRecorder(), 100)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tstopRecorder() {\n\t\t\tif (this.recorder.isRecording) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.recorder.stop()\n\t\t\t\t\tthis.recorder = this.initRecorder()\n\t\t\t\t} catch {\n\t\t\t\t\tsetTimeout(() => this.stopRecorder(), 100)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\topenFile({ message, file }) {\n\t\t\tthis.$emit('open-file', { message, file })\n\t\t},\n\t\topenUserTag(user) {\n\t\t\tthis.$emit('open-user-tag', user)\n\t\t},\n\t\ttextareaActionHandler() {\n\t\t\tthis.$emit('textarea-action-handler', this.message)\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Room.vue?vue&type=template&id=d7fb1780&\"\nimport script from \"./Room.vue?vue&type=script&lang=js&\"\nexport * from \"./Room.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"modal\",staticClass:\"vac-media-preview\",attrs:{\"tabindex\":\"0\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.closeModal.apply(null, arguments)},\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.closeModal.apply(null, arguments)}}},[_c('transition',{attrs:{\"name\":\"vac-bounce-preview\",\"appear\":\"\"}},[(_vm.isImage)?_c('div',{staticClass:\"vac-media-preview-container\"},[_c('div',{staticClass:\"vac-image-preview\",style:({\n\t\t\t\t\t'background-image': (\"url('\" + (_vm.file.url) + \"')\")\n\t\t\t\t})})]):(_vm.isVideo)?_c('div',{staticClass:\"vac-media-preview-container\"},[_c('video',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"controls\":\"\",\"autoplay\":\"\"}},[_c('source',{attrs:{\"src\":_vm.file.url}})])]):_vm._e()]),_c('div',{staticClass:\"vac-svg-button\"},[_vm._t(\"preview-close-icon\",function(){return [_c('svg-icon',{attrs:{\"name\":\"close-outline\",\"param\":\"preview\"}})]})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div\n\t\tref=\"modal\"\n\t\ttabindex=\"0\"\n\t\tclass=\"vac-media-preview\"\n\t\t@click.stop=\"closeModal\"\n\t\t@keydown.esc=\"closeModal\"\n\t>\n\t\t<transition name=\"vac-bounce-preview\" appear>\n\t\t\t<div v-if=\"isImage\" class=\"vac-media-preview-container\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"vac-image-preview\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t'background-image': `url('${file.url}')`\n\t\t\t\t\t}\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div v-else-if=\"isVideo\" class=\"vac-media-preview-container\">\n\t\t\t\t<video width=\"100%\" height=\"100%\" controls autoplay>\n\t\t\t\t\t<source :src=\"file.url\" />\n\t\t\t\t</video>\n\t\t\t</div>\n\t\t</transition>\n\n\t\t<div class=\"vac-svg-button\">\n\t\t\t<slot name=\"preview-close-icon\">\n\t\t\t\t<svg-icon name=\"close-outline\" param=\"preview\" />\n\t\t\t</slot>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport SvgIcon from '../../components/SvgIcon/SvgIcon'\n\nconst { isImageFile, isVideoFile } = require('../../utils/media-file')\n\nexport default {\n\tname: 'MediaPreview',\n\tcomponents: {\n\t\tSvgIcon\n\t},\n\n\tprops: {\n\t\tfile: { type: Object, required: true }\n\t},\n\n\temits: ['close-media-preview'],\n\n\tcomputed: {\n\t\tisImage() {\n\t\t\treturn isImageFile(this.file)\n\t\t},\n\t\tisVideo() {\n\t\t\treturn isVideoFile(this.file)\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.$refs.modal.focus()\n\t},\n\n\tmethods: {\n\t\tcloseModal() {\n\t\t\tthis.$emit('close-media-preview')\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../demo/node_modules/thread-loader/dist/cjs.js!../../../demo/node_modules/babel-loader/lib/index.js!../../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MediaPreview.vue?vue&type=template&id=2d3ea15a&\"\nimport script from \"./MediaPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./MediaPreview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n\tROOMS_EMPTY: 'No rooms',\n\tROOM_EMPTY: 'No room selected',\n\tNEW_MESSAGES: 'New Messages',\n\tMESSAGE_DELETED: 'This message was deleted',\n\tMESSAGES_EMPTY: 'No messages',\n\tCONVERSATION_STARTED: 'Conversation started on:',\n\tTYPE_MESSAGE: 'Type message',\n\tSEARCH: 'Search',\n\tIS_ONLINE: 'is online',\n\tLAST_SEEN: 'last seen ',\n\tIS_TYPING: 'is writing...'\n}\n","export const defaultThemeStyles = {\n\tlight: {\n\t\tgeneral: {\n\t\t\tcolor: '#0a0a0a',\n\t\t\tbackgroundInput: '#fff',\n\t\t\tcolorPlaceholder: '#9ca6af',\n\t\t\tcolorCaret: '#1976d2',\n\t\t\tcolorSpinner: '#333',\n\t\t\tborderStyle: '1px solid #e1e4e8',\n\t\t\tbackgroundScrollIcon: '#fff'\n\t\t},\n\n\t\tcontainer: {\n\t\t\tborder: 'none',\n\t\t\tborderRadius: '4px',\n\t\t\tboxShadow:\n\t\t\t\t'0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)'\n\t\t},\n\n\t\theader: {\n\t\t\tbackground: '#fff',\n\t\t\tcolorRoomName: '#0a0a0a',\n\t\t\tcolorRoomInfo: '#9ca6af'\n\t\t},\n\n\t\tfooter: {\n\t\t\tbackground: '#f8f9fa',\n\t\t\tborderStyleInput: '1px solid #e1e4e8',\n\t\t\tborderInputSelected: '#1976d2',\n\t\t\tbackgroundReply: '#e5e5e6',\n\t\t\tbackgroundTagActive: '#e5e5e6',\n\t\t\tbackgroundTag: '#f8f9fa'\n\t\t},\n\n\t\tcontent: {\n\t\t\tbackground: '#f8f9fa'\n\t\t},\n\n\t\tsidemenu: {\n\t\t\tbackground: '#fff',\n\t\t\tbackgroundHover: '#f6f6f6',\n\t\t\tbackgroundActive: '#e5effa',\n\t\t\tcolorActive: '#1976d2',\n\t\t\tborderColorSearch: '#e1e5e8'\n\t\t},\n\n\t\tdropdown: {\n\t\t\tbackground: '#fff',\n\t\t\tbackgroundHover: '#f6f6f6'\n\t\t},\n\n\t\tmessage: {\n\t\t\tbackground: '#fff',\n\t\t\tbackgroundMe: '#ccf2cf',\n\t\t\tcolor: '#0a0a0a',\n\t\t\tcolorStarted: '#9ca6af',\n\t\t\tbackgroundDeleted: '#dadfe2',\n\t\t\tcolorDeleted: '#757e85',\n\t\t\tcolorUsername: '#9ca6af',\n\t\t\tcolorTimestamp: '#828c94',\n\t\t\tbackgroundDate: '#e5effa',\n\t\t\tcolorDate: '#505a62',\n\t\t\tbackgroundSystem: '#e5effa',\n\t\t\tcolorSystem: '#505a62',\n\t\t\tbackgroundMedia: 'rgba(0, 0, 0, 0.15)',\n\t\t\tbackgroundReply: 'rgba(0, 0, 0, 0.08)',\n\t\t\tcolorReplyUsername: '#0a0a0a',\n\t\t\tcolorReply: '#6e6e6e',\n\t\t\tcolorTag: '#0d579c',\n\t\t\tbackgroundImage: '#ddd',\n\t\t\tcolorNewMessages: '#1976d2',\n\t\t\tbackgroundScrollCounter: '#0696c7',\n\t\t\tcolorScrollCounter: '#fff',\n\t\t\tbackgroundReaction: '#eee',\n\t\t\tborderStyleReaction: '1px solid #eee',\n\t\t\tbackgroundReactionHover: '#fff',\n\t\t\tborderStyleReactionHover: '1px solid #ddd',\n\t\t\tcolorReactionCounter: '#0a0a0a',\n\t\t\tbackgroundReactionMe: '#cfecf5',\n\t\t\tborderStyleReactionMe: '1px solid #3b98b8',\n\t\t\tbackgroundReactionHoverMe: '#cfecf5',\n\t\t\tborderStyleReactionHoverMe: '1px solid #3b98b8',\n\t\t\tcolorReactionCounterMe: '#0b59b3',\n\t\t\tbackgroundAudioRecord: '#eb4034',\n\t\t\tbackgroundAudioLine: 'rgba(0, 0, 0, 0.15)',\n\t\t\tbackgroundAudioProgress: '#455247',\n\t\t\tbackgroundAudioProgressSelector: '#455247',\n\t\t\tcolorFileExtension: '#757e85'\n\t\t},\n\n\t\tmarkdown: {\n\t\t\tbackground: 'rgba(239, 239, 239, 0.7)',\n\t\t\tborder: 'rgba(212, 212, 212, 0.9)',\n\t\t\tcolor: '#e01e5a',\n\t\t\tcolorMulti: '#0a0a0a'\n\t\t},\n\n\t\troom: {\n\t\t\tcolorUsername: '#0a0a0a',\n\t\t\tcolorMessage: '#67717a',\n\t\t\tcolorTimestamp: '#a2aeb8',\n\t\t\tcolorStateOnline: '#4caf50',\n\t\t\tcolorStateOffline: '#9ca6af',\n\t\t\tbackgroundCounterBadge: '#0696c7',\n\t\t\tcolorCounterBadge: '#fff'\n\t\t},\n\n\t\temoji: {\n\t\t\tbackground: '#fff'\n\t\t},\n\n\t\ticons: {\n\t\t\tsearch: '#9ca6af',\n\t\t\tadd: '#1976d2',\n\t\t\ttoggle: '#0a0a0a',\n\t\t\tmenu: '#0a0a0a',\n\t\t\tclose: '#9ca6af',\n\t\t\tcloseImage: '#fff',\n\t\t\tfile: '#1976d2',\n\t\t\tpaperclip: '#1976d2',\n\t\t\tcloseOutline: '#000',\n\t\t\tclosePreview: '#fff',\n\t\t\tsend: '#1976d2',\n\t\t\tsendDisabled: '#9ca6af',\n\t\t\temoji: '#1976d2',\n\t\t\temojiReaction: 'rgba(0, 0, 0, 0.3)',\n\t\t\tdocument: '#1976d2',\n\t\t\tpencil: '#9e9e9e',\n\t\t\tcheckmark: '#9e9e9e',\n\t\t\tcheckmarkSeen: '#0696c7',\n\t\t\teye: '#fff',\n\t\t\tdropdownMessage: '#fff',\n\t\t\tdropdownMessageBackground: 'rgba(0, 0, 0, 0.25)',\n\t\t\tdropdownRoom: '#9e9e9e',\n\t\t\tdropdownScroll: '#0a0a0a',\n\t\t\tmicrophone: '#1976d2',\n\t\t\taudioPlay: '#455247',\n\t\t\taudioPause: '#455247',\n\t\t\taudioCancel: '#eb4034',\n\t\t\taudioConfirm: '#1ba65b'\n\t\t}\n\t},\n\tdark: {\n\t\tgeneral: {\n\t\t\tcolor: '#fff',\n\t\t\tbackgroundInput: '#202223',\n\t\t\tcolorPlaceholder: '#596269',\n\t\t\tcolorCaret: '#fff',\n\t\t\tcolorSpinner: '#fff',\n\t\t\tborderStyle: 'none',\n\t\t\tbackgroundScrollIcon: '#fff'\n\t\t},\n\n\t\tcontainer: {\n\t\t\tborder: 'none',\n\t\t\tborderRadius: '4px',\n\t\t\tboxShadow:\n\t\t\t\t'0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)'\n\t\t},\n\n\t\theader: {\n\t\t\tbackground: '#181a1b',\n\t\t\tcolorRoomName: '#fff',\n\t\t\tcolorRoomInfo: '#9ca6af'\n\t\t},\n\n\t\tfooter: {\n\t\t\tbackground: '#131415',\n\t\t\tborderStyleInput: 'none',\n\t\t\tborderInputSelected: '#1976d2',\n\t\t\tbackgroundReply: '#1b1c1c',\n\t\t\tbackgroundTagActive: '#1b1c1c',\n\t\t\tbackgroundTag: '#131415'\n\t\t},\n\n\t\tcontent: {\n\t\t\tbackground: '#131415'\n\t\t},\n\n\t\tsidemenu: {\n\t\t\tbackground: '#181a1b',\n\t\t\tbackgroundHover: '#202224',\n\t\t\tbackgroundActive: '#151617',\n\t\t\tcolorActive: '#fff',\n\t\t\tborderColorSearch: '#181a1b'\n\t\t},\n\n\t\tdropdown: {\n\t\t\tbackground: '#2a2c33',\n\t\t\tbackgroundHover: '#26282e'\n\t\t},\n\n\t\tmessage: {\n\t\t\tbackground: '#22242a',\n\t\t\tbackgroundMe: '#1f7e80',\n\t\t\tcolor: '#fff',\n\t\t\tcolorStarted: '#9ca6af',\n\t\t\tbackgroundDeleted: '#1b1c21',\n\t\t\tcolorDeleted: '#a2a5a8',\n\t\t\tcolorUsername: '#b3bac9',\n\t\t\tcolorTimestamp: '#ebedf2',\n\t\t\tbackgroundDate: 'rgba(0, 0, 0, 0.3)',\n\t\t\tcolorDate: '#bec5cc',\n\t\t\tbackgroundSystem: 'rgba(0, 0, 0, 0.3)',\n\t\t\tcolorSystem: '#bec5cc',\n\t\t\tbackgroundMedia: 'rgba(0, 0, 0, 0.18)',\n\t\t\tbackgroundReply: 'rgba(0, 0, 0, 0.18)',\n\t\t\tcolorReplyUsername: '#fff',\n\t\t\tcolorReply: '#d6d6d6',\n\t\t\tcolorTag: '#f0c60a',\n\t\t\tbackgroundImage: '#ddd',\n\t\t\tcolorNewMessages: '#fff',\n\t\t\tbackgroundScrollCounter: '#1976d2',\n\t\t\tcolorScrollCounter: '#fff',\n\t\t\tbackgroundReaction: 'none',\n\t\t\tborderStyleReaction: 'none',\n\t\t\tbackgroundReactionHover: '#202223',\n\t\t\tborderStyleReactionHover: 'none',\n\t\t\tcolorReactionCounter: '#fff',\n\t\t\tbackgroundReactionMe: '#4e9ad1',\n\t\t\tborderStyleReactionMe: 'none',\n\t\t\tbackgroundReactionHoverMe: '#4e9ad1',\n\t\t\tborderStyleReactionHoverMe: 'none',\n\t\t\tcolorReactionCounterMe: '#fff',\n\t\t\tbackgroundAudioRecord: '#eb4034',\n\t\t\tbackgroundAudioLine: 'rgba(255, 255, 255, 0.15)',\n\t\t\tbackgroundAudioProgress: '#b7d4d3',\n\t\t\tbackgroundAudioProgressSelector: '#b7d4d3',\n\t\t\tcolorFileExtension: '#a2a5a8'\n\t\t},\n\n\t\tmarkdown: {\n\t\t\tbackground: 'rgba(239, 239, 239, 0.7)',\n\t\t\tborder: 'rgba(212, 212, 212, 0.9)',\n\t\t\tcolor: '#e01e5a',\n\t\t\tcolorMulti: '#0a0a0a'\n\t\t},\n\n\t\troom: {\n\t\t\tcolorUsername: '#fff',\n\t\t\tcolorMessage: '#6c7278',\n\t\t\tcolorTimestamp: '#6c7278',\n\t\t\tcolorStateOnline: '#4caf50',\n\t\t\tcolorStateOffline: '#596269',\n\t\t\tbackgroundCounterBadge: '#1976d2',\n\t\t\tcolorCounterBadge: '#fff'\n\t\t},\n\n\t\temoji: {\n\t\t\tbackground: '#343740'\n\t\t},\n\n\t\ticons: {\n\t\t\tsearch: '#596269',\n\t\t\tadd: '#fff',\n\t\t\ttoggle: '#fff',\n\t\t\tmenu: '#fff',\n\t\t\tclose: '#9ca6af',\n\t\t\tcloseImage: '#fff',\n\t\t\tfile: '#1976d2',\n\t\t\tpaperclip: '#fff',\n\t\t\tcloseOutline: '#fff',\n\t\t\tclosePreview: '#fff',\n\t\t\tsend: '#fff',\n\t\t\tsendDisabled: '#646a70',\n\t\t\temoji: '#fff',\n\t\t\temojiReaction: '#fff',\n\t\t\tdocument: '#1976d2',\n\t\t\tpencil: '#ebedf2',\n\t\t\tcheckmark: '#ebedf2',\n\t\t\tcheckmarkSeen: '#f0d90a',\n\t\t\teye: '#fff',\n\t\t\tdropdownMessage: '#fff',\n\t\t\tdropdownMessageBackground: 'rgba(0, 0, 0, 0.25)',\n\t\t\tdropdownRoom: '#fff',\n\t\t\tdropdownScroll: '#0a0a0a',\n\t\t\tmicrophone: '#fff',\n\t\t\taudioPlay: '#b7d4d3',\n\t\t\taudioPause: '#b7d4d3',\n\t\t\taudioCancel: '#eb4034',\n\t\t\taudioConfirm: '#1ba65b'\n\t\t}\n\t}\n}\n\nexport const cssThemeVars = ({\n\tgeneral,\n\tcontainer,\n\theader,\n\tfooter,\n\tsidemenu,\n\tcontent,\n\tdropdown,\n\tmessage,\n\tmarkdown,\n\troom,\n\temoji,\n\ticons\n}) => {\n\treturn {\n\t\t// general\n\t\t'--chat-color': general.color,\n\t\t'--chat-bg-color-input': general.backgroundInput,\n\t\t'--chat-color-spinner': general.colorSpinner,\n\t\t'--chat-color-placeholder': general.colorPlaceholder,\n\t\t'--chat-color-caret': general.colorCaret,\n\t\t'--chat-border-style': general.borderStyle,\n\t\t'--chat-bg-scroll-icon': general.backgroundScrollIcon,\n\n\t\t// container\n\t\t'--chat-container-border': container.border,\n\t\t'--chat-container-border-radius': container.borderRadius,\n\t\t'--chat-container-box-shadow': container.boxShadow,\n\n\t\t// header\n\t\t'--chat-header-bg-color': header.background,\n\t\t'--chat-header-color-name': header.colorRoomName,\n\t\t'--chat-header-color-info': header.colorRoomInfo,\n\n\t\t// footer\n\t\t'--chat-footer-bg-color': footer.background,\n\t\t'--chat-border-style-input': footer.borderStyleInput,\n\t\t'--chat-border-color-input-selected': footer.borderInputSelected,\n\t\t'--chat-footer-bg-color-reply': footer.backgroundReply,\n\t\t'--chat-footer-bg-color-tag-active': footer.backgroundTagActive,\n\t\t'--chat-footer-bg-color-tag': footer.backgroundTag,\n\n\t\t// content\n\t\t'--chat-content-bg-color': content.background,\n\n\t\t// sidemenu\n\t\t'--chat-sidemenu-bg-color': sidemenu.background,\n\t\t'--chat-sidemenu-bg-color-hover': sidemenu.backgroundHover,\n\t\t'--chat-sidemenu-bg-color-active': sidemenu.backgroundActive,\n\t\t'--chat-sidemenu-color-active': sidemenu.colorActive,\n\t\t'--chat-sidemenu-border-color-search': sidemenu.borderColorSearch,\n\n\t\t// dropdown\n\t\t'--chat-dropdown-bg-color': dropdown.background,\n\t\t'--chat-dropdown-bg-color-hover': dropdown.backgroundHover,\n\n\t\t// message\n\t\t'--chat-message-bg-color': message.background,\n\t\t'--chat-message-bg-color-me': message.backgroundMe,\n\t\t'--chat-message-color-started': message.colorStarted,\n\t\t'--chat-message-bg-color-deleted': message.backgroundDeleted,\n\t\t'--chat-message-color-deleted': message.colorDeleted,\n\t\t'--chat-message-color-username': message.colorUsername,\n\t\t'--chat-message-color-timestamp': message.colorTimestamp,\n\t\t'--chat-message-bg-color-date': message.backgroundDate,\n\t\t'--chat-message-color-date': message.colorDate,\n\t\t'--chat-message-bg-color-system': message.backgroundSystem,\n\t\t'--chat-message-color-system': message.colorSystem,\n\t\t'--chat-message-color': message.color,\n\t\t'--chat-message-bg-color-media': message.backgroundMedia,\n\t\t'--chat-message-bg-color-reply': message.backgroundReply,\n\t\t'--chat-message-color-reply-username': message.colorReplyUsername,\n\t\t'--chat-message-color-reply-content': message.colorReply,\n\t\t'--chat-message-color-tag': message.colorTag,\n\t\t'--chat-message-bg-color-image': message.backgroundImage,\n\t\t'--chat-message-color-new-messages': message.colorNewMessages,\n\t\t'--chat-message-bg-color-scroll-counter': message.backgroundScrollCounter,\n\t\t'--chat-message-color-scroll-counter': message.colorScrollCounter,\n\t\t'--chat-message-bg-color-reaction': message.backgroundReaction,\n\t\t'--chat-message-border-style-reaction': message.borderStyleReaction,\n\t\t'--chat-message-bg-color-reaction-hover': message.backgroundReactionHover,\n\t\t'--chat-message-border-style-reaction-hover':\n\t\t\tmessage.borderStyleReactionHover,\n\t\t'--chat-message-color-reaction-counter': message.colorReactionCounter,\n\t\t'--chat-message-bg-color-reaction-me': message.backgroundReactionMe,\n\t\t'--chat-message-border-style-reaction-me': message.borderStyleReactionMe,\n\t\t'--chat-message-bg-color-reaction-hover-me':\n\t\t\tmessage.backgroundReactionHoverMe,\n\t\t'--chat-message-border-style-reaction-hover-me':\n\t\t\tmessage.borderStyleReactionHoverMe,\n\t\t'--chat-message-color-reaction-counter-me': message.colorReactionCounterMe,\n\t\t'--chat-message-bg-color-audio-record': message.backgroundAudioRecord,\n\t\t'--chat-message-bg-color-audio-line': message.backgroundAudioLine,\n\t\t'--chat-message-bg-color-audio-progress': message.backgroundAudioProgress,\n\t\t'--chat-message-bg-color-audio-progress-selector':\n\t\t\tmessage.backgroundAudioProgressSelector,\n\t\t'--chat-message-color-file-extension': message.colorFileExtension,\n\n\t\t// markdown\n\t\t'--chat-markdown-bg': markdown.background,\n\t\t'--chat-markdown-border': markdown.border,\n\t\t'--chat-markdown-color': markdown.color,\n\t\t'--chat-markdown-color-multi': markdown.colorMulti,\n\n\t\t// room\n\t\t'--chat-room-color-username': room.colorUsername,\n\t\t'--chat-room-color-message': room.colorMessage,\n\t\t'--chat-room-color-timestamp': room.colorTimestamp,\n\t\t'--chat-room-color-online': room.colorStateOnline,\n\t\t'--chat-room-color-offline': room.colorStateOffline,\n\t\t'--chat-room-bg-color-badge': room.backgroundCounterBadge,\n\t\t'--chat-room-color-badge': room.colorCounterBadge,\n\n\t\t// emoji\n\t\t'--chat-emoji-bg-color': emoji.background,\n\n\t\t// icons\n\t\t'--chat-icon-color-search': icons.search,\n\t\t'--chat-icon-color-add': icons.add,\n\t\t'--chat-icon-color-toggle': icons.toggle,\n\t\t'--chat-icon-color-menu': icons.menu,\n\t\t'--chat-icon-color-close': icons.close,\n\t\t'--chat-icon-color-close-image': icons.closeImage,\n\t\t'--chat-icon-color-file': icons.file,\n\t\t'--chat-icon-color-paperclip': icons.paperclip,\n\t\t'--chat-icon-color-close-outline': icons.closeOutline,\n\t\t'--chat-icon-color-close-preview': icons.closePreview,\n\t\t'--chat-icon-color-send': icons.send,\n\t\t'--chat-icon-color-send-disabled': icons.sendDisabled,\n\t\t'--chat-icon-color-emoji': icons.emoji,\n\t\t'--chat-icon-color-emoji-reaction': icons.emojiReaction,\n\t\t'--chat-icon-color-document': icons.document,\n\t\t'--chat-icon-color-pencil': icons.pencil,\n\t\t'--chat-icon-color-checkmark': icons.checkmark,\n\t\t'--chat-icon-color-checkmark-seen': icons.checkmarkSeen,\n\t\t'--chat-icon-color-eye': icons.eye,\n\t\t'--chat-icon-color-dropdown-message': icons.dropdownMessage,\n\t\t'--chat-icon-bg-dropdown-message': icons.dropdownMessageBackground,\n\t\t'--chat-icon-color-dropdown-room': icons.dropdownRoom,\n\t\t'--chat-icon-color-dropdown-scroll': icons.dropdownScroll,\n\t\t'--chat-icon-color-microphone': icons.microphone,\n\t\t'--chat-icon-color-audio-play': icons.audioPlay,\n\t\t'--chat-icon-color-audio-pause': icons.audioPause,\n\t\t'--chat-icon-color-audio-cancel': icons.audioCancel,\n\t\t'--chat-icon-color-audio-confirm': icons.audioConfirm\n\t}\n}\n","<template>\n\t<div class=\"vac-card-window\" :style=\"[{ height }, cssVars]\">\n\t\t<div class=\"vac-chat-container\">\n\t\t\t<rooms-list\n\t\t\t\tv-if=\"!singleRoom\"\n\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t:rooms=\"orderedRooms\"\n\t\t\t\t:loading-rooms=\"loadingRooms\"\n\t\t\t\t:rooms-loaded=\"roomsLoaded\"\n\t\t\t\t:room=\"room\"\n\t\t\t\t:room-actions=\"roomActions\"\n\t\t\t\t:text-messages=\"t\"\n\t\t\t\t:show-search=\"showSearch\"\n\t\t\t\t:show-add-room=\"showAddRoom\"\n\t\t\t\t:show-rooms-list=\"showRoomsList\"\n\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t:is-mobile=\"isMobile\"\n\t\t\t\t:scroll-distance=\"scrollDistance\"\n\t\t\t\t@fetch-room=\"fetchRoom\"\n\t\t\t\t@fetch-more-rooms=\"fetchMoreRooms\"\n\t\t\t\t@loading-more-rooms=\"loadingMoreRooms = $event\"\n\t\t\t\t@add-room=\"addRoom\"\n\t\t\t\t@room-action-handler=\"roomActionHandler\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</rooms-list>\n\n\t\t\t<room\n\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t:rooms=\"rooms\"\n\t\t\t\t:room-id=\"room.roomId || ''\"\n\t\t\t\t:load-first-room=\"loadFirstRoom\"\n\t\t\t\t:messages=\"messages\"\n\t\t\t\t:room-message=\"roomMessage\"\n\t\t\t\t:messages-loaded=\"messagesLoaded\"\n\t\t\t\t:menu-actions=\"menuActions\"\n\t\t\t\t:message-actions=\"messageActions\"\n\t\t\t\t:show-send-icon=\"showSendIcon\"\n\t\t\t\t:show-files=\"showFiles\"\n\t\t\t\t:show-audio=\"showAudio\"\n\t\t\t\t:audio-bit-rate=\"audioBitRate\"\n\t\t\t\t:audio-sample-rate=\"audioSampleRate\"\n\t\t\t\t:show-emojis=\"showEmojis\"\n\t\t\t\t:show-reaction-emojis=\"showReactionEmojis\"\n\t\t\t\t:show-new-messages-divider=\"showNewMessagesDivider\"\n\t\t\t\t:show-footer=\"showFooter\"\n\t\t\t\t:text-messages=\"t\"\n\t\t\t\t:single-room=\"singleRoom\"\n\t\t\t\t:show-rooms-list=\"showRoomsList\"\n\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t:link-options=\"linkOptions\"\n\t\t\t\t:is-mobile=\"isMobile\"\n\t\t\t\t:loading-rooms=\"loadingRooms\"\n\t\t\t\t:room-info-enabled=\"roomInfoEnabled\"\n\t\t\t\t:textarea-action-enabled=\"textareaActionEnabled\"\n\t\t\t\t:user-tags-enabled=\"userTagsEnabled\"\n\t\t\t\t:emojis-suggestion-enabled=\"emojisSuggestionEnabled\"\n\t\t\t\t:scroll-distance=\"scrollDistance\"\n\t\t\t\t:accepted-files=\"acceptedFiles\"\n\t\t\t\t:templates-text=\"templatesText\"\n\t\t\t\t@toggle-rooms-list=\"toggleRoomsList\"\n\t\t\t\t@room-info=\"roomInfo\"\n\t\t\t\t@fetch-messages=\"fetchMessages\"\n\t\t\t\t@send-message=\"sendMessage\"\n\t\t\t\t@edit-message=\"editMessage\"\n\t\t\t\t@delete-message=\"deleteMessage\"\n\t\t\t\t@open-file=\"openFile\"\n\t\t\t\t@open-user-tag=\"openUserTag\"\n\t\t\t\t@open-failed-message=\"openFailedMessage\"\n\t\t\t\t@menu-action-handler=\"menuActionHandler\"\n\t\t\t\t@message-action-handler=\"messageActionHandler\"\n\t\t\t\t@send-message-reaction=\"sendMessageReaction\"\n\t\t\t\t@typing-message=\"typingMessage\"\n\t\t\t\t@textarea-action-handler=\"textareaActionHandler\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(i, name) in $scopedSlots\" #[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\" />\n\t\t\t\t</template>\n\t\t\t</room>\n\t\t</div>\n\t\t<transition name=\"vac-fade-preview\" appear>\n\t\t\t<media-preview\n\t\t\t\tv-if=\"showMediaPreview\"\n\t\t\t\t:file=\"previewFile\"\n\t\t\t\t@close-media-preview=\"showMediaPreview = false\"\n\t\t\t/>\n\t\t</transition>\n\t</div>\n</template>\n\n<script>\nimport RoomsList from './RoomsList/RoomsList'\nimport Room from './Room/Room'\nimport MediaPreview from './MediaPreview/MediaPreview'\n\nimport locales from '../locales'\nimport { defaultThemeStyles, cssThemeVars } from '../themes'\nconst {\n\troomsValidation,\n\tpartcipantsValidation\n} = require('../utils/data-validation')\n\nexport default {\n\tname: 'ChatContainer',\n\tcomponents: {\n\t\tRoomsList,\n\t\tRoom,\n\t\tMediaPreview\n\t},\n\n\tprops: {\n\t\theight: { type: String, default: '600px' },\n\t\ttheme: { type: String, default: 'light' },\n\t\tstyles: { type: Object, default: () => ({}) },\n\t\tresponsiveBreakpoint: { type: Number, default: 900 },\n\t\tsingleRoom: { type: Boolean, default: false },\n\t\troomsListOpened: { type: Boolean, default: true },\n\t\ttextMessages: { type: Object, default: null },\n\t\tcurrentUserId: { type: [String, Number], default: '' },\n\t\trooms: { type: Array, default: () => [] },\n\t\troomsOrder: { type: String, default: 'desc' },\n\t\tloadingRooms: { type: Boolean, default: false },\n\t\troomsLoaded: { type: Boolean, default: false },\n\t\troomId: { type: [String, Number], default: null },\n\t\tloadFirstRoom: { type: Boolean, default: true },\n\t\tmessages: { type: Array, default: () => [] },\n\t\tmessagesLoaded: { type: Boolean, default: false },\n\t\troomActions: { type: Array, default: () => [] },\n\t\tmenuActions: { type: Array, default: () => [] },\n\t\tmessageActions: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [\n\t\t\t\t{ name: 'replyMessage', title: 'Reply' },\n\t\t\t\t{ name: 'editMessage', title: 'Edit Message', onlyMe: true },\n\t\t\t\t{ name: 'deleteMessage', title: 'Delete Message', onlyMe: true }\n\t\t\t]\n\t\t},\n\t\tshowSearch: { type: Boolean, default: true },\n\t\tshowAddRoom: { type: Boolean, default: true },\n\t\tshowSendIcon: { type: Boolean, default: true },\n\t\tshowFiles: { type: Boolean, default: true },\n\t\tshowAudio: { type: Boolean, default: true },\n\t\taudioBitRate: { type: Number, default: 128 },\n\t\taudioSampleRate: { type: Number, default: 44100 },\n\t\tshowEmojis: { type: Boolean, default: true },\n\t\tshowReactionEmojis: { type: Boolean, default: true },\n\t\tshowNewMessagesDivider: { type: Boolean, default: true },\n\t\tshowFooter: { type: Boolean, default: true },\n\t\ttextFormatting: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({\n\t\t\t\tdisabled: false,\n\t\t\t\titalic: '_',\n\t\t\t\tbold: '*',\n\t\t\t\tstrike: '~',\n\t\t\t\tunderline: '°',\n\t\t\t\tmultilineCode: '```',\n\t\t\t\tinlineCode: '`'\n\t\t\t})\n\t\t},\n\t\tlinkOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({ disabled: false, target: '_blank', rel: null })\n\t\t},\n\t\troomInfoEnabled: { type: Boolean, default: false },\n\t\ttextareaActionEnabled: { type: Boolean, default: false },\n\t\tuserTagsEnabled: { type: Boolean, default: true },\n\t\temojisSuggestionEnabled: { type: Boolean, default: true },\n\t\troomMessage: { type: String, default: '' },\n\t\tscrollDistance: { type: Number, default: 60 },\n\t\tacceptedFiles: { type: String, default: '*' },\n\t\ttemplatesText: { type: Array, default: null },\n\t\tmediaPreviewEnabled: { type: Boolean, default: true }\n\t},\n\n\temits: [\n\t\t'toggle-rooms-list',\n\t\t'room-info',\n\t\t'fetch-messages',\n\t\t'send-message',\n\t\t'edit-message',\n\t\t'delete-message',\n\t\t'open-file',\n\t\t'open-user-tag',\n\t\t'open-failed-message',\n\t\t'menu-action-handler',\n\t\t'message-action-handler',\n\t\t'send-message-reaction',\n\t\t'typing-message',\n\t\t'textarea-action-handler',\n\t\t'fetch-more-rooms',\n\t\t'add-room',\n\t\t'room-action-handler'\n\t],\n\n\tdata() {\n\t\treturn {\n\t\t\troom: {},\n\t\t\tloadingMoreRooms: false,\n\t\t\tshowRoomsList: true,\n\t\t\tisMobile: false,\n\t\t\tshowMediaPreview: false,\n\t\t\tpreviewFile: {}\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tt() {\n\t\t\treturn {\n\t\t\t\t...locales,\n\t\t\t\t...this.textMessages\n\t\t\t}\n\t\t},\n\t\tcssVars() {\n\t\t\tconst defaultStyles = defaultThemeStyles[this.theme]\n\t\t\tconst customStyles = {}\n\n\t\t\tObject.keys(defaultStyles).map(key => {\n\t\t\t\tcustomStyles[key] = {\n\t\t\t\t\t...defaultStyles[key],\n\t\t\t\t\t...(this.styles[key] || {})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn cssThemeVars(customStyles)\n\t\t},\n\t\torderedRooms() {\n\t\t\treturn this.rooms.slice().sort((a, b) => {\n\t\t\t\tconst aVal = a.index || 0\n\t\t\t\tconst bVal = b.index || 0\n\n\t\t\t\tif (this.roomsOrder === 'asc') {\n\t\t\t\t\treturn aVal < bVal ? -1 : bVal < aVal ? 1 : 0\n\t\t\t\t}\n\n\t\t\t\treturn aVal > bVal ? -1 : bVal > aVal ? 1 : 0\n\t\t\t})\n\t\t}\n\t},\n\n\twatch: {\n\t\trooms: {\n\t\t\timmediate: true,\n\t\t\tdeep: true,\n\t\t\thandler(newVal, oldVal) {\n\t\t\t\tif (\n\t\t\t\t\t!newVal[0] ||\n\t\t\t\t\t!newVal.find(room => room.roomId === this.room.roomId)\n\t\t\t\t) {\n\t\t\t\t\tthis.showRoomsList = true\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!this.loadingMoreRooms &&\n\t\t\t\t\tthis.loadFirstRoom &&\n\t\t\t\t\tnewVal[0] &&\n\t\t\t\t\t(!oldVal || newVal.length !== oldVal.length)\n\t\t\t\t) {\n\t\t\t\t\tif (this.roomId) {\n\t\t\t\t\t\tconst room = newVal.find(r => r.roomId === this.roomId) || {}\n\t\t\t\t\t\tthis.fetchRoom({ room })\n\t\t\t\t\t} else if (!this.isMobile || this.singleRoom) {\n\t\t\t\t\t\tthis.fetchRoom({ room: this.orderedRooms[0] })\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.showRoomsList = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tloadingRooms(val) {\n\t\t\tif (val) this.room = {}\n\t\t},\n\n\t\troomId: {\n\t\t\timmediate: true,\n\t\t\thandler(newVal, oldVal) {\n\t\t\t\tif (newVal && !this.loadingRooms && this.rooms.length) {\n\t\t\t\t\tconst room = this.rooms.find(r => r.roomId === newVal)\n\t\t\t\t\tthis.fetchRoom({ room })\n\t\t\t\t} else if (oldVal && !newVal) {\n\t\t\t\t\tthis.room = {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\troom(val) {\n\t\t\tif (!val || Object.entries(val).length === 0) return\n\n\t\t\troomsValidation(val)\n\n\t\t\tval.users.forEach(user => {\n\t\t\t\tpartcipantsValidation(user)\n\t\t\t})\n\t\t},\n\n\t\troomsListOpened(val) {\n\t\t\tthis.showRoomsList = val\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.updateResponsive()\n\t\twindow.addEventListener('resize', ev => {\n\t\t\tif (ev.isTrusted) this.updateResponsive()\n\t\t})\n\t},\n\n\tmethods: {\n\t\tupdateResponsive() {\n\t\t\tthis.isMobile = window.innerWidth < this.responsiveBreakpoint\n\t\t},\n\t\ttoggleRoomsList() {\n\t\t\tthis.showRoomsList = !this.showRoomsList\n\t\t\tif (this.isMobile) this.room = {}\n\t\t\tthis.$emit('toggle-rooms-list', { opened: this.showRoomsList })\n\t\t},\n\t\tfetchRoom({ room }) {\n\t\t\tthis.room = room\n\t\t\tthis.fetchMessages({ reset: true })\n\t\t\tif (this.isMobile) this.showRoomsList = false\n\t\t},\n\t\tfetchMoreRooms() {\n\t\t\tthis.$emit('fetch-more-rooms')\n\t\t},\n\t\troomInfo() {\n\t\t\tthis.$emit('room-info', this.room)\n\t\t},\n\t\taddRoom() {\n\t\t\tthis.$emit('add-room')\n\t\t},\n\t\tfetchMessages(options) {\n\t\t\tthis.$emit('fetch-messages', { room: this.room, options })\n\t\t},\n\t\tsendMessage(message) {\n\t\t\tthis.$emit('send-message', { ...message, roomId: this.room.roomId })\n\t\t},\n\t\teditMessage(message) {\n\t\t\tthis.$emit('edit-message', { ...message, roomId: this.room.roomId })\n\t\t},\n\t\tdeleteMessage(message) {\n\t\t\tthis.$emit('delete-message', { message, roomId: this.room.roomId })\n\t\t},\n\t\topenFile({ message, file }) {\n\t\t\tif (this.mediaPreviewEnabled && file.action === 'preview') {\n\t\t\t\tthis.previewFile = file.file\n\t\t\t\tthis.showMediaPreview = true\n\t\t\t} else {\n\t\t\t\tthis.$emit('open-file', { message, file })\n\t\t\t}\n\t\t},\n\t\topenUserTag({ user }) {\n\t\t\tthis.$emit('open-user-tag', { user })\n\t\t},\n\t\topenFailedMessage({ message }) {\n\t\t\tthis.$emit('open-failed-message', {\n\t\t\t\tmessage,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\tmenuActionHandler(ev) {\n\t\t\tthis.$emit('menu-action-handler', {\n\t\t\t\taction: ev,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\troomActionHandler({ action, roomId }) {\n\t\t\tthis.$emit('room-action-handler', {\n\t\t\t\taction,\n\t\t\t\troomId\n\t\t\t})\n\t\t},\n\t\tmessageActionHandler(ev) {\n\t\t\tthis.$emit('message-action-handler', {\n\t\t\t\t...ev,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\tsendMessageReaction(messageReaction) {\n\t\t\tthis.$emit('send-message-reaction', {\n\t\t\t\t...messageReaction,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\ttypingMessage(message) {\n\t\t\tthis.$emit('typing-message', {\n\t\t\t\tmessage,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\ttextareaActionHandler(message) {\n\t\t\tthis.$emit('textarea-action-handler', {\n\t\t\t\tmessage,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n@import '../styles/index.scss';\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatWindow.vue?vue&type=template&id=28a59b8e&\"\nimport script from \"./ChatWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatWindow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatWindow.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"window-container\" :class=\"{ 'window-mobile': isDevice }\">\n\t\t<form v-if=\"addNewRoom\" @submit.prevent=\"createRoom\">\n\t\t\t<input v-model=\"addRoomUsername\" type=\"text\" placeholder=\"Add username\" />\n\t\t\t<button type=\"submit\" :disabled=\"disableForm || !addRoomUsername\">\n\t\t\t\tCreate Room\n\t\t\t</button>\n\t\t\t<button class=\"button-cancel\" @click=\"addNewRoom = false\">\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</form>\n\n\t\t<form v-if=\"inviteRoomId\" @submit.prevent=\"addRoomUser\">\n\t\t\t<input v-model=\"invitedUsername\" type=\"text\" placeholder=\"Add username\" />\n\t\t\t<button type=\"submit\" :disabled=\"disableForm || !invitedUsername\">\n\t\t\t\tAdd User\n\t\t\t</button>\n\t\t\t<button class=\"button-cancel\" @click=\"inviteRoomId = null\">\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</form>\n\n\t\t<form v-if=\"removeRoomId\" @submit.prevent=\"deleteRoomUser\">\n\t\t\t<select v-model=\"removeUserId\">\n\t\t\t\t<option default value=\"\">\n\t\t\t\t\tSelect User\n\t\t\t\t</option>\n\t\t\t\t<option v-for=\"user in removeUsers\" :key=\"user._id\" :value=\"user._id\">\n\t\t\t\t\t{{ user.username }}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t\t<button type=\"submit\" :disabled=\"disableForm || !removeUserId\">\n\t\t\t\tRemove User\n\t\t\t</button>\n\t\t\t<button class=\"button-cancel\" @click=\"removeRoomId = null\">\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</form>\n\n\t\t<chat-window\n\t\t\t:height=\"screenHeight\"\n\t\t\t:theme=\"theme\"\n\t\t\t:styles=\"styles\"\n\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t:room-id=\"roomId\"\n\t\t\t:rooms=\"loadedRooms\"\n\t\t\t:loading-rooms=\"loadingRooms\"\n\t\t\t:messages=\"messages\"\n\t\t\t:messages-loaded=\"messagesLoaded\"\n\t\t\t:rooms-loaded=\"roomsLoaded\"\n\t\t\t:room-actions=\"roomActions\"\n\t\t\t:menu-actions=\"menuActions\"\n\t\t\t:room-message=\"roomMessage\"\n\t\t\t:templates-text=\"templatesText\"\n\t\t\t@fetch-more-rooms=\"fetchMoreRooms\"\n\t\t\t@fetch-messages=\"fetchMessages\"\n\t\t\t@send-message=\"sendMessage\"\n\t\t\t@edit-message=\"editMessage\"\n\t\t\t@delete-message=\"deleteMessage\"\n\t\t\t@open-file=\"openFile\"\n\t\t\t@open-user-tag=\"openUserTag\"\n\t\t\t@add-room=\"addRoom\"\n\t\t\t@room-action-handler=\"menuActionHandler\"\n\t\t\t@menu-action-handler=\"menuActionHandler\"\n\t\t\t@send-message-reaction=\"sendMessageReaction\"\n\t\t\t@typing-message=\"typingMessage\"\n\t\t\t@toggle-rooms-list=\"$emit('show-demo-options', $event.opened)\"\n\t\t>\n\t\t\t<!-- <template #room-header=\"{ room }\">\n\t\t\t\t{{ room.roomName }}\n\t\t\t</template> -->\n\t\t</chat-window>\n\t</div>\n</template>\n\n<script>\nimport * as firestoreService from '@/database/firestore'\nimport * as firebaseService from '@/database/firebase'\nimport * as storageService from '@/database/storage'\nimport { parseTimestamp, formatTimestamp } from '@/utils/dates'\n\nimport ChatWindow from './../../src/lib/ChatWindow'\n// import ChatWindow, { Rooms } from 'vue-advanced-chat'\n// import ChatWindow from 'vue-advanced-chat'\n// import 'vue-advanced-chat/dist/vue-advanced-chat.css'\n// import ChatWindow from './../../dist/vue-advanced-chat.umd.min.js'\n\nexport default {\n\tcomponents: {\n\t\tChatWindow\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: String, required: true },\n\t\ttheme: { type: String, required: true },\n\t\tisDevice: { type: Boolean, required: true }\n\t},\n\n\temits: ['show-demo-options'],\n\n\tdata() {\n\t\treturn {\n\t\t\troomsPerPage: 15,\n\t\t\trooms: [],\n\t\t\troomId: '',\n\t\t\tstartRooms: null,\n\t\t\tendRooms: null,\n\t\t\troomsLoaded: false,\n\t\t\tloadingRooms: true,\n\t\t\tallUsers: [],\n\t\t\tloadingLastMessageByRoom: 0,\n\t\t\troomsLoadedCount: false,\n\t\t\tselectedRoom: null,\n\t\t\tmessagesPerPage: 20,\n\t\t\tmessages: [],\n\t\t\tmessagesLoaded: false,\n\t\t\troomMessage: '',\n\t\t\tlastLoadedMessage: null,\n\t\t\tpreviousLastLoadedMessage: null,\n\t\t\troomsListeners: [],\n\t\t\tlisteners: [],\n\t\t\ttypingMessageCache: '',\n\t\t\tdisableForm: false,\n\t\t\taddNewRoom: null,\n\t\t\taddRoomUsername: '',\n\t\t\tinviteRoomId: null,\n\t\t\tinvitedUsername: '',\n\t\t\tremoveRoomId: null,\n\t\t\tremoveUserId: '',\n\t\t\tremoveUsers: [],\n\t\t\troomActions: [\n\t\t\t\t{ name: 'inviteUser', title: 'Invite User' },\n\t\t\t\t{ name: 'removeUser', title: 'Remove User' },\n\t\t\t\t{ name: 'deleteRoom', title: 'Delete Room' }\n\t\t\t],\n\t\t\tmenuActions: [\n\t\t\t\t{ name: 'inviteUser', title: 'Invite User' },\n\t\t\t\t{ name: 'removeUser', title: 'Remove User' },\n\t\t\t\t{ name: 'deleteRoom', title: 'Delete Room' }\n\t\t\t],\n\t\t\tstyles: { container: { borderRadius: '4px' } },\n\t\t\ttemplatesText: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'help',\n\t\t\t\t\ttext: 'This is the help'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttag: 'action',\n\t\t\t\t\ttext: 'This is the action'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttag: 'action 2',\n\t\t\t\t\ttext: 'This is the second action'\n\t\t\t\t}\n\t\t\t]\n\t\t\t// ,dbRequestCount: 0\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tloadedRooms() {\n\t\t\treturn this.rooms.slice(0, this.roomsLoadedCount)\n\t\t},\n\t\tscreenHeight() {\n\t\t\treturn this.isDevice ? window.innerHeight + 'px' : 'calc(100vh - 80px)'\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.fetchRooms()\n\t\tfirebaseService.updateUserOnlineStatus(this.currentUserId)\n\t},\n\n\tmethods: {\n\t\tresetRooms() {\n\t\t\tthis.loadingRooms = true\n\t\t\tthis.loadingLastMessageByRoom = 0\n\t\t\tthis.roomsLoadedCount = 0\n\t\t\tthis.rooms = []\n\t\t\tthis.roomsLoaded = true\n\t\t\tthis.startRooms = null\n\t\t\tthis.endRooms = null\n\t\t\tthis.roomsListeners.forEach(listener => listener())\n\t\t\tthis.roomsListeners = []\n\t\t\tthis.resetMessages()\n\t\t},\n\n\t\tresetMessages() {\n\t\t\tthis.messages = []\n\t\t\tthis.messagesLoaded = false\n\t\t\tthis.lastLoadedMessage = null\n\t\t\tthis.previousLastLoadedMessage = null\n\t\t\tthis.listeners.forEach(listener => listener())\n\t\t\tthis.listeners = []\n\t\t},\n\n\t\tfetchRooms() {\n\t\t\tthis.resetRooms()\n\t\t\tthis.fetchMoreRooms()\n\t\t},\n\n\t\tasync fetchMoreRooms() {\n\t\t\tif (this.endRooms && !this.startRooms) {\n\t\t\t\tthis.roomsLoaded = true\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst query = firestoreService.roomsQuery(\n\t\t\t\tthis.currentUserId,\n\t\t\t\tthis.roomsPerPage,\n\t\t\t\tthis.startRooms\n\t\t\t)\n\n\t\t\tconst rooms = await firestoreService.getRooms(query)\n\t\t\t// this.incrementDbCounter('Fetch Rooms', rooms.size)\n\n\t\t\tthis.roomsLoaded = rooms.empty || rooms.size < this.roomsPerPage\n\n\t\t\tif (this.startRooms) this.endRooms = this.startRooms\n\t\t\tthis.startRooms = rooms.docs[rooms.docs.length - 1]\n\n\t\t\tconst roomUserIds = []\n\t\t\trooms.forEach(room => {\n\t\t\t\troom.data().users.forEach(userId => {\n\t\t\t\t\tconst foundUser = this.allUsers.find(user => user?._id === userId)\n\t\t\t\t\tif (!foundUser && roomUserIds.indexOf(userId) === -1) {\n\t\t\t\t\t\troomUserIds.push(userId)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t\t// this.incrementDbCounter('Fetch Room Users', roomUserIds.length)\n\t\t\tconst rawUsers = []\n\t\t\troomUserIds.forEach(userId => {\n\t\t\t\tconst promise = firestoreService\n\t\t\t\t\t.getUser(userId)\n\t\t\t\t\t.then(user => user.data())\n\t\t\t\trawUsers.push(promise)\n\t\t\t})\n\n\t\t\tthis.allUsers = [...this.allUsers, ...(await Promise.all(rawUsers))]\n\n\t\t\tconst roomList = {}\n\t\t\trooms.forEach(room => {\n\t\t\t\troomList[room.id] = { ...room.data(), users: [] }\n\n\t\t\t\troom.data().users.forEach(userId => {\n\t\t\t\t\tconst foundUser = this.allUsers.find(user => user?._id === userId)\n\t\t\t\t\tif (foundUser) roomList[room.id].users.push(foundUser)\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tconst formattedRooms = []\n\n\t\t\tObject.keys(roomList).forEach(key => {\n\t\t\t\tconst room = roomList[key]\n\n\t\t\t\tconst roomContacts = room.users.filter(\n\t\t\t\t\tuser => user._id !== this.currentUserId\n\t\t\t\t)\n\n\t\t\t\troom.roomName =\n\t\t\t\t\troomContacts.map(user => user.username).join(', ') || 'Myself'\n\n\t\t\t\tconst roomAvatar =\n\t\t\t\t\troomContacts.length === 1 && roomContacts[0].avatar\n\t\t\t\t\t\t? roomContacts[0].avatar\n\t\t\t\t\t\t: require('@/assets/logo.png')\n\n\t\t\t\tformattedRooms.push({\n\t\t\t\t\t...room,\n\t\t\t\t\troomId: key,\n\t\t\t\t\tavatar: roomAvatar,\n\t\t\t\t\tindex: room.lastUpdated.seconds,\n\t\t\t\t\tlastMessage: {\n\t\t\t\t\t\tcontent: 'Room created',\n\t\t\t\t\t\ttimestamp: formatTimestamp(\n\t\t\t\t\t\t\tnew Date(room.lastUpdated.seconds),\n\t\t\t\t\t\t\troom.lastUpdated\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tthis.rooms = this.rooms.concat(formattedRooms)\n\t\t\tformattedRooms.forEach(room => this.listenLastMessage(room))\n\n\t\t\tif (!this.rooms.length) {\n\t\t\t\tthis.loadingRooms = false\n\t\t\t\tthis.roomsLoadedCount = 0\n\t\t\t}\n\n\t\t\tthis.listenUsersOnlineStatus(formattedRooms)\n\t\t\tthis.listenRooms(query)\n\t\t\t// setTimeout(() => console.log('TOTAL', this.dbRequestCount), 2000)\n\t\t},\n\n\t\tlistenLastMessage(room) {\n\t\t\tconst listener = firestoreService.firestoreListener(\n\t\t\t\tfirestoreService.lastMessageQuery(room.roomId),\n\t\t\t\tmessages => {\n\t\t\t\t\t// this.incrementDbCounter('Listen Last Room Message', messages.size)\n\t\t\t\t\tmessages.forEach(message => {\n\t\t\t\t\t\tconst lastMessage = this.formatLastMessage(message.data(), room)\n\t\t\t\t\t\tconst roomIndex = this.rooms.findIndex(\n\t\t\t\t\t\t\tr => room.roomId === r.roomId\n\t\t\t\t\t\t)\n\t\t\t\t\t\tthis.rooms[roomIndex].lastMessage = lastMessage\n\t\t\t\t\t\tthis.rooms = [...this.rooms]\n\t\t\t\t\t})\n\t\t\t\t\tif (this.loadingLastMessageByRoom < this.rooms.length) {\n\t\t\t\t\t\tthis.loadingLastMessageByRoom++\n\n\t\t\t\t\t\tif (this.loadingLastMessageByRoom === this.rooms.length) {\n\t\t\t\t\t\t\tthis.loadingRooms = false\n\t\t\t\t\t\t\tthis.roomsLoadedCount = this.rooms.length\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\n\t\t\tthis.roomsListeners.push(listener)\n\t\t},\n\n\t\tformatLastMessage(message, room) {\n\t\t\tif (!message.timestamp) return\n\n\t\t\tlet content = message.content\n\t\t\tif (message.files?.length) {\n\t\t\t\tconst file = message.files[0]\n\t\t\t\tcontent = `${file.name}.${file.extension || file.type}`\n\t\t\t}\n\n\t\t\tconst username =\n\t\t\t\tmessage.sender_id !== this.currentUserId\n\t\t\t\t\t? room.users.find(user => message.sender_id === user._id)?.username\n\t\t\t\t\t: ''\n\n\t\t\treturn {\n\t\t\t\t...message,\n\t\t\t\t...{\n\t\t\t\t\tcontent,\n\t\t\t\t\ttimestamp: formatTimestamp(\n\t\t\t\t\t\tnew Date(message.timestamp.seconds * 1000),\n\t\t\t\t\t\tmessage.timestamp\n\t\t\t\t\t),\n\t\t\t\t\tusername: username,\n\t\t\t\t\tdistributed: true,\n\t\t\t\t\tseen: message.sender_id === this.currentUserId ? message.seen : null,\n\t\t\t\t\tnew:\n\t\t\t\t\t\tmessage.sender_id !== this.currentUserId &&\n\t\t\t\t\t\t(!message.seen || !message.seen[this.currentUserId])\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tfetchMessages({ room, options = {} }) {\n\t\t\tthis.$emit('show-demo-options', false)\n\n\t\t\tif (options.reset) {\n\t\t\t\tthis.resetMessages()\n\t\t\t\tthis.roomId = room.roomId\n\t\t\t}\n\n\t\t\tif (this.previousLastLoadedMessage && !this.lastLoadedMessage) {\n\t\t\t\tthis.messagesLoaded = true\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.selectedRoom = room.roomId\n\n\t\t\tfirestoreService\n\t\t\t\t.getMessages(room.roomId, this.messagesPerPage, this.lastLoadedMessage)\n\t\t\t\t.then(messages => {\n\t\t\t\t\t// this.incrementDbCounter('Fetch Room Messages', messages.size)\n\t\t\t\t\tif (this.selectedRoom !== room.roomId) return\n\n\t\t\t\t\tif (messages.empty || messages.docs.length < this.messagesPerPage) {\n\t\t\t\t\t\tsetTimeout(() => (this.messagesLoaded = true), 0)\n\t\t\t\t\t}\n\n\t\t\t\t\tif (options.reset) this.messages = []\n\n\t\t\t\t\tmessages.forEach(message => {\n\t\t\t\t\t\tconst formattedMessage = this.formatMessage(room, message)\n\t\t\t\t\t\tthis.messages.unshift(formattedMessage)\n\t\t\t\t\t})\n\n\t\t\t\t\tif (this.lastLoadedMessage) {\n\t\t\t\t\t\tthis.previousLastLoadedMessage = this.lastLoadedMessage\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastLoadedMessage = messages.docs[messages.docs.length - 1]\n\n\t\t\t\t\tconst listener = firestoreService.firestoreListener(\n\t\t\t\t\t\tfirestoreService.paginatedMessagesQuery(\n\t\t\t\t\t\t\troom.roomId,\n\t\t\t\t\t\t\tthis.lastLoadedMessage,\n\t\t\t\t\t\t\tthis.previousLastLoadedMessage\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsnapshots => {\n\t\t\t\t\t\t\t// this.incrementDbCounter('Listen Room Messages', snapshots.size)\n\t\t\t\t\t\t\tthis.listenMessages(snapshots, room)\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\tthis.listeners.push(listener)\n\t\t\t\t})\n\t\t},\n\n\t\tlistenMessages(messages, room) {\n\t\t\tmessages.forEach(message => {\n\t\t\t\tconst formattedMessage = this.formatMessage(room, message)\n\t\t\t\tconst messageIndex = this.messages.findIndex(m => m._id === message.id)\n\n\t\t\t\tif (messageIndex === -1) {\n\t\t\t\t\tthis.messages = this.messages.concat([formattedMessage])\n\t\t\t\t} else {\n\t\t\t\t\tthis.messages[messageIndex] = formattedMessage\n\t\t\t\t\tthis.messages = [...this.messages]\n\t\t\t\t}\n\n\t\t\t\tthis.markMessagesSeen(room, message)\n\t\t\t})\n\t\t},\n\n\t\tmarkMessagesSeen(room, message) {\n\t\t\tif (\n\t\t\t\tmessage.data().sender_id !== this.currentUserId &&\n\t\t\t\t(!message.data().seen || !message.data().seen[this.currentUserId])\n\t\t\t) {\n\t\t\t\tfirestoreService.updateMessage(room.roomId, message.id, {\n\t\t\t\t\t[`seen.${this.currentUserId}`]: new Date()\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tformatMessage(room, message) {\n\t\t\tconst { timestamp } = message.data()\n\n\t\t\tconst formattedMessage = {\n\t\t\t\t...message.data(),\n\t\t\t\t...{\n\t\t\t\t\tsenderId: message.data().sender_id,\n\t\t\t\t\t_id: message.id,\n\t\t\t\t\tseconds: timestamp.seconds,\n\t\t\t\t\ttimestamp: parseTimestamp(timestamp, 'HH:mm'),\n\t\t\t\t\tdate: parseTimestamp(timestamp, 'DD MMMM YYYY'),\n\t\t\t\t\tusername: room.users.find(\n\t\t\t\t\t\tuser => message.data().sender_id === user._id\n\t\t\t\t\t)?.username,\n\t\t\t\t\t// avatar: senderUser ? senderUser.avatar : null,\n\t\t\t\t\tdistributed: true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (message.data().replyMessage) {\n\t\t\t\tformattedMessage.replyMessage = {\n\t\t\t\t\t...message.data().replyMessage,\n\t\t\t\t\t...{\n\t\t\t\t\t\tsenderId: message.data().replyMessage.sender_id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn formattedMessage\n\t\t},\n\n\t\tasync sendMessage({ content, roomId, files, replyMessage }) {\n\t\t\tconst message = {\n\t\t\t\tsender_id: this.currentUserId,\n\t\t\t\tcontent,\n\t\t\t\ttimestamp: new Date()\n\t\t\t}\n\n\t\t\tif (files) {\n\t\t\t\tmessage.files = this.formattedFiles(files)\n\t\t\t}\n\n\t\t\tif (replyMessage) {\n\t\t\t\tmessage.replyMessage = {\n\t\t\t\t\t_id: replyMessage._id,\n\t\t\t\t\tcontent: replyMessage.content,\n\t\t\t\t\tsender_id: replyMessage.senderId\n\t\t\t\t}\n\n\t\t\t\tif (replyMessage.files) {\n\t\t\t\t\tmessage.replyMessage.files = replyMessage.files\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst { id } = await firestoreService.addMessage(roomId, message)\n\n\t\t\tif (files) {\n\t\t\t\tfor (let index = 0; index < files.length; index++) {\n\t\t\t\t\tawait this.uploadFile({ file: files[index], messageId: id, roomId })\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirestoreService.updateRoom(roomId, { lastUpdated: new Date() })\n\t\t},\n\n\t\tasync editMessage({ messageId, newContent, roomId, files }) {\n\t\t\tconst newMessage = { edited: new Date() }\n\t\t\tnewMessage.content = newContent\n\n\t\t\tif (files) {\n\t\t\t\tnewMessage.files = this.formattedFiles(files)\n\t\t\t} else {\n\t\t\t\tnewMessage.files = firestoreService.deleteDbField\n\t\t\t}\n\n\t\t\tawait firestoreService.updateMessage(roomId, messageId, newMessage)\n\n\t\t\tif (files) {\n\t\t\t\tfor (let index = 0; index < files.length; index++) {\n\t\t\t\t\tif (files[index]?.blob) {\n\t\t\t\t\t\tawait this.uploadFile({ file: files[index], messageId, roomId })\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tasync deleteMessage({ message, roomId }) {\n\t\t\tawait firestoreService.updateMessage(roomId, message._id, {\n\t\t\t\tdeleted: new Date()\n\t\t\t})\n\n\t\t\tconst { files } = message\n\n\t\t\tif (files) {\n\t\t\t\tfiles.forEach(file => {\n\t\t\t\t\tstorageService.deleteFile(this.currentUserId, message._id, file)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tasync uploadFile({ file, messageId, roomId }) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tlet type = file.extension || file.type\n\t\t\t\tif (type === 'svg' || type === 'pdf') {\n\t\t\t\t\ttype = file.type\n\t\t\t\t}\n\n\t\t\t\tconst uploadTask = storageService.uploadFileTask(\n\t\t\t\t\tthis.currentUserId,\n\t\t\t\t\tmessageId,\n\t\t\t\t\tfile,\n\t\t\t\t\ttype\n\t\t\t\t)\n\n\t\t\t\tuploadTask.on(\n\t\t\t\t\t'state_changed',\n\t\t\t\t\tsnap => {\n\t\t\t\t\t\tconst progress = Math.round(\n\t\t\t\t\t\t\t(snap.bytesTransferred / snap.totalBytes) * 100\n\t\t\t\t\t\t)\n\t\t\t\t\t\tthis.updateFileProgress(messageId, file.localUrl, progress)\n\t\t\t\t\t},\n\t\t\t\t\t_error => {\n\t\t\t\t\t\tresolve(false)\n\t\t\t\t\t},\n\t\t\t\t\tasync () => {\n\t\t\t\t\t\tconst url = await storageService.getFileDownloadUrl(\n\t\t\t\t\t\t\tuploadTask.snapshot.ref\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\tconst messageDoc = await firestoreService.getMessage(\n\t\t\t\t\t\t\troomId,\n\t\t\t\t\t\t\tmessageId\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\tconst files = messageDoc.data().files\n\n\t\t\t\t\t\tfiles.forEach(f => {\n\t\t\t\t\t\t\tif (f.url === file.localUrl) {\n\t\t\t\t\t\t\t\tf.url = url\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tawait firestoreService.updateMessage(roomId, messageId, { files })\n\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t})\n\t\t},\n\n\t\tupdateFileProgress(messageId, fileUrl, progress) {\n\t\t\tconst message = this.messages.find(message => message._id === messageId)\n\n\t\t\tif (!message || !message.files) return\n\n\t\t\tmessage.files.find(file => file.url === fileUrl).progress = progress\n\t\t\tthis.messages = [...this.messages]\n\t\t},\n\n\t\tformattedFiles(files) {\n\t\t\tconst formattedFiles = []\n\n\t\t\tfiles.forEach(file => {\n\t\t\t\tconst messageFile = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\ttype: file.type,\n\t\t\t\t\textension: file.extension || file.type,\n\t\t\t\t\turl: file.url || file.localUrl\n\t\t\t\t}\n\n\t\t\t\tif (file.audio) {\n\t\t\t\t\tmessageFile.audio = true\n\t\t\t\t\tmessageFile.duration = file.duration\n\t\t\t\t}\n\n\t\t\t\tformattedFiles.push(messageFile)\n\t\t\t})\n\n\t\t\treturn formattedFiles\n\t\t},\n\n\t\topenFile({ file }) {\n\t\t\twindow.open(file.file.url, '_blank')\n\t\t},\n\n\t\tasync openUserTag({ user }) {\n\t\t\tlet roomId\n\n\t\t\tthis.rooms.forEach(room => {\n\t\t\t\tif (room.users.length === 2) {\n\t\t\t\t\tconst userId1 = room.users[0]._id\n\t\t\t\t\tconst userId2 = room.users[1]._id\n\t\t\t\t\tif (\n\t\t\t\t\t\t(userId1 === user._id || userId1 === this.currentUserId) &&\n\t\t\t\t\t\t(userId2 === user._id || userId2 === this.currentUserId)\n\t\t\t\t\t) {\n\t\t\t\t\t\troomId = room.roomId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (roomId) {\n\t\t\t\tthis.roomId = roomId\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst query1 = await firestoreService.getUserRooms(\n\t\t\t\tthis.currentUserId,\n\t\t\t\tuser._id\n\t\t\t)\n\n\t\t\tif (!query1.empty) {\n\t\t\t\treturn this.loadRoom(query1)\n\t\t\t}\n\n\t\t\tconst query2 = await firestoreService.getUserRooms(\n\t\t\t\tuser._id,\n\t\t\t\tthis.currentUserId\n\t\t\t)\n\n\t\t\tif (!query2.empty) {\n\t\t\t\treturn this.loadRoom(query2)\n\t\t\t}\n\n\t\t\tconst room = await firestoreService.addRoom({\n\t\t\t\tusers: [user._id, this.currentUserId],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\n\t\t\tthis.roomId = room.id\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tasync loadRoom(query) {\n\t\t\tquery.forEach(async room => {\n\t\t\t\tif (this.loadingRooms) return\n\t\t\t\tawait firestoreService.updateRoom(room.id, { lastUpdated: new Date() })\n\t\t\t\tthis.roomId = room.id\n\t\t\t\tthis.fetchRooms()\n\t\t\t})\n\t\t},\n\n\t\tmenuActionHandler({ action, roomId }) {\n\t\t\tswitch (action.name) {\n\t\t\t\tcase 'inviteUser':\n\t\t\t\t\treturn this.inviteUser(roomId)\n\t\t\t\tcase 'removeUser':\n\t\t\t\t\treturn this.removeUser(roomId)\n\t\t\t\tcase 'deleteRoom':\n\t\t\t\t\treturn this.deleteRoom(roomId)\n\t\t\t}\n\t\t},\n\n\t\tasync sendMessageReaction({ reaction, remove, messageId, roomId }) {\n\t\t\tfirestoreService.updateMessageReactions(\n\t\t\t\troomId,\n\t\t\t\tmessageId,\n\t\t\t\tthis.currentUserId,\n\t\t\t\treaction.unicode,\n\t\t\t\tremove ? 'remove' : 'add'\n\t\t\t)\n\t\t},\n\n\t\ttypingMessage({ message, roomId }) {\n\t\t\tif (roomId) {\n\t\t\t\tif (message?.length > 1) {\n\t\t\t\t\tthis.typingMessageCache = message\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (message?.length === 1 && this.typingMessageCache) {\n\t\t\t\t\tthis.typingMessageCache = message\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.typingMessageCache = message\n\n\t\t\t\tfirestoreService.updateRoomTypingUsers(\n\t\t\t\t\troomId,\n\t\t\t\t\tthis.currentUserId,\n\t\t\t\t\tmessage ? 'add' : 'remove'\n\t\t\t\t)\n\t\t\t}\n\t\t},\n\n\t\tasync listenRooms(query) {\n\t\t\tconst listener = firestoreService.firestoreListener(query, rooms => {\n\t\t\t\t// this.incrementDbCounter('Listen Rooms Typing Users', rooms.size)\n\t\t\t\trooms.forEach(room => {\n\t\t\t\t\tconst foundRoom = this.rooms.find(r => r.roomId === room.id)\n\t\t\t\t\tif (foundRoom) {\n\t\t\t\t\t\tfoundRoom.typingUsers = room.data().typingUsers\n\t\t\t\t\t\tfoundRoom.index = room.data().lastUpdated.seconds\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.roomsListeners.push(listener)\n\t\t},\n\n\t\tlistenUsersOnlineStatus(rooms) {\n\t\t\trooms.forEach(room => {\n\t\t\t\troom.users.forEach(user => {\n\t\t\t\t\tconst listener = firebaseService.firebaseListener(\n\t\t\t\t\t\tfirebaseService.userStatusRef(user._id),\n\t\t\t\t\t\tsnapshot => {\n\t\t\t\t\t\t\tif (!snapshot || !snapshot.val()) return\n\n\t\t\t\t\t\t\tconst lastChanged = formatTimestamp(\n\t\t\t\t\t\t\t\tnew Date(snapshot.val().lastChanged),\n\t\t\t\t\t\t\t\tnew Date(snapshot.val().lastChanged)\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tuser.status = { ...snapshot.val(), lastChanged }\n\n\t\t\t\t\t\t\tconst roomIndex = this.rooms.findIndex(\n\t\t\t\t\t\t\t\tr => room.roomId === r.roomId\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tthis.rooms[roomIndex] = room\n\t\t\t\t\t\t\tthis.rooms = [...this.rooms]\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\tthis.roomsListeners.push(listener)\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\n\t\taddRoom() {\n\t\t\tthis.resetForms()\n\t\t\tthis.addNewRoom = true\n\t\t},\n\n\t\tasync createRoom() {\n\t\t\tthis.disableForm = true\n\n\t\t\tconst { id } = await firestoreService.addUser({\n\t\t\t\tusername: this.addRoomUsername\n\t\t\t})\n\t\t\tawait firestoreService.updateUser(id, { _id: id })\n\n\t\t\tawait firestoreService.addRoom({\n\t\t\t\tusers: [id, this.currentUserId],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\n\t\t\tthis.addNewRoom = false\n\t\t\tthis.addRoomUsername = ''\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tinviteUser(roomId) {\n\t\t\tthis.resetForms()\n\t\t\tthis.inviteRoomId = roomId\n\t\t},\n\n\t\tasync addRoomUser() {\n\t\t\tthis.disableForm = true\n\n\t\t\tconst { id } = await firestoreService.addUser({\n\t\t\t\tusername: this.invitedUsername\n\t\t\t})\n\t\t\tawait firestoreService.updateUser(id, { _id: id })\n\n\t\t\tawait firestoreService.addRoomUser(this.inviteRoomId, id)\n\n\t\t\tthis.inviteRoomId = null\n\t\t\tthis.invitedUsername = ''\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tremoveUser(roomId) {\n\t\t\tthis.resetForms()\n\t\t\tthis.removeRoomId = roomId\n\t\t\tthis.removeUsers = this.rooms.find(room => room.roomId === roomId).users\n\t\t},\n\n\t\tasync deleteRoomUser() {\n\t\t\tthis.disableForm = true\n\n\t\t\tawait firestoreService.removeRoomUser(\n\t\t\t\tthis.removeRoomId,\n\t\t\t\tthis.removeUserId\n\t\t\t)\n\n\t\t\tthis.removeRoomId = null\n\t\t\tthis.removeUserId = ''\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tasync deleteRoom(roomId) {\n\t\t\tconst room = this.rooms.find(r => r.roomId === roomId)\n\t\t\tif (\n\t\t\t\troom.users.find(user => user._id === 'SGmFnBZB4xxMv9V4CVlW') ||\n\t\t\t\troom.users.find(user => user._id === '6jMsIXUrBHBj7o2cRlau')\n\t\t\t) {\n\t\t\t\treturn alert('Nope, for demo purposes you cannot delete this room')\n\t\t\t}\n\n\t\t\tfirestoreService.getMessages(roomId).then(messages => {\n\t\t\t\tmessages.forEach(message => {\n\t\t\t\t\tfirestoreService.deleteMessage(roomId, message.id)\n\t\t\t\t\tif (message.data().files) {\n\t\t\t\t\t\tmessage.data().files.forEach(file => {\n\t\t\t\t\t\t\tstorageService.deleteFile(this.currentUserId, message.id, file)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tawait firestoreService.deleteRoom(roomId)\n\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tresetForms() {\n\t\t\tthis.disableForm = false\n\t\t\tthis.addNewRoom = null\n\t\t\tthis.addRoomUsername = ''\n\t\t\tthis.inviteRoomId = null\n\t\t\tthis.invitedUsername = ''\n\t\t\tthis.removeRoomId = null\n\t\t\tthis.removeUserId = ''\n\t\t}\n\n\t\t// ,incrementDbCounter(type, size) {\n\t\t// \tsize = size || 1\n\t\t// \tthis.dbRequestCount += size\n\t\t// \tconsole.log(type, size)\n\t\t// }\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.window-container {\n\twidth: 100%;\n}\n\n.window-mobile {\n\tform {\n\t\tpadding: 0 10px 10px;\n\t}\n}\n\nform {\n\tpadding-bottom: 20px;\n}\n\ninput {\n\tpadding: 5px;\n\twidth: 140px;\n\theight: 21px;\n\tborder-radius: 4px;\n\tborder: 1px solid #d2d6da;\n\toutline: none;\n\tfont-size: 14px;\n\tvertical-align: middle;\n\n\t&::placeholder {\n\t\tcolor: #9ca6af;\n\t}\n}\n\nbutton {\n\tbackground: #1976d2;\n\tcolor: #fff;\n\toutline: none;\n\tcursor: pointer;\n\tborder-radius: 4px;\n\tpadding: 8px 12px;\n\tmargin-left: 10px;\n\tborder: none;\n\tfont-size: 14px;\n\ttransition: 0.3s;\n\tvertical-align: middle;\n\n\t&:hover {\n\t\topacity: 0.8;\n\t}\n\n\t&:active {\n\t\topacity: 0.6;\n\t}\n\n\t&:disabled {\n\t\tcursor: initial;\n\t\tbackground: #c6c9cc;\n\t\topacity: 0.6;\n\t}\n}\n\n.button-cancel {\n\tcolor: #a8aeb3;\n\tbackground: none;\n\tmargin-left: 5px;\n}\n\nselect {\n\tvertical-align: middle;\n\theight: 33px;\n\twidth: 152px;\n\tfont-size: 13px;\n\tmargin: 0 !important;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatContainer.vue?vue&type=template&id=31925bf0&scoped=true&\"\nimport script from \"./ChatContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatContainer.vue?vue&type=style&index=0&id=31925bf0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31925bf0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div>\n\t\t<div\n\t\t\tclass=\"app-container\"\n\t\t\t:class=\"{ 'app-mobile': isDevice, 'app-mobile-dark': theme === 'dark' }\"\n\t\t>\n\t\t\t<!-- <div>\n\t\t\t\t<button @click=\"resetData\">\n\t\t\t\t\tClear Data\n\t\t\t\t</button>\n\t\t\t\t<button :disabled=\"updatingData\" @click=\"addData\">\n\t\t\t\t\tAdd Data\n\t\t\t\t</button>\n\t\t\t</div> -->\n\t\t\t<span\n\t\t\t\tv-if=\"showOptions\"\n\t\t\t\tclass=\"user-logged\"\n\t\t\t\t:class=\"{ 'user-logged-dark': theme === 'dark' }\"\n\t\t\t>\n\t\t\t\tLogged as\n\t\t\t</span>\n\t\t\t<select v-if=\"showOptions\" v-model=\"currentUserId\">\n\t\t\t\t<option v-for=\"user in users\" :key=\"user._id\" :value=\"user._id\">\n\t\t\t\t\t{{ user.username }}\n\t\t\t\t</option>\n\t\t\t</select>\n\n\t\t\t<div v-if=\"showOptions\" class=\"button-theme\">\n\t\t\t\t<button class=\"button-light\" @click=\"theme = 'light'\">\n\t\t\t\t\tLight\n\t\t\t\t</button>\n\t\t\t\t<button class=\"button-dark\" @click=\"theme = 'dark'\">\n\t\t\t\t\tDark\n\t\t\t\t</button>\n\t\t\t\t<button class=\"button-github\">\n\t\t\t\t\t<a href=\"https://github.com/antoine92190/vue-advanced-chat\">\n\t\t\t\t\t\t<img src=\"@/assets/github.svg\" />\n\t\t\t\t\t</a>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<chat-container\n\t\t\t\tv-if=\"showChat\"\n\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t:theme=\"theme\"\n\t\t\t\t:is-device=\"isDevice\"\n\t\t\t\t@show-demo-options=\"showDemoOptions = $event\"\n\t\t\t/>\n\n\t\t\t<!-- <div class=\"version-container\">\n\t\t\t\tv1.0.0\n\t\t\t</div> -->\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport * as firestoreService from '@/database/firestore'\nimport * as storageService from '@/database/storage'\n\nimport ChatContainer from './ChatContainer'\n\nexport default {\n\tcomponents: {\n\t\tChatContainer\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\ttheme: 'light',\n\t\t\tshowChat: true,\n\t\t\tusers: [\n\t\t\t\t{\n\t\t\t\t\t_id: '6R0MijpK6M4AIrwaaCY2',\n\t\t\t\t\tusername: 'Luke',\n\t\t\t\t\tavatar: 'https://66.media.tumblr.com/avatar_c6a8eae4303e_512.pnj'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'SGmFnBZB4xxMv9V4CVlW',\n\t\t\t\t\tusername: 'Leia',\n\t\t\t\t\tavatar: 'https://avatarfiles.alphacoders.com/184/thumb-184913.jpg'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: '6jMsIXUrBHBj7o2cRlau',\n\t\t\t\t\tusername: 'Yoda',\n\t\t\t\t\tavatar:\n\t\t\t\t\t\t'https://vignette.wikia.nocookie.net/teamavatarone/images/4/45/Yoda.jpg/revision/latest?cb=20130224160049'\n\t\t\t\t}\n\t\t\t],\n\t\t\tcurrentUserId: '6R0MijpK6M4AIrwaaCY2',\n\t\t\tisDevice: false,\n\t\t\tshowDemoOptions: true,\n\t\t\tupdatingData: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tshowOptions() {\n\t\t\treturn !this.isDevice || this.showDemoOptions\n\t\t}\n\t},\n\n\twatch: {\n\t\tcurrentUserId() {\n\t\t\tthis.showChat = false\n\t\t\tsetTimeout(() => (this.showChat = true), 150)\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.isDevice = window.innerWidth < 500\n\t\twindow.addEventListener('resize', ev => {\n\t\t\tif (ev.isTrusted) this.isDevice = window.innerWidth < 500\n\t\t})\n\t},\n\n\tmethods: {\n\t\tresetData() {\n\t\t\tfirestoreService.getAllRooms().then(rooms => {\n\t\t\t\trooms.forEach(async room => {\n\t\t\t\t\tawait firestoreService.getMessages(room.id).then(messages => {\n\t\t\t\t\t\tmessages.forEach(message => {\n\t\t\t\t\t\t\tfirestoreService.deleteMessage(room.id, message.id)\n\t\t\t\t\t\t\tif (message.data().files) {\n\t\t\t\t\t\t\t\tmessage.data().files.forEach(file => {\n\t\t\t\t\t\t\t\t\tstorageService.deleteFile(\n\t\t\t\t\t\t\t\t\t\tthis.currentUserId,\n\t\t\t\t\t\t\t\t\t\tmessage.id,\n\t\t\t\t\t\t\t\t\t\tfile\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t\tfirestoreService.deleteRoom(room.id)\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tfirestoreService.getAllUsers().then(users => {\n\t\t\t\tusers.forEach(user => {\n\t\t\t\t\tfirestoreService.deleteUser(user.id)\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tasync addData() {\n\t\t\tthis.updatingData = true\n\n\t\t\tconst user1 = this.users[0]\n\t\t\tawait firestoreService.addIdentifiedUser(user1._id, user1)\n\n\t\t\tconst user2 = this.users[1]\n\t\t\tawait firestoreService.addIdentifiedUser(user2._id, user2)\n\n\t\t\tconst user3 = this.users[2]\n\t\t\tawait firestoreService.addIdentifiedUser(user3._id, user3)\n\n\t\t\tawait firestoreService.addRoom({\n\t\t\t\tusers: [user1._id, user2._id],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\t\t\tawait firestoreService.addRoom({\n\t\t\t\tusers: [user1._id, user3._id],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\t\t\tawait firestoreService.addRoom({\n\t\t\t\tusers: [user2._id, user3._id],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\t\t\tawait firestoreService.addRoom({\n\t\t\t\tusers: [user1._id, user2._id, user3._id],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\n\t\t\tthis.updatingData = false\n\t\t\tlocation.reload()\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\nbody {\n\tbackground: #fafafa;\n\tmargin: 0;\n}\n\ninput {\n\t-webkit-appearance: none;\n}\n\n.app-container {\n\tfont-family: 'Quicksand', sans-serif;\n\tpadding: 20px 30px 30px;\n}\n\n.app-mobile {\n\tpadding: 0;\n\n\t&.app-mobile-dark {\n\t\tbackground: #131415;\n\t}\n\n\t.user-logged {\n\t\tmargin: 10px 5px 0 10px;\n\t}\n\n\tselect {\n\t\tmargin: 10px 0;\n\t}\n\n\t.button-theme {\n\t\tmargin: 10px 10px 0 0;\n\n\t\t.button-github {\n\t\t\theight: 23px;\n\n\t\t\timg {\n\t\t\t\theight: 23px;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.user-logged {\n\tfont-size: 12px;\n\tmargin-right: 5px;\n\tmargin-top: 10px;\n\n\t&.user-logged-dark {\n\t\tcolor: #fff;\n\t}\n}\n\nselect {\n\theight: 20px;\n\toutline: none;\n\tborder: 1px solid #e0e2e4;\n\tborder-radius: 4px;\n\tbackground: #fff;\n\tmargin-bottom: 20px;\n}\n\n.button-theme {\n\tfloat: right;\n\tdisplay: flex;\n\talign-items: center;\n\n\t.button-light {\n\t\tbackground: #fff;\n\t\tborder: 1px solid #46484e;\n\t\tcolor: #46484e;\n\t}\n\n\t.button-dark {\n\t\tbackground: #1c1d21;\n\t\tborder: 1px solid #1c1d21;\n\t}\n\n\tbutton {\n\t\tcolor: #fff;\n\t\toutline: none;\n\t\tcursor: pointer;\n\t\tborder-radius: 4px;\n\t\tpadding: 6px 12px;\n\t\tmargin-left: 10px;\n\t\tborder: none;\n\t\tfont-size: 14px;\n\t\ttransition: 0.3s;\n\t\tvertical-align: middle;\n\n\t\t&.button-github {\n\t\t\theight: 30px;\n\t\t\tbackground: none;\n\t\t\tpadding: 0;\n\t\t\tmargin-left: 20px;\n\n\t\t\timg {\n\t\t\t\theight: 30px;\n\t\t\t}\n\t\t}\n\n\t\t&:hover {\n\t\t\topacity: 0.8;\n\t\t}\n\n\t\t&:active {\n\t\t\topacity: 0.6;\n\t\t}\n\n\t\t@media only screen and (max-width: 768px) {\n\t\t\tpadding: 3px 6px;\n\t\t\tfont-size: 13px;\n\t\t}\n\t}\n}\n\n.version-container {\n\tpadding-top: 20px;\n\ttext-align: right;\n\tfont-size: 14px;\n\tcolor: grey;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3184812b&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n\trender: h => h(App)\n}).$mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export function detectMobile() {\n\tvar userAgent = getUserAgent()\n\n\tvar userAgentPart = userAgent.substr(0, 4)\n\n\treturn (\n\t\t/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n\t\t\tuserAgent\n\t\t) ||\n\t\t/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(\n\t\t\tuserAgentPart\n\t\t)\n\t)\n}\n\nfunction getUserAgent() {\n\tvar userAgent =\n\t\tnavigator.userAgent || navigator.vendor || window.opera || null\n\n\tif (!userAgent) throw new Error('Failed to look for user agent information.')\n\n\treturn userAgent\n}\n","export function roomsValidation(obj) {\n\tconst roomsValidate = [\n\t\t{ key: 'roomId', type: ['string', 'number'] },\n\t\t{ key: 'roomName', type: ['string'] },\n\t\t{ key: 'users', type: ['array'] }\n\t]\n\n\tconst validate = (obj, props) => {\n\t\treturn props.every(prop => {\n\t\t\tlet validType = false\n\n\t\t\tif (prop.type[0] === 'array' && Array.isArray(obj[prop.key])) {\n\t\t\t\tvalidType = true\n\t\t\t} else if (prop.type.find(t => t === typeof obj[prop.key])) {\n\t\t\t\tvalidType = true\n\t\t\t}\n\n\t\t\treturn validType && checkObjectValid(obj, prop.key)\n\t\t})\n\t}\n\n\tif (!validate(obj, roomsValidate)) {\n\t\tthrow new Error(\n\t\t\t'Rooms object is not valid! Must contain roomId[String, Number], roomName[String] and users[Array]'\n\t\t)\n\t}\n}\n\nexport function partcipantsValidation(obj) {\n\tconst participantsValidate = [\n\t\t{ key: '_id', type: ['string', 'number'] },\n\t\t{ key: 'username', type: ['string'] }\n\t]\n\n\tconst validate = (obj, props) => {\n\t\treturn props.every(prop => {\n\t\t\tconst validType = prop.type.find(t => t === typeof obj[prop.key])\n\t\t\treturn validType && checkObjectValid(obj, prop.key)\n\t\t})\n\t}\n\n\tif (!validate(obj, participantsValidate)) {\n\t\tthrow new Error(\n\t\t\t'Participants object is not valid! Must contain _id[String, Number] and username[String]'\n\t\t)\n\t}\n}\n\nexport function messagesValidation(obj) {\n\tconst messagesValidate = [\n\t\t{ key: '_id', type: ['string', 'number'] },\n\t\t{ key: 'content', type: ['string', 'number'] },\n\t\t{ key: 'senderId', type: ['string', 'number'] }\n\t]\n\n\tconst validate = (obj, props) => {\n\t\treturn props.every(prop => {\n\t\t\tconst validType = prop.type.find(t => t === typeof obj[prop.key])\n\t\t\treturn validType && checkObjectValid(obj, prop.key)\n\t\t})\n\t}\n\n\tif (!validate(obj, messagesValidate)) {\n\t\tthrow new Error(\n\t\t\t'Messages object is not valid! Must contain _id[String, Number], content[String, Number] and senderId[String, Number]'\n\t\t)\n\t}\n}\n\nfunction checkObjectValid(obj, key) {\n\treturn (\n\t\tObject.prototype.hasOwnProperty.call(obj, key) &&\n\t\tobj[key] !== null &&\n\t\tobj[key] !== undefined\n\t)\n}\n","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../demo/node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../demo/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=style&index=0&id=31925bf0&lang=scss&scoped=true&\"","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}